{smcl}
{txt}{sf}{ul off}{.-}
      name:  {res}<unnamed>
       {txt}log:  {res}C:/Users/themacfreezie/git/weather_project/tanzania/household_code/logs/wv1_AGSEC2B.smcl
  {txt}log type:  {res}smcl
 {txt}opened on:  {res}16 May 2020, 20:38:58
{txt}
{com}. 
. 
. **********************************************************************************
. **      TZA 2008 (Wave 1) - Agriculture Section 2B 
. **********************************************************************************
. 
. * load data
.         use             "$root/SEC_2B", clear
{txt}
{com}. 
. * generate unique ob id 
.         generate        plot_id = hhid + " " + plotnum
{txt}
{com}.         isid            plot_id
{txt}
{com}.         
. * rename variables of interest (plotsizes)
.         rename          s2bq9 plotsize_self
{res}{txt}
{com}.         rename          area plotsize_gps
{res}{txt}
{com}. 
{txt}end of do-file

{com}. do "C:\Users\THEMAC~1\AppData\Local\Temp\STD3114_000000.tmp"
{txt}
{com}. * convert from acres to hectares
.         generate        plotsize_self = plotsize_self_ac * 0.404686
{err}variable {bf}plotsize_self{sf} already defined
{txt}{search r(110), local:r(110);}

end of do-file

{search r(110), local:r(110);}

{com}. do "C:\Users\THEMAC~1\AppData\Local\Temp\STD3114_000000.tmp"
{txt}
{com}. * load data
.         use             "$root/SEC_2B", clear
{txt}
{com}. 
. * generate unique ob id 
.         generate        plot_id = hhid + " " + plotnum
{txt}
{com}.         isid            plot_id
{txt}
{com}.         
. * rename variables of interest (plotsizes)
.         rename          s2bq9 plotsize_self_ac
{res}{txt}
{com}.         rename          area plotsize_gps_ac
{res}{txt}
{com}.         
. * convert from acres to hectares
.         generate        plotsize_self = plotsize_self_ac * 0.404686
{txt}
{com}.         label           var plotsize_self "Self-reported Area (Hectares)"
{txt}
{com}.         generate        plotsize_gps = plotsize_gps_ac * 0.404686
{txt}(74 missing values generated)

{com}.         label           var plotsize_gps "GPS Measured Area (Hectares)"
{txt}
{com}.         drop            plotsize_gps_ac plotsize_self_ac
{txt}
{com}.         
. 
{txt}end of do-file

{com}. do "C:\Users\THEMAC~1\AppData\Local\Temp\STD3114_000000.tmp"
{txt}
{com}. * must merge in regional identifiers from 2008_HHSECA to impute
.         merge           m:1 hhid using "$export/HH_SECA"
{res}
{txt}{col 5}Result{col 38}# of obs.
{col 5}{hline 41}
{col 5}not matched{col 30}{res}           3,201
{txt}{col 9}from master{col 30}{res}               0{txt}  (_merge==1)
{col 9}from using{col 30}{res}           3,201{txt}  (_merge==2)

{col 5}matched{col 30}{res}              86{txt}  (_merge==3)
{col 5}{hline 41}

{com}.         tab                     _merge

                 {txt}_merge {c |}      Freq.     Percent        Cum.
{hline 24}{c +}{hline 35}
         using only (2) {c |}{res}      3,201       97.38       97.38
{txt}            matched (3) {c |}{res}         86        2.62      100.00
{txt}{hline 24}{c +}{hline 35}
                  Total {c |}{res}      3,287      100.00
{txt}
{com}.  *** all obs in master are matched
.         drop            if _merge == 2
{txt}(3,201 observations deleted)

{com}.         drop            _merge
{txt}
{com}. * interrogating regional identifiers
.         sort            region
{txt}
{com}.         by region:      distinct district

{txt}{hline}
-> region = Arusha

{col 11}{c |}        Observations
{col 11}{c |}      total   distinct
{hline 10}{c +}{hline 22}
 district {c |}  {res}        3          2

{txt}{hline}
-> region = Kilimanjaro

{col 11}{c |}        Observations
{col 11}{c |}      total   distinct
{hline 10}{c +}{hline 22}
 district {c |}  {res}        3          2

{txt}{hline}
-> region = Morogoro

{col 11}{c |}        Observations
{col 11}{c |}      total   distinct
{hline 10}{c +}{hline 22}
 district {c |}  {res}        1          1

{txt}{hline}
-> region = Dar es salaam

{col 11}{c |}        Observations
{col 11}{c |}      total   distinct
{hline 10}{c +}{hline 22}
 district {c |}  {res}        2          1

{txt}{hline}
-> region = Lindi

{col 11}{c |}        Observations
{col 11}{c |}      total   distinct
{hline 10}{c +}{hline 22}
 district {c |}  {res}        2          1

{txt}{hline}
-> region = Iringa

{col 11}{c |}        Observations
{col 11}{c |}      total   distinct
{hline 10}{c +}{hline 22}
 district {c |}  {res}        1          1

{txt}{hline}
-> region = Mbeya

{col 11}{c |}        Observations
{col 11}{c |}      total   distinct
{hline 10}{c +}{hline 22}
 district {c |}  {res}        7          1

{txt}{hline}
-> region = Kigoma

{col 11}{c |}        Observations
{col 11}{c |}      total   distinct
{hline 10}{c +}{hline 22}
 district {c |}  {res}        8          3

{txt}{hline}
-> region = Shinyanga

{col 11}{c |}        Observations
{col 11}{c |}      total   distinct
{hline 10}{c +}{hline 22}
 district {c |}  {res}       33          7

{txt}{hline}
-> region = Kagera

{col 11}{c |}        Observations
{col 11}{c |}      total   distinct
{hline 10}{c +}{hline 22}
 district {c |}  {res}       13          5

{txt}{hline}
-> region = Mwanza

{col 11}{c |}        Observations
{col 11}{c |}      total   distinct
{hline 10}{c +}{hline 22}
 district {c |}  {res}        6          4

{txt}{hline}
-> region = Mara

{col 11}{c |}        Observations
{col 11}{c |}      total   distinct
{hline 10}{c +}{hline 22}
 district {c |}  {res}        2          2

{txt}{hline}
-> region = Manyara

{col 11}{c |}        Observations
{col 11}{c |}      total   distinct
{hline 10}{c +}{hline 22}
 district {c |}  {res}        1          1

{txt}{hline}
-> region = KASKAZINI UNGUJA

{col 11}{c |}        Observations
{col 11}{c |}      total   distinct
{hline 10}{c +}{hline 22}
 district {c |}  {res}        3          2

{txt}{hline}
-> region = MJINI/MAGHARIBI UNGUJA

{col 11}{c |}        Observations
{col 11}{c |}      total   distinct
{hline 10}{c +}{hline 22}
 district {c |}  {res}        1          1
{txt}
{com}.  *** 126 distinct districts
. * unique district id
.         tostring        region, generate(reg_num) 
{txt}reg_num generated as {res:str2}

{com}.         tostring        district, generate(dist_num)
{txt}dist_num generated as {res:str1}

{com}.         generate        uq_dist = reg_num + dist_num
{txt}
{com}.         distinct        uq_dist

{txt}{col 10}{c |}        Observations
{col 10}{c |}      total   distinct
{hline 9}{c +}{hline 22}
 uq_dist {c |}  {res}       86         34
{txt}
{com}.         sort            region district
{txt}
{com}.         destring        uq_dist, replace
{txt}uq_dist: all characters numeric; {res}replaced {txt}as {res}int
{txt}
{com}.  *** 126 once again, good deal
.         drop            reg_num dist_num
{txt}
{com}. 
{txt}end of do-file

{com}. do "C:\Users\THEMAC~1\AppData\Local\Temp\STD3114_000000.tmp"
{txt}
{com}. * must merge in regional identifiers from 2008_HHSECA to impute
.         merge           m:1 hhid using "$export/HH_SECA"
{res}{txt}(label REGION already defined)
(label LOCALITY already defined)

{col 5}Result{col 38}# of obs.
{col 5}{hline 41}
{col 5}not matched{col 30}{res}           3,201
{txt}{col 9}from master{col 30}{res}               0{txt}  (_merge==1)
{col 9}from using{col 30}{res}           3,201{txt}  (_merge==2)

{col 5}matched{col 30}{res}              86{txt}  (_merge==3)
{col 5}{hline 41}

{com}.         tab                     _merge

                 {txt}_merge {c |}      Freq.     Percent        Cum.
{hline 24}{c +}{hline 35}
         using only (2) {c |}{res}      3,201       97.38       97.38
{txt}            matched (3) {c |}{res}         86        2.62      100.00
{txt}{hline 24}{c +}{hline 35}
                  Total {c |}{res}      3,287      100.00
{txt}
{com}.  *** all obs in master are matched
.         drop            if _merge == 2
{txt}(3,201 observations deleted)

{com}. 
{txt}end of do-file

{com}. do "C:\Users\THEMAC~1\AppData\Local\Temp\STD3114_000000.tmp"
{txt}
{com}. 
. * load data
.         use             "$root/SEC_2B", clear
{txt}
{com}. 
. * generate unique ob id 
.         generate        plot_id = hhid + " " + plotnum
{txt}
{com}.         isid            plot_id
{txt}
{com}.         
. * rename variables of interest (plotsizes)
.         rename          s2bq9 plotsize_self_ac
{res}{txt}
{com}.         rename          area plotsize_gps_ac
{res}{txt}
{com}.         
. * convert from acres to hectares
.         generate        plotsize_self = plotsize_self_ac * 0.404686
{txt}
{com}.         label           var plotsize_self "Self-reported Area (Hectares)"
{txt}
{com}.         generate        plotsize_gps = plotsize_gps_ac * 0.404686
{txt}(74 missing values generated)

{com}.         label           var plotsize_gps "GPS Measured Area (Hectares)"
{txt}
{com}.         drop            plotsize_gps_ac plotsize_self_ac
{txt}
{com}. 
{txt}end of do-file

{com}. do "C:\Users\THEMAC~1\AppData\Local\Temp\STD3114_000000.tmp"
{txt}
{com}.         
. * must merge in regional identifiers from 2008_HHSECA to impute
.         merge           m:1 hhid using "$export/HH_SECA"
{res}
{txt}{col 5}Result{col 38}# of obs.
{col 5}{hline 41}
{col 5}not matched{col 30}{res}           3,201
{txt}{col 9}from master{col 30}{res}               0{txt}  (_merge==1)
{col 9}from using{col 30}{res}           3,201{txt}  (_merge==2)

{col 5}matched{col 30}{res}              86{txt}  (_merge==3)
{col 5}{hline 41}

{com}.         tab                     _merge

                 {txt}_merge {c |}      Freq.     Percent        Cum.
{hline 24}{c +}{hline 35}
         using only (2) {c |}{res}      3,201       97.38       97.38
{txt}            matched (3) {c |}{res}         86        2.62      100.00
{txt}{hline 24}{c +}{hline 35}
                  Total {c |}{res}      3,287      100.00
{txt}
{com}. 
{txt}end of do-file

{com}. do "C:\Users\THEMAC~1\AppData\Local\Temp\STD3114_000000.tmp"
{txt}
{com}.         tab                     _merge

                 {txt}_merge {c |}      Freq.     Percent        Cum.
{hline 24}{c +}{hline 35}
         using only (2) {c |}{res}      3,201       97.38       97.38
{txt}            matched (3) {c |}{res}         86        2.62      100.00
{txt}{hline 24}{c +}{hline 35}
                  Total {c |}{res}      3,287      100.00
{txt}
{com}.  *** all obs in master are matched
.         drop            if _merge == 2
{txt}(3,201 observations deleted)

{com}.         drop            _merge
{txt}
{com}. 
{txt}end of do-file

{com}. do "C:\Users\THEMAC~1\AppData\Local\Temp\STD3114_000000.tmp"
{txt}
{com}. * interrogating regional identifiers
.         sort            region
{txt}
{com}.         by region:      distinct district

{txt}{hline}
-> region = Arusha

{col 11}{c |}        Observations
{col 11}{c |}      total   distinct
{hline 10}{c +}{hline 22}
 district {c |}  {res}        3          2

{txt}{hline}
-> region = Kilimanjaro

{col 11}{c |}        Observations
{col 11}{c |}      total   distinct
{hline 10}{c +}{hline 22}
 district {c |}  {res}        3          2

{txt}{hline}
-> region = Morogoro

{col 11}{c |}        Observations
{col 11}{c |}      total   distinct
{hline 10}{c +}{hline 22}
 district {c |}  {res}        1          1

{txt}{hline}
-> region = Dar es salaam

{col 11}{c |}        Observations
{col 11}{c |}      total   distinct
{hline 10}{c +}{hline 22}
 district {c |}  {res}        2          1

{txt}{hline}
-> region = Lindi

{col 11}{c |}        Observations
{col 11}{c |}      total   distinct
{hline 10}{c +}{hline 22}
 district {c |}  {res}        2          1

{txt}{hline}
-> region = Iringa

{col 11}{c |}        Observations
{col 11}{c |}      total   distinct
{hline 10}{c +}{hline 22}
 district {c |}  {res}        1          1

{txt}{hline}
-> region = Mbeya

{col 11}{c |}        Observations
{col 11}{c |}      total   distinct
{hline 10}{c +}{hline 22}
 district {c |}  {res}        7          1

{txt}{hline}
-> region = Kigoma

{col 11}{c |}        Observations
{col 11}{c |}      total   distinct
{hline 10}{c +}{hline 22}
 district {c |}  {res}        8          3

{txt}{hline}
-> region = Shinyanga

{col 11}{c |}        Observations
{col 11}{c |}      total   distinct
{hline 10}{c +}{hline 22}
 district {c |}  {res}       33          7

{txt}{hline}
-> region = Kagera

{col 11}{c |}        Observations
{col 11}{c |}      total   distinct
{hline 10}{c +}{hline 22}
 district {c |}  {res}       13          5

{txt}{hline}
-> region = Mwanza

{col 11}{c |}        Observations
{col 11}{c |}      total   distinct
{hline 10}{c +}{hline 22}
 district {c |}  {res}        6          4

{txt}{hline}
-> region = Mara

{col 11}{c |}        Observations
{col 11}{c |}      total   distinct
{hline 10}{c +}{hline 22}
 district {c |}  {res}        2          2

{txt}{hline}
-> region = Manyara

{col 11}{c |}        Observations
{col 11}{c |}      total   distinct
{hline 10}{c +}{hline 22}
 district {c |}  {res}        1          1

{txt}{hline}
-> region = KASKAZINI UNGUJA

{col 11}{c |}        Observations
{col 11}{c |}      total   distinct
{hline 10}{c +}{hline 22}
 district {c |}  {res}        3          2

{txt}{hline}
-> region = MJINI/MAGHARIBI UNGUJA

{col 11}{c |}        Observations
{col 11}{c |}      total   distinct
{hline 10}{c +}{hline 22}
 district {c |}  {res}        1          1
{txt}
{com}. 
{txt}end of do-file

{com}. do "C:\Users\THEMAC~1\AppData\Local\Temp\STD3114_000000.tmp"
{txt}
{com}. * unique district id
.         tostring        region, generate(reg_num) 
{txt}reg_num generated as {res:str2}

{com}.         tostring        district, generate(dist_num)
{txt}dist_num generated as {res:str1}

{com}.         generate        uq_dist = reg_num + dist_num
{txt}
{com}.         distinct        uq_dist

{txt}{col 10}{c |}        Observations
{col 10}{c |}      total   distinct
{hline 9}{c +}{hline 22}
 uq_dist {c |}  {res}       86         34
{txt}
{com}. 
{txt}end of do-file

{com}. do "C:\Users\THEMAC~1\AppData\Local\Temp\STD3114_000000.tmp"
{txt}
{com}. * must merge in regional identifiers from 2008_HHSECA to impute
.         merge           m:1 hhid using "$export/HH_SECA"
{res}{txt}(label REGION already defined)
(label LOCALITY already defined)

{col 5}Result{col 38}# of obs.
{col 5}{hline 41}
{col 5}not matched{col 30}{res}           3,201
{txt}{col 9}from master{col 30}{res}               0{txt}  (_merge==1)
{col 9}from using{col 30}{res}           3,201{txt}  (_merge==2)

{col 5}matched{col 30}{res}              86{txt}  (_merge==3)
{col 5}{hline 41}

{com}.         tab                     _merge

                 {txt}_merge {c |}      Freq.     Percent        Cum.
{hline 24}{c +}{hline 35}
         using only (2) {c |}{res}      3,201       97.38       97.38
{txt}            matched (3) {c |}{res}         86        2.62      100.00
{txt}{hline 24}{c +}{hline 35}
                  Total {c |}{res}      3,287      100.00
{txt}
{com}.  *** all obs in master are matched
.         drop            if _merge == 2
{txt}(3,201 observations deleted)

{com}.         drop            _merge
{txt}
{com}. * interrogating regional identifiers
.         sort            region
{txt}
{com}.         by region:      distinct district

{txt}{hline}
-> region = Arusha

{col 11}{c |}        Observations
{col 11}{c |}      total   distinct
{hline 10}{c +}{hline 22}
 district {c |}  {res}        3          2

{txt}{hline}
-> region = Kilimanjaro

{col 11}{c |}        Observations
{col 11}{c |}      total   distinct
{hline 10}{c +}{hline 22}
 district {c |}  {res}        3          2

{txt}{hline}
-> region = Morogoro

{col 11}{c |}        Observations
{col 11}{c |}      total   distinct
{hline 10}{c +}{hline 22}
 district {c |}  {res}        1          1

{txt}{hline}
-> region = Dar es salaam

{col 11}{c |}        Observations
{col 11}{c |}      total   distinct
{hline 10}{c +}{hline 22}
 district {c |}  {res}        2          1

{txt}{hline}
-> region = Lindi

{col 11}{c |}        Observations
{col 11}{c |}      total   distinct
{hline 10}{c +}{hline 22}
 district {c |}  {res}        2          1

{txt}{hline}
-> region = Iringa

{col 11}{c |}        Observations
{col 11}{c |}      total   distinct
{hline 10}{c +}{hline 22}
 district {c |}  {res}        1          1

{txt}{hline}
-> region = Mbeya

{col 11}{c |}        Observations
{col 11}{c |}      total   distinct
{hline 10}{c +}{hline 22}
 district {c |}  {res}        7          1

{txt}{hline}
-> region = Kigoma

{col 11}{c |}        Observations
{col 11}{c |}      total   distinct
{hline 10}{c +}{hline 22}
 district {c |}  {res}        8          3

{txt}{hline}
-> region = Shinyanga

{col 11}{c |}        Observations
{col 11}{c |}      total   distinct
{hline 10}{c +}{hline 22}
 district {c |}  {res}       33          7

{txt}{hline}
-> region = Kagera

{col 11}{c |}        Observations
{col 11}{c |}      total   distinct
{hline 10}{c +}{hline 22}
 district {c |}  {res}       13          5

{txt}{hline}
-> region = Mwanza

{col 11}{c |}        Observations
{col 11}{c |}      total   distinct
{hline 10}{c +}{hline 22}
 district {c |}  {res}        6          4

{txt}{hline}
-> region = Mara

{col 11}{c |}        Observations
{col 11}{c |}      total   distinct
{hline 10}{c +}{hline 22}
 district {c |}  {res}        2          2

{txt}{hline}
-> region = Manyara

{col 11}{c |}        Observations
{col 11}{c |}      total   distinct
{hline 10}{c +}{hline 22}
 district {c |}  {res}        1          1

{txt}{hline}
-> region = KASKAZINI UNGUJA

{col 11}{c |}        Observations
{col 11}{c |}      total   distinct
{hline 10}{c +}{hline 22}
 district {c |}  {res}        3          2

{txt}{hline}
-> region = MJINI/MAGHARIBI UNGUJA

{col 11}{c |}        Observations
{col 11}{c |}      total   distinct
{hline 10}{c +}{hline 22}
 district {c |}  {res}        1          1
{txt}
{com}.  *** 126 distinct districts
. * unique district id
.         tostring        region, generate(reg_num) 
{err}generate(newvarlist) invalid
{txt}{search r(110), local:r(110);}

end of do-file

{search r(110), local:r(110);}

{com}. do "C:\Users\THEMAC~1\AppData\Local\Temp\STD3114_000000.tmp"
{txt}
{com}. **********************************************************************************
. 
. * load data
.         use             "$root/SEC_2B", clear
{txt}
{com}. 
. * generate unique ob id 
.         generate        plot_id = hhid + " " + plotnum
{txt}
{com}.         isid            plot_id
{txt}
{com}.         
. * rename variables of interest (plotsizes)
.         rename          s2bq9 plotsize_self_ac
{res}{txt}
{com}.         rename          area plotsize_gps_ac
{res}{txt}
{com}.         
. * convert from acres to hectares
.         generate        plotsize_self = plotsize_self_ac * 0.404686
{txt}
{com}.         label           var plotsize_self "Self-reported Area (Hectares)"
{txt}
{com}.         generate        plotsize_gps = plotsize_gps_ac * 0.404686
{txt}(74 missing values generated)

{com}.         label           var plotsize_gps "GPS Measured Area (Hectares)"
{txt}
{com}.         drop            plotsize_gps_ac plotsize_self_ac
{txt}
{com}.         
. * interrogating plotsize variables
.         count           if plotsize_gps != . & plotsize_self != .
  {res}12
{txt}
{com}.  *** only 856 not mising, out of 5,128
.         pwcorr          plotsize_gps plotsize_self

             {txt}{c |} plotsi~s plotsi~f
{hline 13}{c +}{hline 18}
plotsize_gps {c |} {res}  1.0000 
{txt}plotsize_s~f {c |} {res}  0.7817   1.0000 
{txt}
{com}.  *** high correlation (0.8027)
. * inverstingating the high and low end of gps measurments
.         * high end
.                 tab                     plotsize_gps

        {txt}GPS {c |}
   Measured {c |}
       Area {c |}
 (Hectares) {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
       .045 {c |}{res}          1        8.33        8.33
{txt}   .1079001 {c |}{res}          1        8.33       16.67
{txt}   .1452001 {c |}{res}          1        8.33       25.00
{txt}   .1478001 {c |}{res}          1        8.33       33.33
{txt}   .2024002 {c |}{res}          1        8.33       41.67
{txt}   .2934003 {c |}{res}          1        8.33       50.00
{txt}   .4436004 {c |}{res}          1        8.33       58.33
{txt}   .5515005 {c |}{res}          1        8.33       66.67
{txt}   .5700005 {c |}{res}          1        8.33       75.00
{txt}   .6467006 {c |}{res}          1        8.33       83.33
{txt}   .9085008 {c |}{res}          1        8.33       91.67
{txt}   1.673201 {c |}{res}          1        8.33      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}         12      100.00
{txt}
{com}.                 histogram       plotsize_gps if plotsize_gps > 2
{res}{txt}
{com}.                 sum                     plotsize_gps, detail

                {txt}GPS Measured Area (Hectares)
{hline 61}
      Percentiles      Smallest
 1%    {res}     .045           .045
{txt} 5%    {res}     .045       .1079001
{txt}10%    {res} .1079001       .1452001       {txt}Obs         {res}         12
{txt}25%    {res} .1465001       .1478001       {txt}Sum of Wgt. {res}         12

{txt}50%    {res} .3685003                      {txt}Mean          {res} .4779338
                        {txt}Largest       Std. Dev.     {res} .4584192
{txt}75%    {res} .6083505       .5700005
{txt}90%    {res} .9085008       .6467006       {txt}Variance      {res} .2101482
{txt}95%    {res} 1.673201       .9085008       {txt}Skewness      {res} 1.539129
{txt}99%    {res} 1.673201       1.673201       {txt}Kurtosis      {res}  4.85356
{txt}
{com}.          *** mean = 0.935
.          *** 90% of obs < 2.18
.                 sort            plotsize_gps
{txt}
{com}.                 sum             plotsize_gps if plotsize_gps>2

{txt}    Variable {c |}        Obs        Mean    Std. Dev.       Min        Max
{hline 13}{c +}{hline 57}
plotsize_gps {c |}{res}          0
{txt}
{com}.          *** 101 obs > 2
.                 list            plotsize_gps plotsize_self if plotsize_gps>2 & !missing(plotsize_gps), sep(0)
{txt}
{com}.                 pwcorr          plotsize_gps plotsize_self if plotsize_gps>2 & !missing(plotsize_gps)
{err}no observations
{txt}{search r(2000), local:r(2000);}

end of do-file

{search r(2000), local:r(2000);}

{com}. do "C:\Users\THEMAC~1\AppData\Local\Temp\STD3114_000000.tmp"
{txt}
{com}. * interrogating plotsize variables
.         count           if plotsize_gps != . & plotsize_self != .
  {res}12
{txt}
{com}. 
{txt}end of do-file

{com}. do "C:\Users\THEMAC~1\AppData\Local\Temp\STD3114_000000.tmp"
{txt}
{com}. * interrogating plotsize variables
.         sum             plotsize_gps

{txt}    Variable {c |}        Obs        Mean    Std. Dev.       Min        Max
{hline 13}{c +}{hline 57}
plotsize_gps {c |}{res}         12    .4779338    .4584192       .045   1.673201
{txt}
{com}.         count           if plotsize_gps != . & plotsize_self != .
  {res}12
{txt}
{com}. 
{txt}end of do-file

{com}. do "C:\Users\THEMAC~1\AppData\Local\Temp\STD3114_000000.tmp"
{txt}
{com}. * interrogating plotsize variables
.         sum             plotsize_gps

{txt}    Variable {c |}        Obs        Mean    Std. Dev.       Min        Max
{hline 13}{c +}{hline 57}
plotsize_gps {c |}{res}         12    .4779338    .4584192       .045   1.673201
{txt}
{com}.         count           if plotsize_gps != . & plotsize_self != .
  {res}12
{txt}
{com}.  *** 12 not mising, out of 86
.         pwcorr          plotsize_gps plotsize_self

             {txt}{c |} plotsi~s plotsi~f
{hline 13}{c +}{hline 18}
plotsize_gps {c |} {res}  1.0000 
{txt}plotsize_s~f {c |} {res}  0.7817   1.0000 
{txt}
{com}. 
{txt}end of do-file

{com}. do "C:\Users\THEMAC~1\AppData\Local\Temp\STD3114_000000.tmp"
{txt}
{com}.  *** high correlation (0.7817)
. * inverstingating the high and low end of gps measurments
.         * high end
.                 tab                     plotsize_gps

        {txt}GPS {c |}
   Measured {c |}
       Area {c |}
 (Hectares) {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
       .045 {c |}{res}          1        8.33        8.33
{txt}   .1079001 {c |}{res}          1        8.33       16.67
{txt}   .1452001 {c |}{res}          1        8.33       25.00
{txt}   .1478001 {c |}{res}          1        8.33       33.33
{txt}   .2024002 {c |}{res}          1        8.33       41.67
{txt}   .2934003 {c |}{res}          1        8.33       50.00
{txt}   .4436004 {c |}{res}          1        8.33       58.33
{txt}   .5515005 {c |}{res}          1        8.33       66.67
{txt}   .5700005 {c |}{res}          1        8.33       75.00
{txt}   .6467006 {c |}{res}          1        8.33       83.33
{txt}   .9085008 {c |}{res}          1        8.33       91.67
{txt}   1.673201 {c |}{res}          1        8.33      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}         12      100.00
{txt}
{com}. 
{txt}end of do-file

{com}. do "C:\Users\THEMAC~1\AppData\Local\Temp\STD3114_000000.tmp"
{txt}
{com}.         sum             plotsize_gps

{txt}    Variable {c |}        Obs        Mean    Std. Dev.       Min        Max
{hline 13}{c +}{hline 57}
plotsize_gps {c |}{res}         12    .4779338    .4584192       .045   1.673201
{txt}
{com}. 
{txt}end of do-file

{com}. do "C:\Users\THEMAC~1\AppData\Local\Temp\STD3114_000000.tmp"
{txt}
{com}.         sum             plotsize_gps, detail

                {txt}GPS Measured Area (Hectares)
{hline 61}
      Percentiles      Smallest
 1%    {res}     .045           .045
{txt} 5%    {res}     .045       .1079001
{txt}10%    {res} .1079001       .1452001       {txt}Obs         {res}         12
{txt}25%    {res} .1465001       .1478001       {txt}Sum of Wgt. {res}         12

{txt}50%    {res} .3685003                      {txt}Mean          {res} .4779338
                        {txt}Largest       Std. Dev.     {res} .4584192
{txt}75%    {res} .6083505       .5700005
{txt}90%    {res} .9085008       .6467006       {txt}Variance      {res} .2101482
{txt}95%    {res} 1.673201       .9085008       {txt}Skewness      {res} 1.539129
{txt}99%    {res} 1.673201       1.673201       {txt}Kurtosis      {res}  4.85356
{txt}
{com}. 
{txt}end of do-file

{com}. do "C:\Users\THEMAC~1\AppData\Local\Temp\STD3114_000000.tmp"
{txt}
{com}. * inverstingating the high and low end of gps measurments
.         * high end
.                 tab                     plotsize_gps

        {txt}GPS {c |}
   Measured {c |}
       Area {c |}
 (Hectares) {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
       .045 {c |}{res}          1        8.33        8.33
{txt}   .1079001 {c |}{res}          1        8.33       16.67
{txt}   .1452001 {c |}{res}          1        8.33       25.00
{txt}   .1478001 {c |}{res}          1        8.33       33.33
{txt}   .2024002 {c |}{res}          1        8.33       41.67
{txt}   .2934003 {c |}{res}          1        8.33       50.00
{txt}   .4436004 {c |}{res}          1        8.33       58.33
{txt}   .5515005 {c |}{res}          1        8.33       66.67
{txt}   .5700005 {c |}{res}          1        8.33       75.00
{txt}   .6467006 {c |}{res}          1        8.33       83.33
{txt}   .9085008 {c |}{res}          1        8.33       91.67
{txt}   1.673201 {c |}{res}          1        8.33      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}         12      100.00
{txt}
{com}.                 histogram       plotsize_gps if plotsize_gps > .9
{txt}(bin={res}1{txt}, start={res}.90850079{txt}, width={res}.76470065{txt})
{res}{txt}
{com}.                 sum                     plotsize_gps, detail

                {txt}GPS Measured Area (Hectares)
{hline 61}
      Percentiles      Smallest
 1%    {res}     .045           .045
{txt} 5%    {res}     .045       .1079001
{txt}10%    {res} .1079001       .1452001       {txt}Obs         {res}         12
{txt}25%    {res} .1465001       .1478001       {txt}Sum of Wgt. {res}         12

{txt}50%    {res} .3685003                      {txt}Mean          {res} .4779338
                        {txt}Largest       Std. Dev.     {res} .4584192
{txt}75%    {res} .6083505       .5700005
{txt}90%    {res} .9085008       .6467006       {txt}Variance      {res} .2101482
{txt}95%    {res} 1.673201       .9085008       {txt}Skewness      {res} 1.539129
{txt}99%    {res} 1.673201       1.673201       {txt}Kurtosis      {res}  4.85356
{txt}
{com}. 
{txt}end of do-file

{com}. do "C:\Users\THEMAC~1\AppData\Local\Temp\STD3114_000000.tmp"
{txt}
{com}.                 tab                     plotsize_gps

        {txt}GPS {c |}
   Measured {c |}
       Area {c |}
 (Hectares) {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
       .045 {c |}{res}          1        8.33        8.33
{txt}   .1079001 {c |}{res}          1        8.33       16.67
{txt}   .1452001 {c |}{res}          1        8.33       25.00
{txt}   .1478001 {c |}{res}          1        8.33       33.33
{txt}   .2024002 {c |}{res}          1        8.33       41.67
{txt}   .2934003 {c |}{res}          1        8.33       50.00
{txt}   .4436004 {c |}{res}          1        8.33       58.33
{txt}   .5515005 {c |}{res}          1        8.33       66.67
{txt}   .5700005 {c |}{res}          1        8.33       75.00
{txt}   .6467006 {c |}{res}          1        8.33       83.33
{txt}   .9085008 {c |}{res}          1        8.33       91.67
{txt}   1.673201 {c |}{res}          1        8.33      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}         12      100.00
{txt}
{com}.                 sum                     plotsize_gps, detail

                {txt}GPS Measured Area (Hectares)
{hline 61}
      Percentiles      Smallest
 1%    {res}     .045           .045
{txt} 5%    {res}     .045       .1079001
{txt}10%    {res} .1079001       .1452001       {txt}Obs         {res}         12
{txt}25%    {res} .1465001       .1478001       {txt}Sum of Wgt. {res}         12

{txt}50%    {res} .3685003                      {txt}Mean          {res} .4779338
                        {txt}Largest       Std. Dev.     {res} .4584192
{txt}75%    {res} .6083505       .5700005
{txt}90%    {res} .9085008       .6467006       {txt}Variance      {res} .2101482
{txt}95%    {res} 1.673201       .9085008       {txt}Skewness      {res} 1.539129
{txt}99%    {res} 1.673201       1.673201       {txt}Kurtosis      {res}  4.85356
{txt}
{com}.                 histogram       plotsize_gps if plotsize_gps > .9
{txt}(bin={res}1{txt}, start={res}.90850079{txt}, width={res}.76470065{txt})
{res}{txt}
{com}. 
{txt}end of do-file

{com}. do "C:\Users\THEMAC~1\AppData\Local\Temp\STD3114_000000.tmp"
{txt}
{com}.                 sort            plotsize_gps
{txt}
{com}.                 sum             plotsize_gps if plotsize_gps>0.9

{txt}    Variable {c |}        Obs        Mean    Std. Dev.       Min        Max
{hline 13}{c +}{hline 57}
plotsize_gps {c |}{res}          2    1.290851     .540725   .9085008   1.673201
{txt}
{com}. 
{txt}end of do-file

{com}. do "C:\Users\THEMAC~1\AppData\Local\Temp\STD3114_000000.tmp"
{txt}
{com}.                 list            plotsize_gps plotsize_self if plotsize_gps>0.9 & !missing(plotsize_gps), sep(0)
{txt}
     {c TLC}{hline 10}{c -}{hline 10}{c TRC}
     {c |} {res}plotsi~s   plotsi~f {txt}{c |}
     {c LT}{hline 10}{c -}{hline 10}{c RT}
 11. {c |} {res}.9085008   1.214058 {txt}{c |}
 12. {c |} {res}1.673201    .809372 {txt}{c |}
     {c BLC}{hline 10}{c -}{hline 10}{c BRC}

{com}.                 pwcorr          plotsize_gps plotsize_self if plotsize_gps>0.9 & !missing(plotsize_gps)

             {txt}{c |} plotsi~s plotsi~f
{hline 13}{c +}{hline 18}
plotsize_gps {c |} {res}  1.0000 
{txt}plotsize_s~f {c |} {res} -1.0000   1.0000 
{txt}
{com}. 
{txt}end of do-file

{com}. do "C:\Users\THEMAC~1\AppData\Local\Temp\STD3114_000000.tmp"
{txt}
{com}.         * low end
.                 tab                     plotsize_gps

        {txt}GPS {c |}
   Measured {c |}
       Area {c |}
 (Hectares) {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
       .045 {c |}{res}          1        8.33        8.33
{txt}   .1079001 {c |}{res}          1        8.33       16.67
{txt}   .1452001 {c |}{res}          1        8.33       25.00
{txt}   .1478001 {c |}{res}          1        8.33       33.33
{txt}   .2024002 {c |}{res}          1        8.33       41.67
{txt}   .2934003 {c |}{res}          1        8.33       50.00
{txt}   .4436004 {c |}{res}          1        8.33       58.33
{txt}   .5515005 {c |}{res}          1        8.33       66.67
{txt}   .5700005 {c |}{res}          1        8.33       75.00
{txt}   .6467006 {c |}{res}          1        8.33       83.33
{txt}   .9085008 {c |}{res}          1        8.33       91.67
{txt}   1.673201 {c |}{res}          1        8.33      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}         12      100.00
{txt}
{com}. 
{txt}end of do-file

{com}. do "C:\Users\THEMAC~1\AppData\Local\Temp\STD3114_000000.tmp"
{txt}
{com}.                 sum                     plotsize_gps, detail

                {txt}GPS Measured Area (Hectares)
{hline 61}
      Percentiles      Smallest
 1%    {res}     .045           .045
{txt} 5%    {res}     .045       .1079001
{txt}10%    {res} .1079001       .1452001       {txt}Obs         {res}         12
{txt}25%    {res} .1465001       .1478001       {txt}Sum of Wgt. {res}         12

{txt}50%    {res} .3685003                      {txt}Mean          {res} .4779338
                        {txt}Largest       Std. Dev.     {res} .4584192
{txt}75%    {res} .6083505       .5700005
{txt}90%    {res} .9085008       .6467006       {txt}Variance      {res} .2101482
{txt}95%    {res} 1.673201       .9085008       {txt}Skewness      {res} 1.539129
{txt}99%    {res} 1.673201       1.673201       {txt}Kurtosis      {res}  4.85356
{txt}
{com}.          *** mean = 0.935
. 
{txt}end of do-file

{com}. do "C:\Users\THEMAC~1\AppData\Local\Temp\STD3114_000000.tmp"
{txt}
{com}.                 sum             plotsize_gps if plotsize_gps<0.11

{txt}    Variable {c |}        Obs        Mean    Std. Dev.       Min        Max
{hline 13}{c +}{hline 57}
plotsize_gps {c |}{res}          2    .0764501    .0444771       .045   .1079001
{txt}
{com}. 
{txt}end of do-file

{com}. do "C:\Users\THEMAC~1\AppData\Local\Temp\STD3114_000000.tmp"
{txt}
{com}.                 list            plotsize_gps plotsize_self if plotsize_gps<0.11 & !missing(plotsize_gps), sep(0)
{txt}
     {c TLC}{hline 10}{c -}{hline 10}{c TRC}
     {c |} {res}plotsi~s   plotsi~f {txt}{c |}
     {c LT}{hline 10}{c -}{hline 10}{c RT}
  1. {c |} {res}    .045   .1011715 {txt}{c |}
  2. {c |} {res}.1079001    .202343 {txt}{c |}
     {c BLC}{hline 10}{c -}{hline 10}{c BRC}

{com}.                 pwcorr          plotsize_gps plotsize_self if plotsize_gps<0.11 & !missing(plotsize_gps)

             {txt}{c |} plotsi~s plotsi~f
{hline 13}{c +}{hline 18}
plotsize_gps {c |} {res}  1.0000 
{txt}plotsize_s~f {c |} {res}  1.0000   1.0000 
{txt}
{com}. 
{txt}end of do-file

{com}. do "C:\Users\THEMAC~1\AppData\Local\Temp\STD3114_000000.tmp"
{txt}
{com}.                 list            plotsize_gps plotsize_self if plotsize_gps<0.15 & !missing(plotsize_gps), sep(0)
{txt}
     {c TLC}{hline 10}{c -}{hline 10}{c TRC}
     {c |} {res}plotsi~s   plotsi~f {txt}{c |}
     {c LT}{hline 10}{c -}{hline 10}{c RT}
  1. {c |} {res}    .045   .1011715 {txt}{c |}
  2. {c |} {res}.1079001    .202343 {txt}{c |}
  3. {c |} {res}.1452001    .202343 {txt}{c |}
  4. {c |} {res}.1478001   .1011715 {txt}{c |}
     {c BLC}{hline 10}{c -}{hline 10}{c BRC}

{com}.                 pwcorr          plotsize_gps plotsize_self if plotsize_gps<0.15 & !missing(plotsize_gps)

             {txt}{c |} plotsi~s plotsi~f
{hline 13}{c +}{hline 18}
plotsize_gps {c |} {res}  1.0000 
{txt}plotsize_s~f {c |} {res}  0.3633   1.0000 
{txt}
{com}.          *** corr = -0.5301 (even higher inverse correlation)
. 
{txt}end of do-file

{com}. do "C:\Users\THEMAC~1\AppData\Local\Temp\STD3114_000000.tmp"
{txt}
{com}.                 tab                     plotsize_gps

        {txt}GPS {c |}
   Measured {c |}
       Area {c |}
 (Hectares) {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
       .045 {c |}{res}          1        8.33        8.33
{txt}   .1079001 {c |}{res}          1        8.33       16.67
{txt}   .1452001 {c |}{res}          1        8.33       25.00
{txt}   .1478001 {c |}{res}          1        8.33       33.33
{txt}   .2024002 {c |}{res}          1        8.33       41.67
{txt}   .2934003 {c |}{res}          1        8.33       50.00
{txt}   .4436004 {c |}{res}          1        8.33       58.33
{txt}   .5515005 {c |}{res}          1        8.33       66.67
{txt}   .5700005 {c |}{res}          1        8.33       75.00
{txt}   .6467006 {c |}{res}          1        8.33       83.33
{txt}   .9085008 {c |}{res}          1        8.33       91.67
{txt}   1.673201 {c |}{res}          1        8.33      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}         12      100.00
{txt}
{com}. 
{txt}end of do-file

{com}. do "C:\Users\THEMAC~1\AppData\Local\Temp\STD3114_000000.tmp"
{txt}
{com}.                 sum                     plotsize_gps, detail

                {txt}GPS Measured Area (Hectares)
{hline 61}
      Percentiles      Smallest
 1%    {res}     .045           .045
{txt} 5%    {res}     .045       .1079001
{txt}10%    {res} .1079001       .1452001       {txt}Obs         {res}         12
{txt}25%    {res} .1465001       .1478001       {txt}Sum of Wgt. {res}         12

{txt}50%    {res} .3685003                      {txt}Mean          {res} .4779338
                        {txt}Largest       Std. Dev.     {res} .4584192
{txt}75%    {res} .6083505       .5700005
{txt}90%    {res} .9085008       .6467006       {txt}Variance      {res} .2101482
{txt}95%    {res} 1.673201       .9085008       {txt}Skewness      {res} 1.539129
{txt}99%    {res} 1.673201       1.673201       {txt}Kurtosis      {res}  4.85356
{txt}
{com}. 
{txt}end of do-file

{com}. do "C:\Users\THEMAC~1\AppData\Local\Temp\STD3114_000000.tmp"
{txt}
{com}.                 sum             plotsize_gps if plotsize_gps>0.6

{txt}    Variable {c |}        Obs        Mean    Std. Dev.       Min        Max
{hline 13}{c +}{hline 57}
plotsize_gps {c |}{res}          3    1.076134    .5333871   .6467006   1.673201
{txt}
{com}.          *** 3 < 0.15
.                 list            plotsize_gps plotsize_self if plotsize_gps>0.6 & !missing(plotsize_gps), sep(0)
{txt}
     {c TLC}{hline 10}{c -}{hline 10}{c TRC}
     {c |} {res}plotsi~s   plotsi~f {txt}{c |}
     {c LT}{hline 10}{c -}{hline 10}{c RT}
 10. {c |} {res}.6467006    .809372 {txt}{c |}
 11. {c |} {res}.9085008   1.214058 {txt}{c |}
 12. {c |} {res}1.673201    .809372 {txt}{c |}
     {c BLC}{hline 10}{c -}{hline 10}{c BRC}

{com}.                 pwcorr          plotsize_gps plotsize_self if plotsize_gps>0.6 & !missing(plotsize_gps)

             {txt}{c |} plotsi~s plotsi~f
{hline 13}{c +}{hline 18}
plotsize_gps {c |} {res}  1.0000 
{txt}plotsize_s~f {c |} {res} -0.2722   1.0000 
{txt}
{com}. 
{txt}end of do-file

{com}. do "C:\Users\THEMAC~1\AppData\Local\Temp\STD3114_000000.tmp"
{txt}
{com}.                 replace         plotsize_gps = . if plotsize_gps == 0
{txt}(0 real changes made)

{com}. 
{txt}end of do-file

{com}. do "C:\Users\THEMAC~1\AppData\Local\Temp\STD3114_000000.tmp"
{txt}
{com}. * load data
.         use             "$root/SEC_2B", clear
{txt}
{com}. 
. * generate unique ob id 
.         generate        plot_id = hhid + " " + plotnum
{txt}
{com}.         isid            plot_id
{txt}
{com}.         
. * rename variables of interest (plotsizes)
.         rename          s2bq9 plotsize_self_ac
{res}{txt}
{com}.         rename          area plotsize_gps_ac
{res}{txt}
{com}.         
. * convert from acres to hectares
.         generate        plotsize_self = plotsize_self_ac * 0.404686
{txt}
{com}.         label           var plotsize_self "Self-reported Area (Hectares)"
{txt}
{com}.         generate        plotsize_gps = plotsize_gps_ac * 0.404686
{txt}(74 missing values generated)

{com}.         label           var plotsize_gps "GPS Measured Area (Hectares)"
{txt}
{com}.         drop            plotsize_gps_ac plotsize_self_ac
{txt}
{com}.         
. * interrogating plotsize variables
.         count           if plotsize_gps != . & plotsize_self != .
  {res}12
{txt}
{com}.  *** 12 not mising, out of 86
.         pwcorr          plotsize_gps plotsize_self

             {txt}{c |} plotsi~s plotsi~f
{hline 13}{c +}{hline 18}
plotsize_gps {c |} {res}  1.0000 
{txt}plotsize_s~f {c |} {res}  0.7817   1.0000 
{txt}
{com}.  *** high correlation (0.7817)
. * inverstingating the high and low end of gps measurments
.         * high end
.                 tab                     plotsize_gps

        {txt}GPS {c |}
   Measured {c |}
       Area {c |}
 (Hectares) {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
       .045 {c |}{res}          1        8.33        8.33
{txt}   .1079001 {c |}{res}          1        8.33       16.67
{txt}   .1452001 {c |}{res}          1        8.33       25.00
{txt}   .1478001 {c |}{res}          1        8.33       33.33
{txt}   .2024002 {c |}{res}          1        8.33       41.67
{txt}   .2934003 {c |}{res}          1        8.33       50.00
{txt}   .4436004 {c |}{res}          1        8.33       58.33
{txt}   .5515005 {c |}{res}          1        8.33       66.67
{txt}   .5700005 {c |}{res}          1        8.33       75.00
{txt}   .6467006 {c |}{res}          1        8.33       83.33
{txt}   .9085008 {c |}{res}          1        8.33       91.67
{txt}   1.673201 {c |}{res}          1        8.33      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}         12      100.00
{txt}
{com}.                 sum                     plotsize_gps, detail

                {txt}GPS Measured Area (Hectares)
{hline 61}
      Percentiles      Smallest
 1%    {res}     .045           .045
{txt} 5%    {res}     .045       .1079001
{txt}10%    {res} .1079001       .1452001       {txt}Obs         {res}         12
{txt}25%    {res} .1465001       .1478001       {txt}Sum of Wgt. {res}         12

{txt}50%    {res} .3685003                      {txt}Mean          {res} .4779338
                        {txt}Largest       Std. Dev.     {res} .4584192
{txt}75%    {res} .6083505       .5700005
{txt}90%    {res} .9085008       .6467006       {txt}Variance      {res} .2101482
{txt}95%    {res} 1.673201       .9085008       {txt}Skewness      {res} 1.539129
{txt}99%    {res} 1.673201       1.673201       {txt}Kurtosis      {res}  4.85356
{txt}
{com}.                 histogram       plotsize_gps if plotsize_gps > .9
{txt}(bin={res}1{txt}, start={res}.90850079{txt}, width={res}.76470065{txt})
{res}{txt}
{com}.          *** mean = 0.478
.          *** 90% of obs < .9
.                 sort            plotsize_gps
{txt}
{com}.                 sum             plotsize_gps if plotsize_gps>0.9

{txt}    Variable {c |}        Obs        Mean    Std. Dev.       Min        Max
{hline 13}{c +}{hline 57}
plotsize_gps {c |}{res}          2    1.290851     .540725   .9085008   1.673201
{txt}
{com}.          *** 2 obs > 0.9
.                 list            plotsize_gps plotsize_self if plotsize_gps>0.9 & !missing(plotsize_gps), sep(0)
{txt}
     {c TLC}{hline 10}{c -}{hline 10}{c TRC}
     {c |} {res}plotsi~s   plotsi~f {txt}{c |}
     {c LT}{hline 10}{c -}{hline 10}{c RT}
 11. {c |} {res}.9085008   1.214058 {txt}{c |}
 12. {c |} {res}1.673201    .809372 {txt}{c |}
     {c BLC}{hline 10}{c -}{hline 10}{c BRC}

{com}.                 pwcorr          plotsize_gps plotsize_self if plotsize_gps>0.9 & !missing(plotsize_gps)

             {txt}{c |} plotsi~s plotsi~f
{hline 13}{c +}{hline 18}
plotsize_gps {c |} {res}  1.0000 
{txt}plotsize_s~f {c |} {res} -1.0000   1.0000 
{txt}
{com}.          *** corr = -1.0000 (kind of weird, is this because there are only 2 obs?)
.                 sum             plotsize_gps if plotsize_gps>0.6

{txt}    Variable {c |}        Obs        Mean    Std. Dev.       Min        Max
{hline 13}{c +}{hline 57}
plotsize_gps {c |}{res}          3    1.076134    .5333871   .6467006   1.673201
{txt}
{com}.          *** 3 obs > 0.6
.                 list            plotsize_gps plotsize_self if plotsize_gps>0.6 & !missing(plotsize_gps), sep(0)
{txt}
     {c TLC}{hline 10}{c -}{hline 10}{c TRC}
     {c |} {res}plotsi~s   plotsi~f {txt}{c |}
     {c LT}{hline 10}{c -}{hline 10}{c RT}
 10. {c |} {res}.6467006    .809372 {txt}{c |}
 11. {c |} {res}.9085008   1.214058 {txt}{c |}
 12. {c |} {res}1.673201    .809372 {txt}{c |}
     {c BLC}{hline 10}{c -}{hline 10}{c BRC}

{com}.                 pwcorr          plotsize_gps plotsize_self if plotsize_gps>0.6 & !missing(plotsize_gps)

             {txt}{c |} plotsi~s plotsi~f
{hline 13}{c +}{hline 18}
plotsize_gps {c |} {res}  1.0000 
{txt}plotsize_s~f {c |} {res} -0.2722   1.0000 
{txt}
{com}.          *** corr = -0.2722 (a real value!)
.          *** not going to drop anything here
.         ///////////////////////////////////////////////////////////////////////////
>         * low end
.                 tab                     plotsize_gps

        {txt}GPS {c |}
   Measured {c |}
       Area {c |}
 (Hectares) {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
       .045 {c |}{res}          1        8.33        8.33
{txt}   .1079001 {c |}{res}          1        8.33       16.67
{txt}   .1452001 {c |}{res}          1        8.33       25.00
{txt}   .1478001 {c |}{res}          1        8.33       33.33
{txt}   .2024002 {c |}{res}          1        8.33       41.67
{txt}   .2934003 {c |}{res}          1        8.33       50.00
{txt}   .4436004 {c |}{res}          1        8.33       58.33
{txt}   .5515005 {c |}{res}          1        8.33       66.67
{txt}   .5700005 {c |}{res}          1        8.33       75.00
{txt}   .6467006 {c |}{res}          1        8.33       83.33
{txt}   .9085008 {c |}{res}          1        8.33       91.67
{txt}   1.673201 {c |}{res}          1        8.33      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}         12      100.00
{txt}
{com}.                 sum                     plotsize_gps, detail

                {txt}GPS Measured Area (Hectares)
{hline 61}
      Percentiles      Smallest
 1%    {res}     .045           .045
{txt} 5%    {res}     .045       .1079001
{txt}10%    {res} .1079001       .1452001       {txt}Obs         {res}         12
{txt}25%    {res} .1465001       .1478001       {txt}Sum of Wgt. {res}         12

{txt}50%    {res} .3685003                      {txt}Mean          {res} .4779338
                        {txt}Largest       Std. Dev.     {res} .4584192
{txt}75%    {res} .6083505       .5700005
{txt}90%    {res} .9085008       .6467006       {txt}Variance      {res} .2101482
{txt}95%    {res} 1.673201       .9085008       {txt}Skewness      {res} 1.539129
{txt}99%    {res} 1.673201       1.673201       {txt}Kurtosis      {res}  4.85356
{txt}
{com}.                 histogram       plotsize_gps if plotsize_gps < 0.11
{txt}(bin={res}1{txt}, start={res}.04500004{txt}, width={res}.06290006{txt})
{res}{txt}
{com}.          *** mean = 0.478
.          *** 10% of obs < 0.11
.                 sum             plotsize_gps if plotsize_gps<0.11

{txt}    Variable {c |}        Obs        Mean    Std. Dev.       Min        Max
{hline 13}{c +}{hline 57}
plotsize_gps {c |}{res}          2    .0764501    .0444771       .045   .1079001
{txt}
{com}.          *** 2 obs < 0.11
.                 list            plotsize_gps plotsize_self if plotsize_gps<0.11 & !missing(plotsize_gps), sep(0)
{txt}
     {c TLC}{hline 10}{c -}{hline 10}{c TRC}
     {c |} {res}plotsi~s   plotsi~f {txt}{c |}
     {c LT}{hline 10}{c -}{hline 10}{c RT}
  1. {c |} {res}    .045   .1011715 {txt}{c |}
  2. {c |} {res}.1079001    .202343 {txt}{c |}
     {c BLC}{hline 10}{c -}{hline 10}{c BRC}

{com}.                 pwcorr          plotsize_gps plotsize_self if plotsize_gps<0.11 & !missing(plotsize_gps)

             {txt}{c |} plotsi~s plotsi~f
{hline 13}{c +}{hline 18}
plotsize_gps {c |} {res}  1.0000 
{txt}plotsize_s~f {c |} {res}  1.0000   1.0000 
{txt}
{com}.          *** corr = 1.000(again, 2 obs)
.                 sum             plotsize_gps if plotsize_gps<0.15

{txt}    Variable {c |}        Obs        Mean    Std. Dev.       Min        Max
{hline 13}{c +}{hline 57}
plotsize_gps {c |}{res}          4    .1114751    .0479187       .045   .1478001
{txt}
{com}.          *** 3 < 0.15
.                 list            plotsize_gps plotsize_self if plotsize_gps<0.15 & !missing(plotsize_gps), sep(0)
{txt}
     {c TLC}{hline 10}{c -}{hline 10}{c TRC}
     {c |} {res}plotsi~s   plotsi~f {txt}{c |}
     {c LT}{hline 10}{c -}{hline 10}{c RT}
  1. {c |} {res}    .045   .1011715 {txt}{c |}
  2. {c |} {res}.1079001    .202343 {txt}{c |}
  3. {c |} {res}.1452001    .202343 {txt}{c |}
  4. {c |} {res}.1478001   .1011715 {txt}{c |}
     {c BLC}{hline 10}{c -}{hline 10}{c BRC}

{com}.                 pwcorr          plotsize_gps plotsize_self if plotsize_gps<0.15 & !missing(plotsize_gps)

             {txt}{c |} plotsi~s plotsi~f
{hline 13}{c +}{hline 18}
plotsize_gps {c |} {res}  1.0000 
{txt}plotsize_s~f {c |} {res}  0.3633   1.0000 
{txt}
{com}.          *** corr = 0.3633 (a real value!)
.          *** again, won't be dropping anything
.          * for robustness, although no zero values in this set
.                 replace         plotsize_gps = . if plotsize_gps == 0
{txt}(0 real changes made)

{com}.         
. * must merge in regional identifiers from 2008_HHSECA to impute
.         merge           m:1 hhid using "$export/HH_SECA"
{res}
{txt}{col 5}Result{col 38}# of obs.
{col 5}{hline 41}
{col 5}not matched{col 30}{res}           3,201
{txt}{col 9}from master{col 30}{res}               0{txt}  (_merge==1)
{col 9}from using{col 30}{res}           3,201{txt}  (_merge==2)

{col 5}matched{col 30}{res}              86{txt}  (_merge==3)
{col 5}{hline 41}

{com}.         tab                     _merge

                 {txt}_merge {c |}      Freq.     Percent        Cum.
{hline 24}{c +}{hline 35}
         using only (2) {c |}{res}      3,201       97.38       97.38
{txt}            matched (3) {c |}{res}         86        2.62      100.00
{txt}{hline 24}{c +}{hline 35}
                  Total {c |}{res}      3,287      100.00
{txt}
{com}.  *** all obs in master are matched
.         drop            if _merge == 2
{txt}(3,201 observations deleted)

{com}.         drop            _merge
{txt}
{com}. * interrogating regional identifiers
.         sort            region
{txt}
{com}.         by region:      distinct district

{txt}{hline}
-> region = Arusha

{col 11}{c |}        Observations
{col 11}{c |}      total   distinct
{hline 10}{c +}{hline 22}
 district {c |}  {res}        3          2

{txt}{hline}
-> region = Kilimanjaro

{col 11}{c |}        Observations
{col 11}{c |}      total   distinct
{hline 10}{c +}{hline 22}
 district {c |}  {res}        3          2

{txt}{hline}
-> region = Morogoro

{col 11}{c |}        Observations
{col 11}{c |}      total   distinct
{hline 10}{c +}{hline 22}
 district {c |}  {res}        1          1

{txt}{hline}
-> region = Dar es salaam

{col 11}{c |}        Observations
{col 11}{c |}      total   distinct
{hline 10}{c +}{hline 22}
 district {c |}  {res}        2          1

{txt}{hline}
-> region = Lindi

{col 11}{c |}        Observations
{col 11}{c |}      total   distinct
{hline 10}{c +}{hline 22}
 district {c |}  {res}        2          1

{txt}{hline}
-> region = Iringa

{col 11}{c |}        Observations
{col 11}{c |}      total   distinct
{hline 10}{c +}{hline 22}
 district {c |}  {res}        1          1

{txt}{hline}
-> region = Mbeya

{col 11}{c |}        Observations
{col 11}{c |}      total   distinct
{hline 10}{c +}{hline 22}
 district {c |}  {res}        7          1

{txt}{hline}
-> region = Kigoma

{col 11}{c |}        Observations
{col 11}{c |}      total   distinct
{hline 10}{c +}{hline 22}
 district {c |}  {res}        8          3

{txt}{hline}
-> region = Shinyanga

{col 11}{c |}        Observations
{col 11}{c |}      total   distinct
{hline 10}{c +}{hline 22}
 district {c |}  {res}       33          7

{txt}{hline}
-> region = Kagera

{col 11}{c |}        Observations
{col 11}{c |}      total   distinct
{hline 10}{c +}{hline 22}
 district {c |}  {res}       13          5

{txt}{hline}
-> region = Mwanza

{col 11}{c |}        Observations
{col 11}{c |}      total   distinct
{hline 10}{c +}{hline 22}
 district {c |}  {res}        6          4

{txt}{hline}
-> region = Mara

{col 11}{c |}        Observations
{col 11}{c |}      total   distinct
{hline 10}{c +}{hline 22}
 district {c |}  {res}        2          2

{txt}{hline}
-> region = Manyara

{col 11}{c |}        Observations
{col 11}{c |}      total   distinct
{hline 10}{c +}{hline 22}
 district {c |}  {res}        1          1

{txt}{hline}
-> region = KASKAZINI UNGUJA

{col 11}{c |}        Observations
{col 11}{c |}      total   distinct
{hline 10}{c +}{hline 22}
 district {c |}  {res}        3          2

{txt}{hline}
-> region = MJINI/MAGHARIBI UNGUJA

{col 11}{c |}        Observations
{col 11}{c |}      total   distinct
{hline 10}{c +}{hline 22}
 district {c |}  {res}        1          1
{txt}
{com}.  *** 126 distinct districts
. * unique district id
.         tostring        region, generate(reg_num) 
{txt}reg_num generated as {res:str2}

{com}.         tostring        district, generate(dist_num)
{txt}dist_num generated as {res:str1}

{com}.         generate        uq_dist = reg_num + dist_num
{txt}
{com}.         distinct        uq_dist

{txt}{col 10}{c |}        Observations
{col 10}{c |}      total   distinct
{hline 9}{c +}{hline 22}
 uq_dist {c |}  {res}       86         34
{txt}
{com}.         sort            region district
{txt}
{com}.         destring        uq_dist, replace
{txt}uq_dist: all characters numeric; {res}replaced {txt}as {res}int
{txt}
{com}.  *** 126 once again, good deal
.         drop            reg_num dist_num
{txt}
{com}. 
{txt}end of do-file

{com}. do "C:\Users\themacfreezie\git\weather_project\tanzania\household_code\wave_1\2008_AGSEC2B.do"
{txt}
{com}. * Project: WB Weather
. * Created on: May 2020
. * Created by: McG
. * Stata v.15
. 
. * does
.         * cleans Tanzania household variables, wave 1 Ag sec2b
.         * looks like a parcel roster, 2008 short rainy season
. 
. * assumes
.         * customsave.ado
. 
. * TO DO:
.         * completed
. 
.         
. * **********************************************************************
. * 0 - setup
. * **********************************************************************
. 
. * set user
.         global user "themacfreezie"
{txt}
{com}. 
. * define paths
.         global root = "G:/My Drive/weather_project/household_data/tanzania/wave_1/raw"
{txt}
{com}.         global export = "G:/My Drive/weather_project/household_data/tanzania/wave_1/refined"
{txt}
{com}.         global logout = "C:/Users/$user/git/weather_project/tanzania/household_code/logs"
{txt}
{com}. 
. *Open log
.         log using "$logout/wv1_AGSEC2B", append
{err}log file already open
{txt}{search r(604), local:r(604);}

end of do-file

{search r(604), local:r(604);}

{com}. do "C:\Users\THEMAC~1\AppData\Local\Temp\STD3114_000000.tmp"
{txt}
{com}. * including plotsize_self as control
.         mi set          wide    // declare the data to be wide.
{txt}
{com}.         mi xtset, clear         // this is a precautinary step to clear any xtset that the analyst may have had in place previously
{res}{txt}
{com}.         mi register     imputed plotsize_gps // identify plotsize_GPS as the variable being imputed
{res}{txt}
{com}.         mi impute       pmm plotsize_gps plotsize_self i.uq_dist, add(1) rseed(245780) noisily dots force knn(5) bootstrap
{res}
{txt}Imputing {it:m}=1:
{col 3}{res}
{txt}Running {bf:regress} on bootstrap sample:

{p 0 6 2}note: 194.uq_dist omitted because of collinearity{p_end}

      Source {c |}       SS           df       MS      Number of obs   ={res}        12
{txt}{hline 13}{c +}{hline 34}   F(5, 6)         = {res}   542.05
{txt}       Model {c |} {res} 1.00995454         5  .201990908   {txt}Prob > F        ={res}    0.0000
{txt}    Residual {c |} {res} .002235874         6  .000372646   {txt}R-squared       ={res}    0.9978
{txt}{hline 13}{c +}{hline 34}   Adj R-squared   ={res}    0.9960
{txt}       Total {c |} {res} 1.01219042        11  .092017311   {txt}Root MSE        =   {res}  .0193

{txt}{hline 14}{c TT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{col 1} plotsize_gps{col 15}{c |}      Coef.{col 27}   Std. Err.{col 39}      t{col 47}   P>|t|{col 55}     [95% Con{col 68}f. Interval]
{hline 14}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
plotsize_self {c |}{col 15}{res}{space 2}-.7991388{col 27}{space 2} .1457297{col 38}{space 1}   -5.48{col 47}{space 3}0.002{col 55}{space 4}-1.155727{col 68}{space 3}-.4425509
{txt}{space 13} {c |}
{space 6}uq_dist {c |}
{space 9}128  {c |}{col 15}{res}{space 2}-.1437501{col 27}{space 2} .0215826{col 38}{space 1}   -6.66{col 47}{space 3}0.001{col 55}{space 4}-.1965608{col 68}{space 3}-.0909395
{txt}{space 9}178  {c |}{col 15}{res}{space 2} 1.609101{col 27}{space 2} .1566286{col 38}{space 1}   10.27{col 47}{space 3}0.000{col 55}{space 4} 1.225845{col 68}{space 3} 1.992358
{txt}{space 9}181  {c |}{col 15}{res}{space 2}    .0373{col 27}{space 2} .0222904{col 38}{space 1}    1.67{col 47}{space 3}0.145{col 55}{space 4}-.0172425{col 68}{space 3} .0918426
{txt}{space 9}184  {c |}{col 15}{res}{space 2} .4974004{col 27}{space 2} .0431651{col 38}{space 1}   11.52{col 47}{space 3}0.000{col 55}{space 4} .3917792{col 68}{space 3} .6030217
{txt}{space 9}194  {c |}{col 15}{res}{space 2}        0{col 27}{txt}  (omitted)
{space 13} {c |}
{space 8}_cons {c |}{col 15}{res}{space 2} .2696002{col 27}{space 2} .0222904{col 38}{space 1}   12.09{col 47}{space 3}0.000{col 55}{space 4} .2150577{col 68}{space 3} .3241428
{txt}{hline 14}{c BT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{res}{txt}. done
{res}{txt}
Univariate imputation{txt}{col 45}{ralign 12:Imputations }= {res}       1
{txt}Predictive mean matching{txt}{col 45}{ralign 12:added }= {res}       1
{txt}Imputed: {it:m}=1{txt}{col 45}{ralign 12:updated }= {res}       0

{txt}{col 39}{ralign 12:Nearest neighbors }= {res}       5

{txt}{hline 19}{c TT}{hline 35}{hline 11}
{txt}{col 20}{c |}{center 46:  Observations per {it:m}}
{txt}{col 20}{c LT}{hline 35}{c TT}{hline 10}
{txt}{col 11}Variable {c |}{ralign 12:Complete }{ralign 13:Incomplete }{ralign 10:Imputed }{c |}{ralign 10:Total}
{hline 19}{c +}{hline 35}{c +}{hline 10}
{txt}{ralign 19:plotsize_gps }{c |}{res}         12           74        74 {txt}{c |}{res}        86
{txt}{hline 19}{c BT}{hline 35}{c BT}{hline 10}
{p 0 1 1 66}(complete + incomplete = total; imputed is the minimum across {it:m}
 of the number of filled-in observations.){p_end}

{txt}Note: Posterior parameters obtained using {help mi_boot_note:sampling with replacement}.
{res}{txt}
{com}.         mi                      unset

{txt}{col 13}variables
{col 5}original{col 23}new{col 42}meaning
    {hline 71}
{col 5}_mi_miss{col 23}mi_miss{col 42}0=orig-complete, 1=orig-incomplete
{col 5}_#_plotsize_gps{col 23}plotsize_gps_#_{col 42}imputed values of plotsize_gps
    {hline 71}
{col 5}# = 1

{com}. 
{txt}end of do-file

{com}. do "C:\Users\THEMAC~1\AppData\Local\Temp\STD3114_000000.tmp"
{txt}
{com}.         tab                     mi_miss

 {txt}Incomplete {c |}
observation {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          0 {c |}{res}         12       13.95       13.95
{txt}          1 {c |}{res}         74       86.05      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}         86      100.00
{txt}
{com}. 
{txt}end of do-file

{com}. do "C:\Users\THEMAC~1\AppData\Local\Temp\STD3114_000000.tmp"
{txt}
{com}.         tab                     mi_miss

 {txt}Incomplete {c |}
observation {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          0 {c |}{res}         12       13.95       13.95
{txt}          1 {c |}{res}         74       86.05      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}         86      100.00
{txt}
{com}.         pwcorr          plotsize_gps plotsize_gps_1_ if plotsize_gps != .

             {txt}{c |} plotsi~s plots~1_
{hline 13}{c +}{hline 18}
plotsize_gps {c |} {res}  1.0000 
{txt}plotsize_~1_ {c |} {res}  1.0000   1.0000 
{txt}
{com}. 
{txt}end of do-file

{com}. do "C:\Users\THEMAC~1\AppData\Local\Temp\STD3114_000000.tmp"
{txt}
{com}.         tab                     mi_miss

 {txt}Incomplete {c |}
observation {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          0 {c |}{res}         12       13.95       13.95
{txt}          1 {c |}{res}         74       86.05      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}         86      100.00
{txt}
{com}.         pwcorr          plotsize_gps plotsize_gps_1_ if plotsize_gps != .

             {txt}{c |} plotsi~s plots~1_
{hline 13}{c +}{hline 18}
plotsize_gps {c |} {res}  1.0000 
{txt}plotsize_~1_ {c |} {res}  1.0000   1.0000 
{txt}
{com}.         tabstat         plotsize_gps plotsize_self plotsize_gps_1_, by(mi_miss) statistics(n mean min max) columns(statistics) longstub format(%9.3g) 

{txt}{lalign 8:mi_miss} {...}
{ralign 12:variable} {...}
{c |}         N      mean       min       max
{hline 22}{c +}{hline 40}
{lalign 8:0} {...}
{ralign 12:plotsize_gps} {...}
{c |}{...}
 {res}       12      .478      .045      1.67
{space 8} {...}
{txt}{ralign 12:plotsize_s~f} {...}
{c |}{...}
 {res}       12       .43      .101      1.21
{space 8} {...}
{txt}{ralign 12:plotsize_~1_} {...}
{c |}{...}
 {res}       12      .478      .045      1.67
{txt}{hline 22}{c +}{hline 40}
{lalign 8:1} {...}
{ralign 12:plotsize_gps} {...}
{c |}{...}
 {res}        0         .         .         .
{space 8} {...}
{txt}{ralign 12:plotsize_s~f} {...}
{c |}{...}
 {res}       74      .501     .0809      2.83
{space 8} {...}
{txt}{ralign 12:plotsize_~1_} {...}
{c |}{...}
 {res}       74      .341      .045      1.67
{txt}{hline 22}{c +}{hline 40}
{lalign 8:Total} {...}
{ralign 12:plotsize_gps} {...}
{c |}{...}
 {res}       12      .478      .045      1.67
{space 8} {...}
{txt}{ralign 12:plotsize_s~f} {...}
{c |}{...}
 {res}       86      .492     .0809      2.83
{space 8} {...}
{txt}{ralign 12:plotsize_~1_} {...}
{c |}{...}
 {res}       86       .36      .045      1.67
{txt}{hline 22}{c BT}{hline 40}

{com}.         rename          plotsize_gps_1_ plotsize        
{res}{txt}
{com}. 
{txt}end of do-file

{com}. do "C:\Users\THEMAC~1\AppData\Local\Temp\STD3114_000000.tmp"
{txt}
{com}. * generate seasonal variable
.         generate        season = 0
{txt}
{com}. 
. * keep what we want, get rid of the rest
.         keep            hhid plot_id plotsize season
{txt}
{com}. 
. *       Prepare for export
. compress
  {txt}variable {bf}season{sf} was {bf}{res}float{sf}{txt} now {bf}{res}byte{sf}
{txt}  (258 bytes saved)

{com}. describe

{txt}Contains data from {res}G:/My Drive/weather_project/household_data/tanzania/wave_1/raw/SEC_2B.dta
{txt}  obs:{res}            86                          
{txt} vars:{res}             4                          28 May 2011 14:43
                                              (_dta has notes)
{txt}{hline}
              storage   display    value
variable name   type    format     label      variable label
{hline}
{p 0 48}{res}{bind:hhid           }{txt}{bind: str14   }{bind:{txt}%14s      }{space 1}{bind:         }{bind:  }{res}{res}Unique HH Identifier{p_end}
{p 0 48}{bind:plot_id        }{txt}{bind: str17   }{bind:{txt}%17s      }{space 1}{bind:         }{bind:  }{res}{res}{p_end}
{p 0 48}{bind:plotsize       }{txt}{bind: float   }{bind:{txt}%9.0g     }{space 1}{bind:         }{bind:  }{res}{res}{p_end}
{p 0 48}{bind:season         }{txt}{bind: byte    }{bind:{txt}%9.0g     }{space 1}{bind:         }{bind:  }{res}{res}{p_end}
{txt}{hline}
Sorted by: 
{res}     Note: Dataset has changed since last saved.
{txt}
{com}. summarize 

{txt}    Variable {c |}        Obs        Mean    Std. Dev.       Min        Max
{hline 13}{c +}{hline 57}
{space 8}hhid {c |}{res}          0
{txt}{space 5}plot_id {c |}{res}          0
{txt}{space 4}plotsize {c |}{res}         86    .3603015     .389637       .045   1.673201
{txt}{space 6}season {c |}{res}         86           0           0          0          0
{txt}
{com}. sort plot_id
{txt}
{com}. customsave , idvar(plot_id) filename(AG_SEC2B.dta) path("$export") dofile(2008_AGSEC2B) user($user)
 with do file 2008_AGSEC2B by user themacfreezie using computer Torbit

{txt}
{com}. 
. * close the log
.         log     close
      {txt}name:  {res}<unnamed>
       {txt}log:  {res}C:/Users/themacfreezie/git/weather_project/tanzania/household_code/logs/wv1_AGSEC2B.smcl
  {txt}log type:  {res}smcl
 {txt}closed on:  {res}16 May 2020, 20:54:00
{txt}{.-}
{smcl}
{txt}{sf}{ul off}{smcl}
{com}{sf}{ul off}{txt}{.-}
      name:  {res}<unnamed>
       {txt}log:  {res}C:/Users/themacfreezie/git/weather_project/tanzania/household_code/logs/wv1_AGSEC2B.smcl
  {txt}log type:  {res}smcl
 {txt}opened on:  {res}16 May 2020, 20:54:03
{txt}
{com}. 
. 
. **********************************************************************************
. **      TZA 2008 (Wave 1) - Agriculture Section 2B 
. **********************************************************************************
. 
. * load data
.         use             "$root/SEC_2B", clear
{txt}
{com}. 
. * generate unique ob id 
.         generate        plot_id = hhid + " " + plotnum
{txt}
{com}.         isid            plot_id
{txt}
{com}.         
. * rename variables of interest (plotsizes)
.         rename          s2bq9 plotsize_self_ac
{res}{txt}
{com}.         rename          area plotsize_gps_ac
{res}{txt}
{com}.         
. * convert from acres to hectares
.         generate        plotsize_self = plotsize_self_ac * 0.404686
{txt}
{com}.         label           var plotsize_self "Self-reported Area (Hectares)"
{txt}
{com}.         generate        plotsize_gps = plotsize_gps_ac * 0.404686
{txt}(74 missing values generated)

{com}.         label           var plotsize_gps "GPS Measured Area (Hectares)"
{txt}
{com}.         drop            plotsize_gps_ac plotsize_self_ac
{txt}
{com}.         
. * interrogating plotsize variables
.         count           if plotsize_gps != . & plotsize_self != .
  {res}12
{txt}
{com}.  *** 12 not mising, out of 86
.         pwcorr          plotsize_gps plotsize_self

             {txt}{c |} plotsi~s plotsi~f
{hline 13}{c +}{hline 18}
plotsize_gps {c |} {res}  1.0000 
{txt}plotsize_s~f {c |} {res}  0.7817   1.0000 
{txt}
{com}.  *** high correlation (0.7817)
. * inverstingating the high and low end of gps measurments
.         * high end
.                 tab                     plotsize_gps

        {txt}GPS {c |}
   Measured {c |}
       Area {c |}
 (Hectares) {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
       .045 {c |}{res}          1        8.33        8.33
{txt}   .1079001 {c |}{res}          1        8.33       16.67
{txt}   .1452001 {c |}{res}          1        8.33       25.00
{txt}   .1478001 {c |}{res}          1        8.33       33.33
{txt}   .2024002 {c |}{res}          1        8.33       41.67
{txt}   .2934003 {c |}{res}          1        8.33       50.00
{txt}   .4436004 {c |}{res}          1        8.33       58.33
{txt}   .5515005 {c |}{res}          1        8.33       66.67
{txt}   .5700005 {c |}{res}          1        8.33       75.00
{txt}   .6467006 {c |}{res}          1        8.33       83.33
{txt}   .9085008 {c |}{res}          1        8.33       91.67
{txt}   1.673201 {c |}{res}          1        8.33      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}         12      100.00
{txt}
{com}.                 sum                     plotsize_gps, detail

                {txt}GPS Measured Area (Hectares)
{hline 61}
      Percentiles      Smallest
 1%    {res}     .045           .045
{txt} 5%    {res}     .045       .1079001
{txt}10%    {res} .1079001       .1452001       {txt}Obs         {res}         12
{txt}25%    {res} .1465001       .1478001       {txt}Sum of Wgt. {res}         12

{txt}50%    {res} .3685003                      {txt}Mean          {res} .4779338
                        {txt}Largest       Std. Dev.     {res} .4584192
{txt}75%    {res} .6083505       .5700005
{txt}90%    {res} .9085008       .6467006       {txt}Variance      {res} .2101482
{txt}95%    {res} 1.673201       .9085008       {txt}Skewness      {res} 1.539129
{txt}99%    {res} 1.673201       1.673201       {txt}Kurtosis      {res}  4.85356
{txt}
{com}.                 *histogram      plotsize_gps if plotsize_gps > .9
.          *** mean = 0.478
.          *** 90% of obs < .9
.                 sort            plotsize_gps
{txt}
{com}.                 sum             plotsize_gps if plotsize_gps>0.9

{txt}    Variable {c |}        Obs        Mean    Std. Dev.       Min        Max
{hline 13}{c +}{hline 57}
plotsize_gps {c |}{res}          2    1.290851     .540725   .9085008   1.673201
{txt}
{com}.          *** 2 obs > 0.9
.                 list            plotsize_gps plotsize_self if plotsize_gps>0.9 & !missing(plotsize_gps), sep(0)
{txt}
     {c TLC}{hline 10}{c -}{hline 10}{c TRC}
     {c |} {res}plotsi~s   plotsi~f {txt}{c |}
     {c LT}{hline 10}{c -}{hline 10}{c RT}
 11. {c |} {res}.9085008   1.214058 {txt}{c |}
 12. {c |} {res}1.673201    .809372 {txt}{c |}
     {c BLC}{hline 10}{c -}{hline 10}{c BRC}

{com}.                 pwcorr          plotsize_gps plotsize_self if plotsize_gps>0.9 & !missing(plotsize_gps)

             {txt}{c |} plotsi~s plotsi~f
{hline 13}{c +}{hline 18}
plotsize_gps {c |} {res}  1.0000 
{txt}plotsize_s~f {c |} {res} -1.0000   1.0000 
{txt}
{com}.          *** corr = -1.0000 (kind of weird, is this because there are only 2 obs?)
.                 sum             plotsize_gps if plotsize_gps>0.6

{txt}    Variable {c |}        Obs        Mean    Std. Dev.       Min        Max
{hline 13}{c +}{hline 57}
plotsize_gps {c |}{res}          3    1.076134    .5333871   .6467006   1.673201
{txt}
{com}.          *** 3 obs > 0.6
.                 list            plotsize_gps plotsize_self if plotsize_gps>0.6 & !missing(plotsize_gps), sep(0)
{txt}
     {c TLC}{hline 10}{c -}{hline 10}{c TRC}
     {c |} {res}plotsi~s   plotsi~f {txt}{c |}
     {c LT}{hline 10}{c -}{hline 10}{c RT}
 10. {c |} {res}.6467006    .809372 {txt}{c |}
 11. {c |} {res}.9085008   1.214058 {txt}{c |}
 12. {c |} {res}1.673201    .809372 {txt}{c |}
     {c BLC}{hline 10}{c -}{hline 10}{c BRC}

{com}.                 pwcorr          plotsize_gps plotsize_self if plotsize_gps>0.6 & !missing(plotsize_gps)

             {txt}{c |} plotsi~s plotsi~f
{hline 13}{c +}{hline 18}
plotsize_gps {c |} {res}  1.0000 
{txt}plotsize_s~f {c |} {res} -0.2722   1.0000 
{txt}
{com}.          *** corr = -0.2722 (a real value!)
.          *** not going to drop anything here
.         ///////////////////////////////////////////////////////////////////////////
>         * low end
.                 tab                     plotsize_gps

        {txt}GPS {c |}
   Measured {c |}
       Area {c |}
 (Hectares) {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
       .045 {c |}{res}          1        8.33        8.33
{txt}   .1079001 {c |}{res}          1        8.33       16.67
{txt}   .1452001 {c |}{res}          1        8.33       25.00
{txt}   .1478001 {c |}{res}          1        8.33       33.33
{txt}   .2024002 {c |}{res}          1        8.33       41.67
{txt}   .2934003 {c |}{res}          1        8.33       50.00
{txt}   .4436004 {c |}{res}          1        8.33       58.33
{txt}   .5515005 {c |}{res}          1        8.33       66.67
{txt}   .5700005 {c |}{res}          1        8.33       75.00
{txt}   .6467006 {c |}{res}          1        8.33       83.33
{txt}   .9085008 {c |}{res}          1        8.33       91.67
{txt}   1.673201 {c |}{res}          1        8.33      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}         12      100.00
{txt}
{com}.                 sum                     plotsize_gps, detail

                {txt}GPS Measured Area (Hectares)
{hline 61}
      Percentiles      Smallest
 1%    {res}     .045           .045
{txt} 5%    {res}     .045       .1079001
{txt}10%    {res} .1079001       .1452001       {txt}Obs         {res}         12
{txt}25%    {res} .1465001       .1478001       {txt}Sum of Wgt. {res}         12

{txt}50%    {res} .3685003                      {txt}Mean          {res} .4779338
                        {txt}Largest       Std. Dev.     {res} .4584192
{txt}75%    {res} .6083505       .5700005
{txt}90%    {res} .9085008       .6467006       {txt}Variance      {res} .2101482
{txt}95%    {res} 1.673201       .9085008       {txt}Skewness      {res} 1.539129
{txt}99%    {res} 1.673201       1.673201       {txt}Kurtosis      {res}  4.85356
{txt}
{com}.                 *histogram      plotsize_gps if plotsize_gps < 0.11
.          *** mean = 0.478
.          *** 10% of obs < 0.11
.                 sum             plotsize_gps if plotsize_gps<0.11

{txt}    Variable {c |}        Obs        Mean    Std. Dev.       Min        Max
{hline 13}{c +}{hline 57}
plotsize_gps {c |}{res}          2    .0764501    .0444771       .045   .1079001
{txt}
{com}.          *** 2 obs < 0.11
.                 list            plotsize_gps plotsize_self if plotsize_gps<0.11 & !missing(plotsize_gps), sep(0)
{txt}
     {c TLC}{hline 10}{c -}{hline 10}{c TRC}
     {c |} {res}plotsi~s   plotsi~f {txt}{c |}
     {c LT}{hline 10}{c -}{hline 10}{c RT}
  1. {c |} {res}    .045   .1011715 {txt}{c |}
  2. {c |} {res}.1079001    .202343 {txt}{c |}
     {c BLC}{hline 10}{c -}{hline 10}{c BRC}

{com}.                 pwcorr          plotsize_gps plotsize_self if plotsize_gps<0.11 & !missing(plotsize_gps)

             {txt}{c |} plotsi~s plotsi~f
{hline 13}{c +}{hline 18}
plotsize_gps {c |} {res}  1.0000 
{txt}plotsize_s~f {c |} {res}  1.0000   1.0000 
{txt}
{com}.          *** corr = 1.000(again, 2 obs)
.                 sum             plotsize_gps if plotsize_gps<0.15

{txt}    Variable {c |}        Obs        Mean    Std. Dev.       Min        Max
{hline 13}{c +}{hline 57}
plotsize_gps {c |}{res}          4    .1114751    .0479187       .045   .1478001
{txt}
{com}.          *** 3 < 0.15
.                 list            plotsize_gps plotsize_self if plotsize_gps<0.15 & !missing(plotsize_gps), sep(0)
{txt}
     {c TLC}{hline 10}{c -}{hline 10}{c TRC}
     {c |} {res}plotsi~s   plotsi~f {txt}{c |}
     {c LT}{hline 10}{c -}{hline 10}{c RT}
  1. {c |} {res}    .045   .1011715 {txt}{c |}
  2. {c |} {res}.1079001    .202343 {txt}{c |}
  3. {c |} {res}.1452001    .202343 {txt}{c |}
  4. {c |} {res}.1478001   .1011715 {txt}{c |}
     {c BLC}{hline 10}{c -}{hline 10}{c BRC}

{com}.                 pwcorr          plotsize_gps plotsize_self if plotsize_gps<0.15 & !missing(plotsize_gps)

             {txt}{c |} plotsi~s plotsi~f
{hline 13}{c +}{hline 18}
plotsize_gps {c |} {res}  1.0000 
{txt}plotsize_s~f {c |} {res}  0.3633   1.0000 
{txt}
{com}.          *** corr = 0.3633 (a real value!)
.          *** again, won't be dropping anything
.          * for robustness, although no zero values in this set
.                 replace         plotsize_gps = . if plotsize_gps == 0
{txt}(0 real changes made)

{com}.         
. * must merge in regional identifiers from 2008_HHSECA to impute
.         merge           m:1 hhid using "$export/HH_SECA"
{res}
{txt}{col 5}Result{col 38}# of obs.
{col 5}{hline 41}
{col 5}not matched{col 30}{res}           3,201
{txt}{col 9}from master{col 30}{res}               0{txt}  (_merge==1)
{col 9}from using{col 30}{res}           3,201{txt}  (_merge==2)

{col 5}matched{col 30}{res}              86{txt}  (_merge==3)
{col 5}{hline 41}

{com}.         tab                     _merge

                 {txt}_merge {c |}      Freq.     Percent        Cum.
{hline 24}{c +}{hline 35}
         using only (2) {c |}{res}      3,201       97.38       97.38
{txt}            matched (3) {c |}{res}         86        2.62      100.00
{txt}{hline 24}{c +}{hline 35}
                  Total {c |}{res}      3,287      100.00
{txt}
{com}.  *** all obs in master are matched
.         drop            if _merge == 2
{txt}(3,201 observations deleted)

{com}.         drop            _merge
{txt}
{com}. * interrogating regional identifiers
.         sort            region
{txt}
{com}.         by region:      distinct district

{txt}{hline}
-> region = Arusha

{col 11}{c |}        Observations
{col 11}{c |}      total   distinct
{hline 10}{c +}{hline 22}
 district {c |}  {res}        3          2

{txt}{hline}
-> region = Kilimanjaro

{col 11}{c |}        Observations
{col 11}{c |}      total   distinct
{hline 10}{c +}{hline 22}
 district {c |}  {res}        3          2

{txt}{hline}
-> region = Morogoro

{col 11}{c |}        Observations
{col 11}{c |}      total   distinct
{hline 10}{c +}{hline 22}
 district {c |}  {res}        1          1

{txt}{hline}
-> region = Dar es salaam

{col 11}{c |}        Observations
{col 11}{c |}      total   distinct
{hline 10}{c +}{hline 22}
 district {c |}  {res}        2          1

{txt}{hline}
-> region = Lindi

{col 11}{c |}        Observations
{col 11}{c |}      total   distinct
{hline 10}{c +}{hline 22}
 district {c |}  {res}        2          1

{txt}{hline}
-> region = Iringa

{col 11}{c |}        Observations
{col 11}{c |}      total   distinct
{hline 10}{c +}{hline 22}
 district {c |}  {res}        1          1

{txt}{hline}
-> region = Mbeya

{col 11}{c |}        Observations
{col 11}{c |}      total   distinct
{hline 10}{c +}{hline 22}
 district {c |}  {res}        7          1

{txt}{hline}
-> region = Kigoma

{col 11}{c |}        Observations
{col 11}{c |}      total   distinct
{hline 10}{c +}{hline 22}
 district {c |}  {res}        8          3

{txt}{hline}
-> region = Shinyanga

{col 11}{c |}        Observations
{col 11}{c |}      total   distinct
{hline 10}{c +}{hline 22}
 district {c |}  {res}       33          7

{txt}{hline}
-> region = Kagera

{col 11}{c |}        Observations
{col 11}{c |}      total   distinct
{hline 10}{c +}{hline 22}
 district {c |}  {res}       13          5

{txt}{hline}
-> region = Mwanza

{col 11}{c |}        Observations
{col 11}{c |}      total   distinct
{hline 10}{c +}{hline 22}
 district {c |}  {res}        6          4

{txt}{hline}
-> region = Mara

{col 11}{c |}        Observations
{col 11}{c |}      total   distinct
{hline 10}{c +}{hline 22}
 district {c |}  {res}        2          2

{txt}{hline}
-> region = Manyara

{col 11}{c |}        Observations
{col 11}{c |}      total   distinct
{hline 10}{c +}{hline 22}
 district {c |}  {res}        1          1

{txt}{hline}
-> region = KASKAZINI UNGUJA

{col 11}{c |}        Observations
{col 11}{c |}      total   distinct
{hline 10}{c +}{hline 22}
 district {c |}  {res}        3          2

{txt}{hline}
-> region = MJINI/MAGHARIBI UNGUJA

{col 11}{c |}        Observations
{col 11}{c |}      total   distinct
{hline 10}{c +}{hline 22}
 district {c |}  {res}        1          1
{txt}
{com}.  *** 126 distinct districts
. * unique district id
.         tostring        region, generate(reg_num) 
{txt}reg_num generated as {res:str2}

{com}.         tostring        district, generate(dist_num)
{txt}dist_num generated as {res:str1}

{com}.         generate        uq_dist = reg_num + dist_num
{txt}
{com}.         distinct        uq_dist

{txt}{col 10}{c |}        Observations
{col 10}{c |}      total   distinct
{hline 9}{c +}{hline 22}
 uq_dist {c |}  {res}       86         34
{txt}
{com}.         sort            region district
{txt}
{com}.         destring        uq_dist, replace
{txt}uq_dist: all characters numeric; {res}replaced {txt}as {res}int
{txt}
{com}.  *** 126 once again, good deal
.         drop            reg_num dist_num
{txt}
{com}.         
. * impute missing + irregular plot sizes using predictive mean matching 
. * including plotsize_self as control
.         mi set          wide    // declare the data to be wide.
{txt}
{com}.         mi xtset, clear         // this is a precautinary step to clear any xtset that the analyst may have had in place previously
{res}{txt}
{com}.         mi register     imputed plotsize_gps // identify plotsize_GPS as the variable being imputed
{res}{txt}
{com}.         mi impute       pmm plotsize_gps plotsize_self i.uq_dist, add(1) rseed(245780) noisily dots force knn(5) bootstrap
{res}
{txt}Imputing {it:m}=1:
{col 3}{res}
{txt}Running {bf:regress} on bootstrap sample:

{p 0 6 2}note: 194.uq_dist omitted because of collinearity{p_end}

      Source {c |}       SS           df       MS      Number of obs   ={res}        12
{txt}{hline 13}{c +}{hline 34}   F(5, 6)         = {res}   555.46
{txt}       Model {c |} {res} 1.03495592         5  .206991185   {txt}Prob > F        ={res}    0.0000
{txt}    Residual {c |} {res} .002235874         6  .000372646   {txt}R-squared       ={res}    0.9978
{txt}{hline 13}{c +}{hline 34}   Adj R-squared   ={res}    0.9960
{txt}       Total {c |} {res}  1.0371918        11  .094290163   {txt}Root MSE        =   {res}  .0193

{txt}{hline 14}{c TT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{col 1} plotsize_gps{col 15}{c |}      Coef.{col 27}   Std. Err.{col 39}      t{col 47}   P>|t|{col 55}     [95% Con{col 68}f. Interval]
{hline 14}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
plotsize_self {c |}{col 15}{res}{space 2}-.5292997{col 27}{space 2} .1457297{col 38}{space 1}   -3.63{col 47}{space 3}0.011{col 55}{space 4}-.8858876{col 68}{space 3}-.1727119
{txt}{space 13} {c |}
{space 6}uq_dist {c |}
{space 9}128  {c |}{col 15}{res}{space 2}-.1164501{col 27}{space 2} .0215826{col 38}{space 1}   -5.40{col 47}{space 3}0.002{col 55}{space 4}-.1692607{col 68}{space 3}-.0636395
{txt}{space 9}178  {c |}{col 15}{res}{space 2} 1.336101{col 27}{space 2} .1566286{col 38}{space 1}    8.53{col 47}{space 3}0.000{col 55}{space 4} .9528449{col 68}{space 3} 1.719357
{txt}{space 9}181  {c |}{col 15}{res}{space 2}    .0373{col 27}{space 2} .0222904{col 38}{space 1}    1.67{col 47}{space 3}0.145{col 55}{space 4}-.0172425{col 68}{space 3} .0918426
{txt}{space 9}184  {c |}{col 15}{res}{space 2} .4428004{col 27}{space 2} .0431651{col 38}{space 1}   10.26{col 47}{space 3}0.000{col 55}{space 4} .3371791{col 68}{space 3} .5484216
{txt}{space 9}194  {c |}{col 15}{res}{space 2}        0{col 27}{txt}  (omitted)
{space 13} {c |}
{space 8}_cons {c |}{col 15}{res}{space 2} .2150002{col 27}{space 2} .0222904{col 38}{space 1}    9.65{col 47}{space 3}0.000{col 55}{space 4} .1604576{col 68}{space 3} .2695428
{txt}{hline 14}{c BT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{res}{txt}. done
{res}{txt}
Univariate imputation{txt}{col 45}{ralign 12:Imputations }= {res}       1
{txt}Predictive mean matching{txt}{col 45}{ralign 12:added }= {res}       1
{txt}Imputed: {it:m}=1{txt}{col 45}{ralign 12:updated }= {res}       0

{txt}{col 39}{ralign 12:Nearest neighbors }= {res}       5

{txt}{hline 19}{c TT}{hline 35}{hline 11}
{txt}{col 20}{c |}{center 46:  Observations per {it:m}}
{txt}{col 20}{c LT}{hline 35}{c TT}{hline 10}
{txt}{col 11}Variable {c |}{ralign 12:Complete }{ralign 13:Incomplete }{ralign 10:Imputed }{c |}{ralign 10:Total}
{hline 19}{c +}{hline 35}{c +}{hline 10}
{txt}{ralign 19:plotsize_gps }{c |}{res}         12           74        74 {txt}{c |}{res}        86
{txt}{hline 19}{c BT}{hline 35}{c BT}{hline 10}
{p 0 1 1 66}(complete + incomplete = total; imputed is the minimum across {it:m}
 of the number of filled-in observations.){p_end}

{txt}Note: Posterior parameters obtained using {help mi_boot_note:sampling with replacement}.
{res}{txt}
{com}.         mi                      unset

{txt}{col 13}variables
{col 5}original{col 23}new{col 42}meaning
    {hline 71}
{col 5}_mi_miss{col 23}mi_miss{col 42}0=orig-complete, 1=orig-incomplete
{col 5}_#_plotsize_gps{col 23}plotsize_gps_#_{col 42}imputed values of plotsize_gps
    {hline 71}
{col 5}# = 1

{com}. 
. * how did the imputation go?
.         tab                     mi_miss

 {txt}Incomplete {c |}
observation {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          0 {c |}{res}         12       13.95       13.95
{txt}          1 {c |}{res}         74       86.05      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}         86      100.00
{txt}
{com}.         pwcorr          plotsize_gps plotsize_gps_1_ if plotsize_gps != .

             {txt}{c |} plotsi~s plots~1_
{hline 13}{c +}{hline 18}
plotsize_gps {c |} {res}  1.0000 
{txt}plotsize_~1_ {c |} {res}  1.0000   1.0000 
{txt}
{com}.         tabstat         plotsize_gps plotsize_self plotsize_gps_1_, by(mi_miss) statistics(n mean min max) columns(statistics) longstub format(%9.3g) 

{txt}{lalign 8:mi_miss} {...}
{ralign 12:variable} {...}
{c |}         N      mean       min       max
{hline 22}{c +}{hline 40}
{lalign 8:0} {...}
{ralign 12:plotsize_gps} {...}
{c |}{...}
 {res}       12      .478      .045      1.67
{space 8} {...}
{txt}{ralign 12:plotsize_s~f} {...}
{c |}{...}
 {res}       12       .43      .101      1.21
{space 8} {...}
{txt}{ralign 12:plotsize_~1_} {...}
{c |}{...}
 {res}       12      .478      .045      1.67
{txt}{hline 22}{c +}{hline 40}
{lalign 8:1} {...}
{ralign 12:plotsize_gps} {...}
{c |}{...}
 {res}        0         .         .         .
{space 8} {...}
{txt}{ralign 12:plotsize_s~f} {...}
{c |}{...}
 {res}       74      .501     .0809      2.83
{space 8} {...}
{txt}{ralign 12:plotsize_~1_} {...}
{c |}{...}
 {res}       74      .326      .045      1.67
{txt}{hline 22}{c +}{hline 40}
{lalign 8:Total} {...}
{ralign 12:plotsize_gps} {...}
{c |}{...}
 {res}       12      .478      .045      1.67
{space 8} {...}
{txt}{ralign 12:plotsize_s~f} {...}
{c |}{...}
 {res}       86      .492     .0809      2.83
{space 8} {...}
{txt}{ralign 12:plotsize_~1_} {...}
{c |}{...}
 {res}       86      .347      .045      1.67
{txt}{hline 22}{c BT}{hline 40}

{com}.         rename          plotsize_gps_1_ plotsize        
{res}{txt}
{com}.         
. * generate seasonal variable
.         generate        season = 0
{txt}
{com}. 
. * keep what we want, get rid of the rest
.         keep            hhid plot_id plotsize season
{txt}
{com}. 
. *       Prepare for export
. compress
  {txt}variable {bf}season{sf} was {bf}{res}float{sf}{txt} now {bf}{res}byte{sf}
{txt}  (258 bytes saved)

{com}. describe

{txt}Contains data from {res}G:/My Drive/weather_project/household_data/tanzania/wave_1/raw/SEC_2B.dta
{txt}  obs:{res}            86                          
{txt} vars:{res}             4                          28 May 2011 14:43
                                              (_dta has notes)
{txt}{hline}
              storage   display    value
variable name   type    format     label      variable label
{hline}
{p 0 48}{res}{bind:hhid           }{txt}{bind: str14   }{bind:{txt}%14s      }{space 1}{bind:         }{bind:  }{res}{res}Unique HH Identifier{p_end}
{p 0 48}{bind:plot_id        }{txt}{bind: str17   }{bind:{txt}%17s      }{space 1}{bind:         }{bind:  }{res}{res}{p_end}
{p 0 48}{bind:plotsize       }{txt}{bind: float   }{bind:{txt}%9.0g     }{space 1}{bind:         }{bind:  }{res}{res}{p_end}
{p 0 48}{bind:season         }{txt}{bind: byte    }{bind:{txt}%9.0g     }{space 1}{bind:         }{bind:  }{res}{res}{p_end}
{txt}{hline}
Sorted by: 
{res}     Note: Dataset has changed since last saved.
{txt}
{com}. summarize 

{txt}    Variable {c |}        Obs        Mean    Std. Dev.       Min        Max
{hline 13}{c +}{hline 57}
{space 8}hhid {c |}{res}          0
{txt}{space 5}plot_id {c |}{res}          0
{txt}{space 4}plotsize {c |}{res}         86    .3473119    .3906345       .045   1.673201
{txt}{space 6}season {c |}{res}         86           0           0          0          0
{txt}
{com}. sort plot_id
{txt}
{com}. customsave , idvar(plot_id) filename(AG_SEC2B.dta) path("$export") dofile(2008_AGSEC2B) user($user)
 with do file 2008_AGSEC2B by user themacfreezie using computer Torbit

{txt}
{com}. 
. * close the log
.         log     close
      {txt}name:  {res}<unnamed>
       {txt}log:  {res}C:/Users/themacfreezie/git/weather_project/tanzania/household_code/logs/wv1_AGSEC2B.smcl
  {txt}log type:  {res}smcl
 {txt}closed on:  {res}16 May 2020, 20:54:04
{txt}{.-}
{smcl}
{txt}{sf}{ul off}{smcl}
{com}{sf}{ul off}{txt}{.-}
      name:  {res}<unnamed>
       {txt}log:  {res}C:/Users/themacfreezie/git/weather_project/tanzania/household_code/logs/wv1_AGSEC2B.smcl
  {txt}log type:  {res}smcl
 {txt}opened on:  {res}16 May 2020, 20:54:06
{txt}
{com}. 
. 
. **********************************************************************************
. **      TZA 2008 (Wave 1) - Agriculture Section 2B 
. **********************************************************************************
. 
. * load data
.         use             "$root/SEC_2B", clear
{txt}
{com}. 
. * generate unique ob id 
.         generate        plot_id = hhid + " " + plotnum
{txt}
{com}.         isid            plot_id
{txt}
{com}.         
. * rename variables of interest (plotsizes)
.         rename          s2bq9 plotsize_self_ac
{res}{txt}
{com}.         rename          area plotsize_gps_ac
{res}{txt}
{com}.         
. * convert from acres to hectares
.         generate        plotsize_self = plotsize_self_ac * 0.404686
{txt}
{com}.         label           var plotsize_self "Self-reported Area (Hectares)"
{txt}
{com}.         generate        plotsize_gps = plotsize_gps_ac * 0.404686
{txt}(74 missing values generated)

{com}.         label           var plotsize_gps "GPS Measured Area (Hectares)"
{txt}
{com}.         drop            plotsize_gps_ac plotsize_self_ac
{txt}
{com}.         
. * interrogating plotsize variables
.         count           if plotsize_gps != . & plotsize_self != .
  {res}12
{txt}
{com}.  *** 12 not mising, out of 86
.         pwcorr          plotsize_gps plotsize_self

             {txt}{c |} plotsi~s plotsi~f
{hline 13}{c +}{hline 18}
plotsize_gps {c |} {res}  1.0000 
{txt}plotsize_s~f {c |} {res}  0.7817   1.0000 
{txt}
{com}.  *** high correlation (0.7817)
. * inverstingating the high and low end of gps measurments
.         * high end
.                 tab                     plotsize_gps

        {txt}GPS {c |}
   Measured {c |}
       Area {c |}
 (Hectares) {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
       .045 {c |}{res}          1        8.33        8.33
{txt}   .1079001 {c |}{res}          1        8.33       16.67
{txt}   .1452001 {c |}{res}          1        8.33       25.00
{txt}   .1478001 {c |}{res}          1        8.33       33.33
{txt}   .2024002 {c |}{res}          1        8.33       41.67
{txt}   .2934003 {c |}{res}          1        8.33       50.00
{txt}   .4436004 {c |}{res}          1        8.33       58.33
{txt}   .5515005 {c |}{res}          1        8.33       66.67
{txt}   .5700005 {c |}{res}          1        8.33       75.00
{txt}   .6467006 {c |}{res}          1        8.33       83.33
{txt}   .9085008 {c |}{res}          1        8.33       91.67
{txt}   1.673201 {c |}{res}          1        8.33      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}         12      100.00
{txt}
{com}.                 sum                     plotsize_gps, detail

                {txt}GPS Measured Area (Hectares)
{hline 61}
      Percentiles      Smallest
 1%    {res}     .045           .045
{txt} 5%    {res}     .045       .1079001
{txt}10%    {res} .1079001       .1452001       {txt}Obs         {res}         12
{txt}25%    {res} .1465001       .1478001       {txt}Sum of Wgt. {res}         12

{txt}50%    {res} .3685003                      {txt}Mean          {res} .4779338
                        {txt}Largest       Std. Dev.     {res} .4584192
{txt}75%    {res} .6083505       .5700005
{txt}90%    {res} .9085008       .6467006       {txt}Variance      {res} .2101482
{txt}95%    {res} 1.673201       .9085008       {txt}Skewness      {res} 1.539129
{txt}99%    {res} 1.673201       1.673201       {txt}Kurtosis      {res}  4.85356
{txt}
{com}.                 *histogram      plotsize_gps if plotsize_gps > .9
.          *** mean = 0.478
.          *** 90% of obs < .9
.                 sort            plotsize_gps
{txt}
{com}.                 sum             plotsize_gps if plotsize_gps>0.9

{txt}    Variable {c |}        Obs        Mean    Std. Dev.       Min        Max
{hline 13}{c +}{hline 57}
plotsize_gps {c |}{res}          2    1.290851     .540725   .9085008   1.673201
{txt}
{com}.          *** 2 obs > 0.9
.                 list            plotsize_gps plotsize_self if plotsize_gps>0.9 & !missing(plotsize_gps), sep(0)
{txt}
     {c TLC}{hline 10}{c -}{hline 10}{c TRC}
     {c |} {res}plotsi~s   plotsi~f {txt}{c |}
     {c LT}{hline 10}{c -}{hline 10}{c RT}
 11. {c |} {res}.9085008   1.214058 {txt}{c |}
 12. {c |} {res}1.673201    .809372 {txt}{c |}
     {c BLC}{hline 10}{c -}{hline 10}{c BRC}

{com}.                 pwcorr          plotsize_gps plotsize_self if plotsize_gps>0.9 & !missing(plotsize_gps)

             {txt}{c |} plotsi~s plotsi~f
{hline 13}{c +}{hline 18}
plotsize_gps {c |} {res}  1.0000 
{txt}plotsize_s~f {c |} {res} -1.0000   1.0000 
{txt}
{com}.          *** corr = -1.0000 (kind of weird, is this because there are only 2 obs?)
.                 sum             plotsize_gps if plotsize_gps>0.6

{txt}    Variable {c |}        Obs        Mean    Std. Dev.       Min        Max
{hline 13}{c +}{hline 57}
plotsize_gps {c |}{res}          3    1.076134    .5333871   .6467006   1.673201
{txt}
{com}.          *** 3 obs > 0.6
.                 list            plotsize_gps plotsize_self if plotsize_gps>0.6 & !missing(plotsize_gps), sep(0)
{txt}
     {c TLC}{hline 10}{c -}{hline 10}{c TRC}
     {c |} {res}plotsi~s   plotsi~f {txt}{c |}
     {c LT}{hline 10}{c -}{hline 10}{c RT}
 10. {c |} {res}.6467006    .809372 {txt}{c |}
 11. {c |} {res}.9085008   1.214058 {txt}{c |}
 12. {c |} {res}1.673201    .809372 {txt}{c |}
     {c BLC}{hline 10}{c -}{hline 10}{c BRC}

{com}.                 pwcorr          plotsize_gps plotsize_self if plotsize_gps>0.6 & !missing(plotsize_gps)

             {txt}{c |} plotsi~s plotsi~f
{hline 13}{c +}{hline 18}
plotsize_gps {c |} {res}  1.0000 
{txt}plotsize_s~f {c |} {res} -0.2722   1.0000 
{txt}
{com}.          *** corr = -0.2722 (a real value!)
.          *** not going to drop anything here
.         ///////////////////////////////////////////////////////////////////////////
>         * low end
.                 tab                     plotsize_gps

        {txt}GPS {c |}
   Measured {c |}
       Area {c |}
 (Hectares) {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
       .045 {c |}{res}          1        8.33        8.33
{txt}   .1079001 {c |}{res}          1        8.33       16.67
{txt}   .1452001 {c |}{res}          1        8.33       25.00
{txt}   .1478001 {c |}{res}          1        8.33       33.33
{txt}   .2024002 {c |}{res}          1        8.33       41.67
{txt}   .2934003 {c |}{res}          1        8.33       50.00
{txt}   .4436004 {c |}{res}          1        8.33       58.33
{txt}   .5515005 {c |}{res}          1        8.33       66.67
{txt}   .5700005 {c |}{res}          1        8.33       75.00
{txt}   .6467006 {c |}{res}          1        8.33       83.33
{txt}   .9085008 {c |}{res}          1        8.33       91.67
{txt}   1.673201 {c |}{res}          1        8.33      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}         12      100.00
{txt}
{com}.                 sum                     plotsize_gps, detail

                {txt}GPS Measured Area (Hectares)
{hline 61}
      Percentiles      Smallest
 1%    {res}     .045           .045
{txt} 5%    {res}     .045       .1079001
{txt}10%    {res} .1079001       .1452001       {txt}Obs         {res}         12
{txt}25%    {res} .1465001       .1478001       {txt}Sum of Wgt. {res}         12

{txt}50%    {res} .3685003                      {txt}Mean          {res} .4779338
                        {txt}Largest       Std. Dev.     {res} .4584192
{txt}75%    {res} .6083505       .5700005
{txt}90%    {res} .9085008       .6467006       {txt}Variance      {res} .2101482
{txt}95%    {res} 1.673201       .9085008       {txt}Skewness      {res} 1.539129
{txt}99%    {res} 1.673201       1.673201       {txt}Kurtosis      {res}  4.85356
{txt}
{com}.                 *histogram      plotsize_gps if plotsize_gps < 0.11
.          *** mean = 0.478
.          *** 10% of obs < 0.11
.                 sum             plotsize_gps if plotsize_gps<0.11

{txt}    Variable {c |}        Obs        Mean    Std. Dev.       Min        Max
{hline 13}{c +}{hline 57}
plotsize_gps {c |}{res}          2    .0764501    .0444771       .045   .1079001
{txt}
{com}.          *** 2 obs < 0.11
.                 list            plotsize_gps plotsize_self if plotsize_gps<0.11 & !missing(plotsize_gps), sep(0)
{txt}
     {c TLC}{hline 10}{c -}{hline 10}{c TRC}
     {c |} {res}plotsi~s   plotsi~f {txt}{c |}
     {c LT}{hline 10}{c -}{hline 10}{c RT}
  1. {c |} {res}    .045   .1011715 {txt}{c |}
  2. {c |} {res}.1079001    .202343 {txt}{c |}
     {c BLC}{hline 10}{c -}{hline 10}{c BRC}

{com}.                 pwcorr          plotsize_gps plotsize_self if plotsize_gps<0.11 & !missing(plotsize_gps)

             {txt}{c |} plotsi~s plotsi~f
{hline 13}{c +}{hline 18}
plotsize_gps {c |} {res}  1.0000 
{txt}plotsize_s~f {c |} {res}  1.0000   1.0000 
{txt}
{com}.          *** corr = 1.000(again, 2 obs)
.                 sum             plotsize_gps if plotsize_gps<0.15

{txt}    Variable {c |}        Obs        Mean    Std. Dev.       Min        Max
{hline 13}{c +}{hline 57}
plotsize_gps {c |}{res}          4    .1114751    .0479187       .045   .1478001
{txt}
{com}.          *** 3 < 0.15
.                 list            plotsize_gps plotsize_self if plotsize_gps<0.15 & !missing(plotsize_gps), sep(0)
{txt}
     {c TLC}{hline 10}{c -}{hline 10}{c TRC}
     {c |} {res}plotsi~s   plotsi~f {txt}{c |}
     {c LT}{hline 10}{c -}{hline 10}{c RT}
  1. {c |} {res}    .045   .1011715 {txt}{c |}
  2. {c |} {res}.1079001    .202343 {txt}{c |}
  3. {c |} {res}.1452001    .202343 {txt}{c |}
  4. {c |} {res}.1478001   .1011715 {txt}{c |}
     {c BLC}{hline 10}{c -}{hline 10}{c BRC}

{com}.                 pwcorr          plotsize_gps plotsize_self if plotsize_gps<0.15 & !missing(plotsize_gps)

             {txt}{c |} plotsi~s plotsi~f
{hline 13}{c +}{hline 18}
plotsize_gps {c |} {res}  1.0000 
{txt}plotsize_s~f {c |} {res}  0.3633   1.0000 
{txt}
{com}.          *** corr = 0.3633 (a real value!)
.          *** again, won't be dropping anything
.          * for robustness, although no zero values in this set
.                 replace         plotsize_gps = . if plotsize_gps == 0
{txt}(0 real changes made)

{com}.         
. * must merge in regional identifiers from 2008_HHSECA to impute
.         merge           m:1 hhid using "$export/HH_SECA"
{res}
{txt}{col 5}Result{col 38}# of obs.
{col 5}{hline 41}
{col 5}not matched{col 30}{res}           3,201
{txt}{col 9}from master{col 30}{res}               0{txt}  (_merge==1)
{col 9}from using{col 30}{res}           3,201{txt}  (_merge==2)

{col 5}matched{col 30}{res}              86{txt}  (_merge==3)
{col 5}{hline 41}

{com}.         tab                     _merge

                 {txt}_merge {c |}      Freq.     Percent        Cum.
{hline 24}{c +}{hline 35}
         using only (2) {c |}{res}      3,201       97.38       97.38
{txt}            matched (3) {c |}{res}         86        2.62      100.00
{txt}{hline 24}{c +}{hline 35}
                  Total {c |}{res}      3,287      100.00
{txt}
{com}.  *** all obs in master are matched
.         drop            if _merge == 2
{txt}(3,201 observations deleted)

{com}.         drop            _merge
{txt}
{com}. * interrogating regional identifiers
.         sort            region
{txt}
{com}.         by region:      distinct district

{txt}{hline}
-> region = Arusha

{col 11}{c |}        Observations
{col 11}{c |}      total   distinct
{hline 10}{c +}{hline 22}
 district {c |}  {res}        3          2

{txt}{hline}
-> region = Kilimanjaro

{col 11}{c |}        Observations
{col 11}{c |}      total   distinct
{hline 10}{c +}{hline 22}
 district {c |}  {res}        3          2

{txt}{hline}
-> region = Morogoro

{col 11}{c |}        Observations
{col 11}{c |}      total   distinct
{hline 10}{c +}{hline 22}
 district {c |}  {res}        1          1

{txt}{hline}
-> region = Dar es salaam

{col 11}{c |}        Observations
{col 11}{c |}      total   distinct
{hline 10}{c +}{hline 22}
 district {c |}  {res}        2          1

{txt}{hline}
-> region = Lindi

{col 11}{c |}        Observations
{col 11}{c |}      total   distinct
{hline 10}{c +}{hline 22}
 district {c |}  {res}        2          1

{txt}{hline}
-> region = Iringa

{col 11}{c |}        Observations
{col 11}{c |}      total   distinct
{hline 10}{c +}{hline 22}
 district {c |}  {res}        1          1

{txt}{hline}
-> region = Mbeya

{col 11}{c |}        Observations
{col 11}{c |}      total   distinct
{hline 10}{c +}{hline 22}
 district {c |}  {res}        7          1

{txt}{hline}
-> region = Kigoma

{col 11}{c |}        Observations
{col 11}{c |}      total   distinct
{hline 10}{c +}{hline 22}
 district {c |}  {res}        8          3

{txt}{hline}
-> region = Shinyanga

{col 11}{c |}        Observations
{col 11}{c |}      total   distinct
{hline 10}{c +}{hline 22}
 district {c |}  {res}       33          7

{txt}{hline}
-> region = Kagera

{col 11}{c |}        Observations
{col 11}{c |}      total   distinct
{hline 10}{c +}{hline 22}
 district {c |}  {res}       13          5

{txt}{hline}
-> region = Mwanza

{col 11}{c |}        Observations
{col 11}{c |}      total   distinct
{hline 10}{c +}{hline 22}
 district {c |}  {res}        6          4

{txt}{hline}
-> region = Mara

{col 11}{c |}        Observations
{col 11}{c |}      total   distinct
{hline 10}{c +}{hline 22}
 district {c |}  {res}        2          2

{txt}{hline}
-> region = Manyara

{col 11}{c |}        Observations
{col 11}{c |}      total   distinct
{hline 10}{c +}{hline 22}
 district {c |}  {res}        1          1

{txt}{hline}
-> region = KASKAZINI UNGUJA

{col 11}{c |}        Observations
{col 11}{c |}      total   distinct
{hline 10}{c +}{hline 22}
 district {c |}  {res}        3          2

{txt}{hline}
-> region = MJINI/MAGHARIBI UNGUJA

{col 11}{c |}        Observations
{col 11}{c |}      total   distinct
{hline 10}{c +}{hline 22}
 district {c |}  {res}        1          1
{txt}
{com}.  *** 126 distinct districts
. * unique district id
.         tostring        region, generate(reg_num) 
{txt}reg_num generated as {res:str2}

{com}.         tostring        district, generate(dist_num)
{txt}dist_num generated as {res:str1}

{com}.         generate        uq_dist = reg_num + dist_num
{txt}
{com}.         distinct        uq_dist

{txt}{col 10}{c |}        Observations
{col 10}{c |}      total   distinct
{hline 9}{c +}{hline 22}
 uq_dist {c |}  {res}       86         34
{txt}
{com}.         sort            region district
{txt}
{com}.         destring        uq_dist, replace
{txt}uq_dist: all characters numeric; {res}replaced {txt}as {res}int
{txt}
{com}.  *** 126 once again, good deal
.         drop            reg_num dist_num
{txt}
{com}.         
. * impute missing + irregular plot sizes using predictive mean matching 
. * including plotsize_self as control
.         mi set          wide    // declare the data to be wide.
{txt}
{com}.         mi xtset, clear         // this is a precautinary step to clear any xtset that the analyst may have had in place previously
{res}{txt}
{com}.         mi register     imputed plotsize_gps // identify plotsize_GPS as the variable being imputed
{res}{txt}
{com}.         mi impute       pmm plotsize_gps plotsize_self i.uq_dist, add(1) rseed(245780) noisily dots force knn(5) bootstrap
{res}
{txt}Imputing {it:m}=1:
{col 3}{res}
{txt}Running {bf:regress} on bootstrap sample:

{p 0 6 2}note: 194.uq_dist omitted because of collinearity{p_end}

      Source {c |}       SS           df       MS      Number of obs   ={res}        12
{txt}{hline 13}{c +}{hline 34}   F(5, 6)         = {res}   555.46
{txt}       Model {c |} {res} 1.03495592         5  .206991185   {txt}Prob > F        ={res}    0.0000
{txt}    Residual {c |} {res} .002235874         6  .000372646   {txt}R-squared       ={res}    0.9978
{txt}{hline 13}{c +}{hline 34}   Adj R-squared   ={res}    0.9960
{txt}       Total {c |} {res}  1.0371918        11  .094290163   {txt}Root MSE        =   {res}  .0193

{txt}{hline 14}{c TT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{col 1} plotsize_gps{col 15}{c |}      Coef.{col 27}   Std. Err.{col 39}      t{col 47}   P>|t|{col 55}     [95% Con{col 68}f. Interval]
{hline 14}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
plotsize_self {c |}{col 15}{res}{space 2}-.5292997{col 27}{space 2} .1457297{col 38}{space 1}   -3.63{col 47}{space 3}0.011{col 55}{space 4}-.8858876{col 68}{space 3}-.1727119
{txt}{space 13} {c |}
{space 6}uq_dist {c |}
{space 9}128  {c |}{col 15}{res}{space 2}-.1164501{col 27}{space 2} .0215826{col 38}{space 1}   -5.40{col 47}{space 3}0.002{col 55}{space 4}-.1692607{col 68}{space 3}-.0636395
{txt}{space 9}178  {c |}{col 15}{res}{space 2} 1.336101{col 27}{space 2} .1566286{col 38}{space 1}    8.53{col 47}{space 3}0.000{col 55}{space 4} .9528449{col 68}{space 3} 1.719357
{txt}{space 9}181  {c |}{col 15}{res}{space 2}    .0373{col 27}{space 2} .0222904{col 38}{space 1}    1.67{col 47}{space 3}0.145{col 55}{space 4}-.0172425{col 68}{space 3} .0918426
{txt}{space 9}184  {c |}{col 15}{res}{space 2} .4428004{col 27}{space 2} .0431651{col 38}{space 1}   10.26{col 47}{space 3}0.000{col 55}{space 4} .3371791{col 68}{space 3} .5484216
{txt}{space 9}194  {c |}{col 15}{res}{space 2}        0{col 27}{txt}  (omitted)
{space 13} {c |}
{space 8}_cons {c |}{col 15}{res}{space 2} .2150002{col 27}{space 2} .0222904{col 38}{space 1}    9.65{col 47}{space 3}0.000{col 55}{space 4} .1604576{col 68}{space 3} .2695428
{txt}{hline 14}{c BT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{res}{txt}. done
{res}{txt}
Univariate imputation{txt}{col 45}{ralign 12:Imputations }= {res}       1
{txt}Predictive mean matching{txt}{col 45}{ralign 12:added }= {res}       1
{txt}Imputed: {it:m}=1{txt}{col 45}{ralign 12:updated }= {res}       0

{txt}{col 39}{ralign 12:Nearest neighbors }= {res}       5

{txt}{hline 19}{c TT}{hline 35}{hline 11}
{txt}{col 20}{c |}{center 46:  Observations per {it:m}}
{txt}{col 20}{c LT}{hline 35}{c TT}{hline 10}
{txt}{col 11}Variable {c |}{ralign 12:Complete }{ralign 13:Incomplete }{ralign 10:Imputed }{c |}{ralign 10:Total}
{hline 19}{c +}{hline 35}{c +}{hline 10}
{txt}{ralign 19:plotsize_gps }{c |}{res}         12           74        74 {txt}{c |}{res}        86
{txt}{hline 19}{c BT}{hline 35}{c BT}{hline 10}
{p 0 1 1 66}(complete + incomplete = total; imputed is the minimum across {it:m}
 of the number of filled-in observations.){p_end}

{txt}Note: Posterior parameters obtained using {help mi_boot_note:sampling with replacement}.
{res}{txt}
{com}.         mi                      unset

{txt}{col 13}variables
{col 5}original{col 23}new{col 42}meaning
    {hline 71}
{col 5}_mi_miss{col 23}mi_miss{col 42}0=orig-complete, 1=orig-incomplete
{col 5}_#_plotsize_gps{col 23}plotsize_gps_#_{col 42}imputed values of plotsize_gps
    {hline 71}
{col 5}# = 1

{com}. 
. * how did the imputation go?
.         tab                     mi_miss

 {txt}Incomplete {c |}
observation {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          0 {c |}{res}         12       13.95       13.95
{txt}          1 {c |}{res}         74       86.05      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}         86      100.00
{txt}
{com}.         pwcorr          plotsize_gps plotsize_gps_1_ if plotsize_gps != .

             {txt}{c |} plotsi~s plots~1_
{hline 13}{c +}{hline 18}
plotsize_gps {c |} {res}  1.0000 
{txt}plotsize_~1_ {c |} {res}  1.0000   1.0000 
{txt}
{com}.         tabstat         plotsize_gps plotsize_self plotsize_gps_1_, by(mi_miss) statistics(n mean min max) columns(statistics) longstub format(%9.3g) 

{txt}{lalign 8:mi_miss} {...}
{ralign 12:variable} {...}
{c |}         N      mean       min       max
{hline 22}{c +}{hline 40}
{lalign 8:0} {...}
{ralign 12:plotsize_gps} {...}
{c |}{...}
 {res}       12      .478      .045      1.67
{space 8} {...}
{txt}{ralign 12:plotsize_s~f} {...}
{c |}{...}
 {res}       12       .43      .101      1.21
{space 8} {...}
{txt}{ralign 12:plotsize_~1_} {...}
{c |}{...}
 {res}       12      .478      .045      1.67
{txt}{hline 22}{c +}{hline 40}
{lalign 8:1} {...}
{ralign 12:plotsize_gps} {...}
{c |}{...}
 {res}        0         .         .         .
{space 8} {...}
{txt}{ralign 12:plotsize_s~f} {...}
{c |}{...}
 {res}       74      .501     .0809      2.83
{space 8} {...}
{txt}{ralign 12:plotsize_~1_} {...}
{c |}{...}
 {res}       74      .343      .045      1.67
{txt}{hline 22}{c +}{hline 40}
{lalign 8:Total} {...}
{ralign 12:plotsize_gps} {...}
{c |}{...}
 {res}       12      .478      .045      1.67
{space 8} {...}
{txt}{ralign 12:plotsize_s~f} {...}
{c |}{...}
 {res}       86      .492     .0809      2.83
{space 8} {...}
{txt}{ralign 12:plotsize_~1_} {...}
{c |}{...}
 {res}       86      .362      .045      1.67
{txt}{hline 22}{c BT}{hline 40}

{com}.         rename          plotsize_gps_1_ plotsize        
{res}{txt}
{com}.         
. * generate seasonal variable
.         generate        season = 0
{txt}
{com}. 
. * keep what we want, get rid of the rest
.         keep            hhid plot_id plotsize season
{txt}
{com}. 
. *       Prepare for export
. compress
  {txt}variable {bf}season{sf} was {bf}{res}float{sf}{txt} now {bf}{res}byte{sf}
{txt}  (258 bytes saved)

{com}. describe

{txt}Contains data from {res}G:/My Drive/weather_project/household_data/tanzania/wave_1/raw/SEC_2B.dta
{txt}  obs:{res}            86                          
{txt} vars:{res}             4                          28 May 2011 14:43
                                              (_dta has notes)
{txt}{hline}
              storage   display    value
variable name   type    format     label      variable label
{hline}
{p 0 48}{res}{bind:hhid           }{txt}{bind: str14   }{bind:{txt}%14s      }{space 1}{bind:         }{bind:  }{res}{res}Unique HH Identifier{p_end}
{p 0 48}{bind:plot_id        }{txt}{bind: str17   }{bind:{txt}%17s      }{space 1}{bind:         }{bind:  }{res}{res}{p_end}
{p 0 48}{bind:plotsize       }{txt}{bind: float   }{bind:{txt}%9.0g     }{space 1}{bind:         }{bind:  }{res}{res}{p_end}
{p 0 48}{bind:season         }{txt}{bind: byte    }{bind:{txt}%9.0g     }{space 1}{bind:         }{bind:  }{res}{res}{p_end}
{txt}{hline}
Sorted by: 
{res}     Note: Dataset has changed since last saved.
{txt}
{com}. summarize 

{txt}    Variable {c |}        Obs        Mean    Std. Dev.       Min        Max
{hline 13}{c +}{hline 57}
{space 8}hhid {c |}{res}          0
{txt}{space 5}plot_id {c |}{res}          0
{txt}{space 4}plotsize {c |}{res}         86     .361791     .390201       .045   1.673201
{txt}{space 6}season {c |}{res}         86           0           0          0          0
{txt}
{com}. sort plot_id
{txt}
{com}. customsave , idvar(plot_id) filename(AG_SEC2B.dta) path("$export") dofile(2008_AGSEC2B) user($user)
 with do file 2008_AGSEC2B by user themacfreezie using computer Torbit

{txt}
{com}. 
. * close the log
.         log     close
      {txt}name:  {res}<unnamed>
       {txt}log:  {res}C:/Users/themacfreezie/git/weather_project/tanzania/household_code/logs/wv1_AGSEC2B.smcl
  {txt}log type:  {res}smcl
 {txt}closed on:  {res}16 May 2020, 20:54:06
{txt}{.-}
{smcl}
{txt}{sf}{ul off}{smcl}
{com}{sf}{ul off}{txt}{.-}
      name:  {res}<unnamed>
       {txt}log:  {res}C:/Users/themacfreezie/git/weather_project/tanzania/household_code/logs/wv1_AGSEC2B.smcl
  {txt}log type:  {res}smcl
 {txt}opened on:  {res}16 May 2020, 20:54:07
{txt}
{com}. 
. 
. **********************************************************************************
. **      TZA 2008 (Wave 1) - Agriculture Section 2B 
. **********************************************************************************
. 
. * load data
.         use             "$root/SEC_2B", clear
{txt}
{com}. 
. * generate unique ob id 
.         generate        plot_id = hhid + " " + plotnum
{txt}
{com}.         isid            plot_id
{txt}
{com}.         
. * rename variables of interest (plotsizes)
.         rename          s2bq9 plotsize_self_ac
{res}{txt}
{com}.         rename          area plotsize_gps_ac
{res}{txt}
{com}.         
. * convert from acres to hectares
.         generate        plotsize_self = plotsize_self_ac * 0.404686
{txt}
{com}.         label           var plotsize_self "Self-reported Area (Hectares)"
{txt}
{com}.         generate        plotsize_gps = plotsize_gps_ac * 0.404686
{txt}(74 missing values generated)

{com}.         label           var plotsize_gps "GPS Measured Area (Hectares)"
{txt}
{com}.         drop            plotsize_gps_ac plotsize_self_ac
{txt}
{com}.         
. * interrogating plotsize variables
.         count           if plotsize_gps != . & plotsize_self != .
  {res}12
{txt}
{com}.  *** 12 not mising, out of 86
.         pwcorr          plotsize_gps plotsize_self

             {txt}{c |} plotsi~s plotsi~f
{hline 13}{c +}{hline 18}
plotsize_gps {c |} {res}  1.0000 
{txt}plotsize_s~f {c |} {res}  0.7817   1.0000 
{txt}
{com}.  *** high correlation (0.7817)
. * inverstingating the high and low end of gps measurments
.         * high end
.                 tab                     plotsize_gps

        {txt}GPS {c |}
   Measured {c |}
       Area {c |}
 (Hectares) {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
       .045 {c |}{res}          1        8.33        8.33
{txt}   .1079001 {c |}{res}          1        8.33       16.67
{txt}   .1452001 {c |}{res}          1        8.33       25.00
{txt}   .1478001 {c |}{res}          1        8.33       33.33
{txt}   .2024002 {c |}{res}          1        8.33       41.67
{txt}   .2934003 {c |}{res}          1        8.33       50.00
{txt}   .4436004 {c |}{res}          1        8.33       58.33
{txt}   .5515005 {c |}{res}          1        8.33       66.67
{txt}   .5700005 {c |}{res}          1        8.33       75.00
{txt}   .6467006 {c |}{res}          1        8.33       83.33
{txt}   .9085008 {c |}{res}          1        8.33       91.67
{txt}   1.673201 {c |}{res}          1        8.33      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}         12      100.00
{txt}
{com}.                 sum                     plotsize_gps, detail

                {txt}GPS Measured Area (Hectares)
{hline 61}
      Percentiles      Smallest
 1%    {res}     .045           .045
{txt} 5%    {res}     .045       .1079001
{txt}10%    {res} .1079001       .1452001       {txt}Obs         {res}         12
{txt}25%    {res} .1465001       .1478001       {txt}Sum of Wgt. {res}         12

{txt}50%    {res} .3685003                      {txt}Mean          {res} .4779338
                        {txt}Largest       Std. Dev.     {res} .4584192
{txt}75%    {res} .6083505       .5700005
{txt}90%    {res} .9085008       .6467006       {txt}Variance      {res} .2101482
{txt}95%    {res} 1.673201       .9085008       {txt}Skewness      {res} 1.539129
{txt}99%    {res} 1.673201       1.673201       {txt}Kurtosis      {res}  4.85356
{txt}
{com}.                 *histogram      plotsize_gps if plotsize_gps > .9
.          *** mean = 0.478
.          *** 90% of obs < .9
.                 sort            plotsize_gps
{txt}
{com}.                 sum             plotsize_gps if plotsize_gps>0.9

{txt}    Variable {c |}        Obs        Mean    Std. Dev.       Min        Max
{hline 13}{c +}{hline 57}
plotsize_gps {c |}{res}          2    1.290851     .540725   .9085008   1.673201
{txt}
{com}.          *** 2 obs > 0.9
.                 list            plotsize_gps plotsize_self if plotsize_gps>0.9 & !missing(plotsize_gps), sep(0)
{txt}
     {c TLC}{hline 10}{c -}{hline 10}{c TRC}
     {c |} {res}plotsi~s   plotsi~f {txt}{c |}
     {c LT}{hline 10}{c -}{hline 10}{c RT}
 11. {c |} {res}.9085008   1.214058 {txt}{c |}
 12. {c |} {res}1.673201    .809372 {txt}{c |}
     {c BLC}{hline 10}{c -}{hline 10}{c BRC}

{com}.                 pwcorr          plotsize_gps plotsize_self if plotsize_gps>0.9 & !missing(plotsize_gps)

             {txt}{c |} plotsi~s plotsi~f
{hline 13}{c +}{hline 18}
plotsize_gps {c |} {res}  1.0000 
{txt}plotsize_s~f {c |} {res} -1.0000   1.0000 
{txt}
{com}.          *** corr = -1.0000 (kind of weird, is this because there are only 2 obs?)
.                 sum             plotsize_gps if plotsize_gps>0.6

{txt}    Variable {c |}        Obs        Mean    Std. Dev.       Min        Max
{hline 13}{c +}{hline 57}
plotsize_gps {c |}{res}          3    1.076134    .5333871   .6467006   1.673201
{txt}
{com}.          *** 3 obs > 0.6
.                 list            plotsize_gps plotsize_self if plotsize_gps>0.6 & !missing(plotsize_gps), sep(0)
{txt}
     {c TLC}{hline 10}{c -}{hline 10}{c TRC}
     {c |} {res}plotsi~s   plotsi~f {txt}{c |}
     {c LT}{hline 10}{c -}{hline 10}{c RT}
 10. {c |} {res}.6467006    .809372 {txt}{c |}
 11. {c |} {res}.9085008   1.214058 {txt}{c |}
 12. {c |} {res}1.673201    .809372 {txt}{c |}
     {c BLC}{hline 10}{c -}{hline 10}{c BRC}

{com}.                 pwcorr          plotsize_gps plotsize_self if plotsize_gps>0.6 & !missing(plotsize_gps)

             {txt}{c |} plotsi~s plotsi~f
{hline 13}{c +}{hline 18}
plotsize_gps {c |} {res}  1.0000 
{txt}plotsize_s~f {c |} {res} -0.2722   1.0000 
{txt}
{com}.          *** corr = -0.2722 (a real value!)
.          *** not going to drop anything here
.         ///////////////////////////////////////////////////////////////////////////
>         * low end
.                 tab                     plotsize_gps

        {txt}GPS {c |}
   Measured {c |}
       Area {c |}
 (Hectares) {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
       .045 {c |}{res}          1        8.33        8.33
{txt}   .1079001 {c |}{res}          1        8.33       16.67
{txt}   .1452001 {c |}{res}          1        8.33       25.00
{txt}   .1478001 {c |}{res}          1        8.33       33.33
{txt}   .2024002 {c |}{res}          1        8.33       41.67
{txt}   .2934003 {c |}{res}          1        8.33       50.00
{txt}   .4436004 {c |}{res}          1        8.33       58.33
{txt}   .5515005 {c |}{res}          1        8.33       66.67
{txt}   .5700005 {c |}{res}          1        8.33       75.00
{txt}   .6467006 {c |}{res}          1        8.33       83.33
{txt}   .9085008 {c |}{res}          1        8.33       91.67
{txt}   1.673201 {c |}{res}          1        8.33      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}         12      100.00
{txt}
{com}.                 sum                     plotsize_gps, detail

                {txt}GPS Measured Area (Hectares)
{hline 61}
      Percentiles      Smallest
 1%    {res}     .045           .045
{txt} 5%    {res}     .045       .1079001
{txt}10%    {res} .1079001       .1452001       {txt}Obs         {res}         12
{txt}25%    {res} .1465001       .1478001       {txt}Sum of Wgt. {res}         12

{txt}50%    {res} .3685003                      {txt}Mean          {res} .4779338
                        {txt}Largest       Std. Dev.     {res} .4584192
{txt}75%    {res} .6083505       .5700005
{txt}90%    {res} .9085008       .6467006       {txt}Variance      {res} .2101482
{txt}95%    {res} 1.673201       .9085008       {txt}Skewness      {res} 1.539129
{txt}99%    {res} 1.673201       1.673201       {txt}Kurtosis      {res}  4.85356
{txt}
{com}.                 *histogram      plotsize_gps if plotsize_gps < 0.11
.          *** mean = 0.478
.          *** 10% of obs < 0.11
.                 sum             plotsize_gps if plotsize_gps<0.11

{txt}    Variable {c |}        Obs        Mean    Std. Dev.       Min        Max
{hline 13}{c +}{hline 57}
plotsize_gps {c |}{res}          2    .0764501    .0444771       .045   .1079001
{txt}
{com}.          *** 2 obs < 0.11
.                 list            plotsize_gps plotsize_self if plotsize_gps<0.11 & !missing(plotsize_gps), sep(0)
{txt}
     {c TLC}{hline 10}{c -}{hline 10}{c TRC}
     {c |} {res}plotsi~s   plotsi~f {txt}{c |}
     {c LT}{hline 10}{c -}{hline 10}{c RT}
  1. {c |} {res}    .045   .1011715 {txt}{c |}
  2. {c |} {res}.1079001    .202343 {txt}{c |}
     {c BLC}{hline 10}{c -}{hline 10}{c BRC}

{com}.                 pwcorr          plotsize_gps plotsize_self if plotsize_gps<0.11 & !missing(plotsize_gps)

             {txt}{c |} plotsi~s plotsi~f
{hline 13}{c +}{hline 18}
plotsize_gps {c |} {res}  1.0000 
{txt}plotsize_s~f {c |} {res}  1.0000   1.0000 
{txt}
{com}.          *** corr = 1.000(again, 2 obs)
.                 sum             plotsize_gps if plotsize_gps<0.15

{txt}    Variable {c |}        Obs        Mean    Std. Dev.       Min        Max
{hline 13}{c +}{hline 57}
plotsize_gps {c |}{res}          4    .1114751    .0479187       .045   .1478001
{txt}
{com}.          *** 3 < 0.15
.                 list            plotsize_gps plotsize_self if plotsize_gps<0.15 & !missing(plotsize_gps), sep(0)
{txt}
     {c TLC}{hline 10}{c -}{hline 10}{c TRC}
     {c |} {res}plotsi~s   plotsi~f {txt}{c |}
     {c LT}{hline 10}{c -}{hline 10}{c RT}
  1. {c |} {res}    .045   .1011715 {txt}{c |}
  2. {c |} {res}.1079001    .202343 {txt}{c |}
  3. {c |} {res}.1452001    .202343 {txt}{c |}
  4. {c |} {res}.1478001   .1011715 {txt}{c |}
     {c BLC}{hline 10}{c -}{hline 10}{c BRC}

{com}.                 pwcorr          plotsize_gps plotsize_self if plotsize_gps<0.15 & !missing(plotsize_gps)

             {txt}{c |} plotsi~s plotsi~f
{hline 13}{c +}{hline 18}
plotsize_gps {c |} {res}  1.0000 
{txt}plotsize_s~f {c |} {res}  0.3633   1.0000 
{txt}
{com}.          *** corr = 0.3633 (a real value!)
.          *** again, won't be dropping anything
.          * for robustness, although no zero values in this set
.                 replace         plotsize_gps = . if plotsize_gps == 0
{txt}(0 real changes made)

{com}.         
. * must merge in regional identifiers from 2008_HHSECA to impute
.         merge           m:1 hhid using "$export/HH_SECA"
{res}
{txt}{col 5}Result{col 38}# of obs.
{col 5}{hline 41}
{col 5}not matched{col 30}{res}           3,201
{txt}{col 9}from master{col 30}{res}               0{txt}  (_merge==1)
{col 9}from using{col 30}{res}           3,201{txt}  (_merge==2)

{col 5}matched{col 30}{res}              86{txt}  (_merge==3)
{col 5}{hline 41}

{com}.         tab                     _merge

                 {txt}_merge {c |}      Freq.     Percent        Cum.
{hline 24}{c +}{hline 35}
         using only (2) {c |}{res}      3,201       97.38       97.38
{txt}            matched (3) {c |}{res}         86        2.62      100.00
{txt}{hline 24}{c +}{hline 35}
                  Total {c |}{res}      3,287      100.00
{txt}
{com}.  *** all obs in master are matched
.         drop            if _merge == 2
{txt}(3,201 observations deleted)

{com}.         drop            _merge
{txt}
{com}. * interrogating regional identifiers
.         sort            region
{txt}
{com}.         by region:      distinct district

{txt}{hline}
-> region = Arusha

{col 11}{c |}        Observations
{col 11}{c |}      total   distinct
{hline 10}{c +}{hline 22}
 district {c |}  {res}        3          2

{txt}{hline}
-> region = Kilimanjaro

{col 11}{c |}        Observations
{col 11}{c |}      total   distinct
{hline 10}{c +}{hline 22}
 district {c |}  {res}        3          2

{txt}{hline}
-> region = Morogoro

{col 11}{c |}        Observations
{col 11}{c |}      total   distinct
{hline 10}{c +}{hline 22}
 district {c |}  {res}        1          1

{txt}{hline}
-> region = Dar es salaam

{col 11}{c |}        Observations
{col 11}{c |}      total   distinct
{hline 10}{c +}{hline 22}
 district {c |}  {res}        2          1

{txt}{hline}
-> region = Lindi

{col 11}{c |}        Observations
{col 11}{c |}      total   distinct
{hline 10}{c +}{hline 22}
 district {c |}  {res}        2          1

{txt}{hline}
-> region = Iringa

{col 11}{c |}        Observations
{col 11}{c |}      total   distinct
{hline 10}{c +}{hline 22}
 district {c |}  {res}        1          1

{txt}{hline}
-> region = Mbeya

{col 11}{c |}        Observations
{col 11}{c |}      total   distinct
{hline 10}{c +}{hline 22}
 district {c |}  {res}        7          1

{txt}{hline}
-> region = Kigoma

{col 11}{c |}        Observations
{col 11}{c |}      total   distinct
{hline 10}{c +}{hline 22}
 district {c |}  {res}        8          3

{txt}{hline}
-> region = Shinyanga

{col 11}{c |}        Observations
{col 11}{c |}      total   distinct
{hline 10}{c +}{hline 22}
 district {c |}  {res}       33          7

{txt}{hline}
-> region = Kagera

{col 11}{c |}        Observations
{col 11}{c |}      total   distinct
{hline 10}{c +}{hline 22}
 district {c |}  {res}       13          5

{txt}{hline}
-> region = Mwanza

{col 11}{c |}        Observations
{col 11}{c |}      total   distinct
{hline 10}{c +}{hline 22}
 district {c |}  {res}        6          4

{txt}{hline}
-> region = Mara

{col 11}{c |}        Observations
{col 11}{c |}      total   distinct
{hline 10}{c +}{hline 22}
 district {c |}  {res}        2          2

{txt}{hline}
-> region = Manyara

{col 11}{c |}        Observations
{col 11}{c |}      total   distinct
{hline 10}{c +}{hline 22}
 district {c |}  {res}        1          1

{txt}{hline}
-> region = KASKAZINI UNGUJA

{col 11}{c |}        Observations
{col 11}{c |}      total   distinct
{hline 10}{c +}{hline 22}
 district {c |}  {res}        3          2

{txt}{hline}
-> region = MJINI/MAGHARIBI UNGUJA

{col 11}{c |}        Observations
{col 11}{c |}      total   distinct
{hline 10}{c +}{hline 22}
 district {c |}  {res}        1          1
{txt}
{com}.  *** 126 distinct districts
. * unique district id
.         tostring        region, generate(reg_num) 
{txt}reg_num generated as {res:str2}

{com}.         tostring        district, generate(dist_num)
{txt}dist_num generated as {res:str1}

{com}.         generate        uq_dist = reg_num + dist_num
{txt}
{com}.         distinct        uq_dist

{txt}{col 10}{c |}        Observations
{col 10}{c |}      total   distinct
{hline 9}{c +}{hline 22}
 uq_dist {c |}  {res}       86         34
{txt}
{com}.         sort            region district
{txt}
{com}.         destring        uq_dist, replace
{txt}uq_dist: all characters numeric; {res}replaced {txt}as {res}int
{txt}
{com}.  *** 126 once again, good deal
.         drop            reg_num dist_num
{txt}
{com}.         
. * impute missing + irregular plot sizes using predictive mean matching 
. * including plotsize_self as control
.         mi set          wide    // declare the data to be wide.
{txt}
{com}.         mi xtset, clear         // this is a precautinary step to clear any xtset that the analyst may have had in place previously
{res}{txt}
{com}.         mi register     imputed plotsize_gps // identify plotsize_GPS as the variable being imputed
{res}{txt}
{com}.         mi impute       pmm plotsize_gps plotsize_self i.uq_dist, add(1) rseed(245780) noisily dots force knn(5) bootstrap
{res}
{txt}Imputing {it:m}=1:
{col 3}{res}
{txt}Running {bf:regress} on bootstrap sample:

{p 0 6 2}note: 194.uq_dist omitted because of collinearity{p_end}

      Source {c |}       SS           df       MS      Number of obs   ={res}        12
{txt}{hline 13}{c +}{hline 34}   F(5, 6)         = {res}   542.05
{txt}       Model {c |} {res} 1.00995454         5  .201990908   {txt}Prob > F        ={res}    0.0000
{txt}    Residual {c |} {res} .002235874         6  .000372646   {txt}R-squared       ={res}    0.9978
{txt}{hline 13}{c +}{hline 34}   Adj R-squared   ={res}    0.9960
{txt}       Total {c |} {res} 1.01219042        11  .092017311   {txt}Root MSE        =   {res}  .0193

{txt}{hline 14}{c TT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{col 1} plotsize_gps{col 15}{c |}      Coef.{col 27}   Std. Err.{col 39}      t{col 47}   P>|t|{col 55}     [95% Con{col 68}f. Interval]
{hline 14}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
plotsize_self {c |}{col 15}{res}{space 2}-.7991388{col 27}{space 2} .1457297{col 38}{space 1}   -5.48{col 47}{space 3}0.002{col 55}{space 4}-1.155727{col 68}{space 3}-.4425509
{txt}{space 13} {c |}
{space 6}uq_dist {c |}
{space 9}128  {c |}{col 15}{res}{space 2}-.1437501{col 27}{space 2} .0215826{col 38}{space 1}   -6.66{col 47}{space 3}0.001{col 55}{space 4}-.1965608{col 68}{space 3}-.0909395
{txt}{space 9}178  {c |}{col 15}{res}{space 2} 1.609101{col 27}{space 2} .1566286{col 38}{space 1}   10.27{col 47}{space 3}0.000{col 55}{space 4} 1.225845{col 68}{space 3} 1.992358
{txt}{space 9}181  {c |}{col 15}{res}{space 2}    .0373{col 27}{space 2} .0222904{col 38}{space 1}    1.67{col 47}{space 3}0.145{col 55}{space 4}-.0172425{col 68}{space 3} .0918426
{txt}{space 9}184  {c |}{col 15}{res}{space 2} .4974004{col 27}{space 2} .0431651{col 38}{space 1}   11.52{col 47}{space 3}0.000{col 55}{space 4} .3917792{col 68}{space 3} .6030217
{txt}{space 9}194  {c |}{col 15}{res}{space 2}        0{col 27}{txt}  (omitted)
{space 13} {c |}
{space 8}_cons {c |}{col 15}{res}{space 2} .2696002{col 27}{space 2} .0222904{col 38}{space 1}   12.09{col 47}{space 3}0.000{col 55}{space 4} .2150577{col 68}{space 3} .3241428
{txt}{hline 14}{c BT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{res}{txt}. done
{res}{txt}
Univariate imputation{txt}{col 45}{ralign 12:Imputations }= {res}       1
{txt}Predictive mean matching{txt}{col 45}{ralign 12:added }= {res}       1
{txt}Imputed: {it:m}=1{txt}{col 45}{ralign 12:updated }= {res}       0

{txt}{col 39}{ralign 12:Nearest neighbors }= {res}       5

{txt}{hline 19}{c TT}{hline 35}{hline 11}
{txt}{col 20}{c |}{center 46:  Observations per {it:m}}
{txt}{col 20}{c LT}{hline 35}{c TT}{hline 10}
{txt}{col 11}Variable {c |}{ralign 12:Complete }{ralign 13:Incomplete }{ralign 10:Imputed }{c |}{ralign 10:Total}
{hline 19}{c +}{hline 35}{c +}{hline 10}
{txt}{ralign 19:plotsize_gps }{c |}{res}         12           74        74 {txt}{c |}{res}        86
{txt}{hline 19}{c BT}{hline 35}{c BT}{hline 10}
{p 0 1 1 66}(complete + incomplete = total; imputed is the minimum across {it:m}
 of the number of filled-in observations.){p_end}

{txt}Note: Posterior parameters obtained using {help mi_boot_note:sampling with replacement}.
{res}{txt}
{com}.         mi                      unset

{txt}{col 13}variables
{col 5}original{col 23}new{col 42}meaning
    {hline 71}
{col 5}_mi_miss{col 23}mi_miss{col 42}0=orig-complete, 1=orig-incomplete
{col 5}_#_plotsize_gps{col 23}plotsize_gps_#_{col 42}imputed values of plotsize_gps
    {hline 71}
{col 5}# = 1

{com}. 
. * how did the imputation go?
.         tab                     mi_miss

 {txt}Incomplete {c |}
observation {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          0 {c |}{res}         12       13.95       13.95
{txt}          1 {c |}{res}         74       86.05      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}         86      100.00
{txt}
{com}.         pwcorr          plotsize_gps plotsize_gps_1_ if plotsize_gps != .

             {txt}{c |} plotsi~s plots~1_
{hline 13}{c +}{hline 18}
plotsize_gps {c |} {res}  1.0000 
{txt}plotsize_~1_ {c |} {res}  1.0000   1.0000 
{txt}
{com}.         tabstat         plotsize_gps plotsize_self plotsize_gps_1_, by(mi_miss) statistics(n mean min max) columns(statistics) longstub format(%9.3g) 

{txt}{lalign 8:mi_miss} {...}
{ralign 12:variable} {...}
{c |}         N      mean       min       max
{hline 22}{c +}{hline 40}
{lalign 8:0} {...}
{ralign 12:plotsize_gps} {...}
{c |}{...}
 {res}       12      .478      .045      1.67
{space 8} {...}
{txt}{ralign 12:plotsize_s~f} {...}
{c |}{...}
 {res}       12       .43      .101      1.21
{space 8} {...}
{txt}{ralign 12:plotsize_~1_} {...}
{c |}{...}
 {res}       12      .478      .045      1.67
{txt}{hline 22}{c +}{hline 40}
{lalign 8:1} {...}
{ralign 12:plotsize_gps} {...}
{c |}{...}
 {res}        0         .         .         .
{space 8} {...}
{txt}{ralign 12:plotsize_s~f} {...}
{c |}{...}
 {res}       74      .501     .0809      2.83
{space 8} {...}
{txt}{ralign 12:plotsize_~1_} {...}
{c |}{...}
 {res}       74      .265      .045      .909
{txt}{hline 22}{c +}{hline 40}
{lalign 8:Total} {...}
{ralign 12:plotsize_gps} {...}
{c |}{...}
 {res}       12      .478      .045      1.67
{space 8} {...}
{txt}{ralign 12:plotsize_s~f} {...}
{c |}{...}
 {res}       86      .492     .0809      2.83
{space 8} {...}
{txt}{ralign 12:plotsize_~1_} {...}
{c |}{...}
 {res}       86      .295      .045      1.67
{txt}{hline 22}{c BT}{hline 40}

{com}.         rename          plotsize_gps_1_ plotsize        
{res}{txt}
{com}.         
. * generate seasonal variable
.         generate        season = 0
{txt}
{com}. 
. * keep what we want, get rid of the rest
.         keep            hhid plot_id plotsize season
{txt}
{com}. 
. *       Prepare for export
. compress
  {txt}variable {bf}season{sf} was {bf}{res}float{sf}{txt} now {bf}{res}byte{sf}
{txt}  (258 bytes saved)

{com}. describe

{txt}Contains data from {res}G:/My Drive/weather_project/household_data/tanzania/wave_1/raw/SEC_2B.dta
{txt}  obs:{res}            86                          
{txt} vars:{res}             4                          28 May 2011 14:43
                                              (_dta has notes)
{txt}{hline}
              storage   display    value
variable name   type    format     label      variable label
{hline}
{p 0 48}{res}{bind:hhid           }{txt}{bind: str14   }{bind:{txt}%14s      }{space 1}{bind:         }{bind:  }{res}{res}Unique HH Identifier{p_end}
{p 0 48}{bind:plot_id        }{txt}{bind: str17   }{bind:{txt}%17s      }{space 1}{bind:         }{bind:  }{res}{res}{p_end}
{p 0 48}{bind:plotsize       }{txt}{bind: float   }{bind:{txt}%9.0g     }{space 1}{bind:         }{bind:  }{res}{res}{p_end}
{p 0 48}{bind:season         }{txt}{bind: byte    }{bind:{txt}%9.0g     }{space 1}{bind:         }{bind:  }{res}{res}{p_end}
{txt}{hline}
Sorted by: 
{res}     Note: Dataset has changed since last saved.
{txt}
{com}. summarize 

{txt}    Variable {c |}        Obs        Mean    Std. Dev.       Min        Max
{hline 13}{c +}{hline 57}
{space 8}hhid {c |}{res}          0
{txt}{space 5}plot_id {c |}{res}          0
{txt}{space 4}plotsize {c |}{res}         86     .294641    .2679101       .045   1.673201
{txt}{space 6}season {c |}{res}         86           0           0          0          0
{txt}
{com}. sort plot_id
{txt}
{com}. customsave , idvar(plot_id) filename(AG_SEC2B.dta) path("$export") dofile(2008_AGSEC2B) user($user)
 with do file 2008_AGSEC2B by user themacfreezie using computer Torbit

{txt}
{com}. 
. * close the log
.         log     close
      {txt}name:  {res}<unnamed>
       {txt}log:  {res}C:/Users/themacfreezie/git/weather_project/tanzania/household_code/logs/wv1_AGSEC2B.smcl
  {txt}log type:  {res}smcl
 {txt}closed on:  {res}16 May 2020, 20:54:08
{txt}{.-}
{smcl}
{txt}{sf}{ul off}{smcl}
{com}{sf}{ul off}{txt}{.-}
      name:  {res}<unnamed>
       {txt}log:  {res}C:/Users/themacfreezie/git/weather_project/tanzania/household_code/logs/wv1_AGSEC2B.smcl
  {txt}log type:  {res}smcl
 {txt}opened on:  {res}16 May 2020, 20:54:59
{txt}
{com}. 
. 
. **********************************************************************************
. **      TZA 2008 (Wave 1) - Agriculture Section 2B 
. **********************************************************************************
. 
. * load data
.         use             "$root/SEC_2B", clear
{txt}
{com}. 
. * generate unique ob id 
.         generate        plot_id = hhid + " " + plotnum
{txt}
{com}.         isid            plot_id
{txt}
{com}.         
. * rename variables of interest (plotsizes)
.         rename          s2bq9 plotsize_self_ac
{res}{txt}
{com}.         rename          area plotsize_gps_ac
{res}{txt}
{com}.         
. * convert from acres to hectares
.         generate        plotsize_self = plotsize_self_ac * 0.404686
{txt}
{com}.         label           var plotsize_self "Self-reported Area (Hectares)"
{txt}
{com}.         generate        plotsize_gps = plotsize_gps_ac * 0.404686
{txt}(74 missing values generated)

{com}.         label           var plotsize_gps "GPS Measured Area (Hectares)"
{txt}
{com}.         drop            plotsize_gps_ac plotsize_self_ac
{txt}
{com}.         
. * interrogating plotsize variables
.         count           if plotsize_gps != . & plotsize_self != .
  {res}12
{txt}
{com}.  *** 12 not mising, out of 86
.         pwcorr          plotsize_gps plotsize_self

             {txt}{c |} plotsi~s plotsi~f
{hline 13}{c +}{hline 18}
plotsize_gps {c |} {res}  1.0000 
{txt}plotsize_s~f {c |} {res}  0.7817   1.0000 
{txt}
{com}.  *** high correlation (0.7817)
. * inverstingating the high and low end of gps measurments
.         * high end
.                 tab                     plotsize_gps

        {txt}GPS {c |}
   Measured {c |}
       Area {c |}
 (Hectares) {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
       .045 {c |}{res}          1        8.33        8.33
{txt}   .1079001 {c |}{res}          1        8.33       16.67
{txt}   .1452001 {c |}{res}          1        8.33       25.00
{txt}   .1478001 {c |}{res}          1        8.33       33.33
{txt}   .2024002 {c |}{res}          1        8.33       41.67
{txt}   .2934003 {c |}{res}          1        8.33       50.00
{txt}   .4436004 {c |}{res}          1        8.33       58.33
{txt}   .5515005 {c |}{res}          1        8.33       66.67
{txt}   .5700005 {c |}{res}          1        8.33       75.00
{txt}   .6467006 {c |}{res}          1        8.33       83.33
{txt}   .9085008 {c |}{res}          1        8.33       91.67
{txt}   1.673201 {c |}{res}          1        8.33      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}         12      100.00
{txt}
{com}.                 sum                     plotsize_gps, detail

                {txt}GPS Measured Area (Hectares)
{hline 61}
      Percentiles      Smallest
 1%    {res}     .045           .045
{txt} 5%    {res}     .045       .1079001
{txt}10%    {res} .1079001       .1452001       {txt}Obs         {res}         12
{txt}25%    {res} .1465001       .1478001       {txt}Sum of Wgt. {res}         12

{txt}50%    {res} .3685003                      {txt}Mean          {res} .4779338
                        {txt}Largest       Std. Dev.     {res} .4584192
{txt}75%    {res} .6083505       .5700005
{txt}90%    {res} .9085008       .6467006       {txt}Variance      {res} .2101482
{txt}95%    {res} 1.673201       .9085008       {txt}Skewness      {res} 1.539129
{txt}99%    {res} 1.673201       1.673201       {txt}Kurtosis      {res}  4.85356
{txt}
{com}.                 *histogram      plotsize_gps if plotsize_gps > .9
.          *** mean = 0.478
.          *** 90% of obs < .9
.                 sort            plotsize_gps
{txt}
{com}.                 sum             plotsize_gps if plotsize_gps>0.9

{txt}    Variable {c |}        Obs        Mean    Std. Dev.       Min        Max
{hline 13}{c +}{hline 57}
plotsize_gps {c |}{res}          2    1.290851     .540725   .9085008   1.673201
{txt}
{com}.          *** 2 obs > 0.9
.                 list            plotsize_gps plotsize_self if plotsize_gps>0.9 & !missing(plotsize_gps), sep(0)
{txt}
     {c TLC}{hline 10}{c -}{hline 10}{c TRC}
     {c |} {res}plotsi~s   plotsi~f {txt}{c |}
     {c LT}{hline 10}{c -}{hline 10}{c RT}
 11. {c |} {res}.9085008   1.214058 {txt}{c |}
 12. {c |} {res}1.673201    .809372 {txt}{c |}
     {c BLC}{hline 10}{c -}{hline 10}{c BRC}

{com}.                 pwcorr          plotsize_gps plotsize_self if plotsize_gps>0.9 & !missing(plotsize_gps)

             {txt}{c |} plotsi~s plotsi~f
{hline 13}{c +}{hline 18}
plotsize_gps {c |} {res}  1.0000 
{txt}plotsize_s~f {c |} {res} -1.0000   1.0000 
{txt}
{com}.          *** corr = -1.0000 (kind of weird, is this because there are only 2 obs?)
.                 sum             plotsize_gps if plotsize_gps>0.6

{txt}    Variable {c |}        Obs        Mean    Std. Dev.       Min        Max
{hline 13}{c +}{hline 57}
plotsize_gps {c |}{res}          3    1.076134    .5333871   .6467006   1.673201
{txt}
{com}.          *** 3 obs > 0.6
.                 list            plotsize_gps plotsize_self if plotsize_gps>0.6 & !missing(plotsize_gps), sep(0)
{txt}
     {c TLC}{hline 10}{c -}{hline 10}{c TRC}
     {c |} {res}plotsi~s   plotsi~f {txt}{c |}
     {c LT}{hline 10}{c -}{hline 10}{c RT}
 10. {c |} {res}.6467006    .809372 {txt}{c |}
 11. {c |} {res}.9085008   1.214058 {txt}{c |}
 12. {c |} {res}1.673201    .809372 {txt}{c |}
     {c BLC}{hline 10}{c -}{hline 10}{c BRC}

{com}.                 pwcorr          plotsize_gps plotsize_self if plotsize_gps>0.6 & !missing(plotsize_gps)

             {txt}{c |} plotsi~s plotsi~f
{hline 13}{c +}{hline 18}
plotsize_gps {c |} {res}  1.0000 
{txt}plotsize_s~f {c |} {res} -0.2722   1.0000 
{txt}
{com}.          *** corr = -0.2722 (a real value!)
.          *** not going to drop anything here
.         ///////////////////////////////////////////////////////////////////////////
>         * low end
.                 tab                     plotsize_gps

        {txt}GPS {c |}
   Measured {c |}
       Area {c |}
 (Hectares) {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
       .045 {c |}{res}          1        8.33        8.33
{txt}   .1079001 {c |}{res}          1        8.33       16.67
{txt}   .1452001 {c |}{res}          1        8.33       25.00
{txt}   .1478001 {c |}{res}          1        8.33       33.33
{txt}   .2024002 {c |}{res}          1        8.33       41.67
{txt}   .2934003 {c |}{res}          1        8.33       50.00
{txt}   .4436004 {c |}{res}          1        8.33       58.33
{txt}   .5515005 {c |}{res}          1        8.33       66.67
{txt}   .5700005 {c |}{res}          1        8.33       75.00
{txt}   .6467006 {c |}{res}          1        8.33       83.33
{txt}   .9085008 {c |}{res}          1        8.33       91.67
{txt}   1.673201 {c |}{res}          1        8.33      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}         12      100.00
{txt}
{com}.                 sum                     plotsize_gps, detail

                {txt}GPS Measured Area (Hectares)
{hline 61}
      Percentiles      Smallest
 1%    {res}     .045           .045
{txt} 5%    {res}     .045       .1079001
{txt}10%    {res} .1079001       .1452001       {txt}Obs         {res}         12
{txt}25%    {res} .1465001       .1478001       {txt}Sum of Wgt. {res}         12

{txt}50%    {res} .3685003                      {txt}Mean          {res} .4779338
                        {txt}Largest       Std. Dev.     {res} .4584192
{txt}75%    {res} .6083505       .5700005
{txt}90%    {res} .9085008       .6467006       {txt}Variance      {res} .2101482
{txt}95%    {res} 1.673201       .9085008       {txt}Skewness      {res} 1.539129
{txt}99%    {res} 1.673201       1.673201       {txt}Kurtosis      {res}  4.85356
{txt}
{com}.                 *histogram      plotsize_gps if plotsize_gps < 0.11
.          *** mean = 0.478
.          *** 10% of obs < 0.11
.                 sum             plotsize_gps if plotsize_gps<0.11

{txt}    Variable {c |}        Obs        Mean    Std. Dev.       Min        Max
{hline 13}{c +}{hline 57}
plotsize_gps {c |}{res}          2    .0764501    .0444771       .045   .1079001
{txt}
{com}.          *** 2 obs < 0.11
.                 list            plotsize_gps plotsize_self if plotsize_gps<0.11 & !missing(plotsize_gps), sep(0)
{txt}
     {c TLC}{hline 10}{c -}{hline 10}{c TRC}
     {c |} {res}plotsi~s   plotsi~f {txt}{c |}
     {c LT}{hline 10}{c -}{hline 10}{c RT}
  1. {c |} {res}    .045   .1011715 {txt}{c |}
  2. {c |} {res}.1079001    .202343 {txt}{c |}
     {c BLC}{hline 10}{c -}{hline 10}{c BRC}

{com}.                 pwcorr          plotsize_gps plotsize_self if plotsize_gps<0.11 & !missing(plotsize_gps)

             {txt}{c |} plotsi~s plotsi~f
{hline 13}{c +}{hline 18}
plotsize_gps {c |} {res}  1.0000 
{txt}plotsize_s~f {c |} {res}  1.0000   1.0000 
{txt}
{com}.          *** corr = 1.000(again, 2 obs)
.                 sum             plotsize_gps if plotsize_gps<0.15

{txt}    Variable {c |}        Obs        Mean    Std. Dev.       Min        Max
{hline 13}{c +}{hline 57}
plotsize_gps {c |}{res}          4    .1114751    .0479187       .045   .1478001
{txt}
{com}.          *** 3 < 0.15
.                 list            plotsize_gps plotsize_self if plotsize_gps<0.15 & !missing(plotsize_gps), sep(0)
{txt}
     {c TLC}{hline 10}{c -}{hline 10}{c TRC}
     {c |} {res}plotsi~s   plotsi~f {txt}{c |}
     {c LT}{hline 10}{c -}{hline 10}{c RT}
  1. {c |} {res}    .045   .1011715 {txt}{c |}
  2. {c |} {res}.1079001    .202343 {txt}{c |}
  3. {c |} {res}.1452001    .202343 {txt}{c |}
  4. {c |} {res}.1478001   .1011715 {txt}{c |}
     {c BLC}{hline 10}{c -}{hline 10}{c BRC}

{com}.                 pwcorr          plotsize_gps plotsize_self if plotsize_gps<0.15 & !missing(plotsize_gps)

             {txt}{c |} plotsi~s plotsi~f
{hline 13}{c +}{hline 18}
plotsize_gps {c |} {res}  1.0000 
{txt}plotsize_s~f {c |} {res}  0.3633   1.0000 
{txt}
{com}.          *** corr = 0.3633 (a real value!)
.          *** again, won't be dropping anything
.          * for robustness, although no zero values in this set
.                 replace         plotsize_gps = . if plotsize_gps == 0
{txt}(0 real changes made)

{com}.         
. * must merge in regional identifiers from 2008_HHSECA to impute
.         merge           m:1 hhid using "$export/HH_SECA"
{res}
{txt}{col 5}Result{col 38}# of obs.
{col 5}{hline 41}
{col 5}not matched{col 30}{res}           3,201
{txt}{col 9}from master{col 30}{res}               0{txt}  (_merge==1)
{col 9}from using{col 30}{res}           3,201{txt}  (_merge==2)

{col 5}matched{col 30}{res}              86{txt}  (_merge==3)
{col 5}{hline 41}

{com}.         tab                     _merge

                 {txt}_merge {c |}      Freq.     Percent        Cum.
{hline 24}{c +}{hline 35}
         using only (2) {c |}{res}      3,201       97.38       97.38
{txt}            matched (3) {c |}{res}         86        2.62      100.00
{txt}{hline 24}{c +}{hline 35}
                  Total {c |}{res}      3,287      100.00
{txt}
{com}.  *** all obs in master are matched
.         drop            if _merge == 2
{txt}(3,201 observations deleted)

{com}.         drop            _merge
{txt}
{com}. * interrogating regional identifiers
.         sort            region
{txt}
{com}.         by region:      distinct district

{txt}{hline}
-> region = Arusha

{col 11}{c |}        Observations
{col 11}{c |}      total   distinct
{hline 10}{c +}{hline 22}
 district {c |}  {res}        3          2

{txt}{hline}
-> region = Kilimanjaro

{col 11}{c |}        Observations
{col 11}{c |}      total   distinct
{hline 10}{c +}{hline 22}
 district {c |}  {res}        3          2

{txt}{hline}
-> region = Morogoro

{col 11}{c |}        Observations
{col 11}{c |}      total   distinct
{hline 10}{c +}{hline 22}
 district {c |}  {res}        1          1

{txt}{hline}
-> region = Dar es salaam

{col 11}{c |}        Observations
{col 11}{c |}      total   distinct
{hline 10}{c +}{hline 22}
 district {c |}  {res}        2          1

{txt}{hline}
-> region = Lindi

{col 11}{c |}        Observations
{col 11}{c |}      total   distinct
{hline 10}{c +}{hline 22}
 district {c |}  {res}        2          1

{txt}{hline}
-> region = Iringa

{col 11}{c |}        Observations
{col 11}{c |}      total   distinct
{hline 10}{c +}{hline 22}
 district {c |}  {res}        1          1

{txt}{hline}
-> region = Mbeya

{col 11}{c |}        Observations
{col 11}{c |}      total   distinct
{hline 10}{c +}{hline 22}
 district {c |}  {res}        7          1

{txt}{hline}
-> region = Kigoma

{col 11}{c |}        Observations
{col 11}{c |}      total   distinct
{hline 10}{c +}{hline 22}
 district {c |}  {res}        8          3

{txt}{hline}
-> region = Shinyanga

{col 11}{c |}        Observations
{col 11}{c |}      total   distinct
{hline 10}{c +}{hline 22}
 district {c |}  {res}       33          7

{txt}{hline}
-> region = Kagera

{col 11}{c |}        Observations
{col 11}{c |}      total   distinct
{hline 10}{c +}{hline 22}
 district {c |}  {res}       13          5

{txt}{hline}
-> region = Mwanza

{col 11}{c |}        Observations
{col 11}{c |}      total   distinct
{hline 10}{c +}{hline 22}
 district {c |}  {res}        6          4

{txt}{hline}
-> region = Mara

{col 11}{c |}        Observations
{col 11}{c |}      total   distinct
{hline 10}{c +}{hline 22}
 district {c |}  {res}        2          2

{txt}{hline}
-> region = Manyara

{col 11}{c |}        Observations
{col 11}{c |}      total   distinct
{hline 10}{c +}{hline 22}
 district {c |}  {res}        1          1

{txt}{hline}
-> region = KASKAZINI UNGUJA

{col 11}{c |}        Observations
{col 11}{c |}      total   distinct
{hline 10}{c +}{hline 22}
 district {c |}  {res}        3          2

{txt}{hline}
-> region = MJINI/MAGHARIBI UNGUJA

{col 11}{c |}        Observations
{col 11}{c |}      total   distinct
{hline 10}{c +}{hline 22}
 district {c |}  {res}        1          1
{txt}
{com}.  *** 126 distinct districts
. * unique district id
.         tostring        region, generate(reg_num) 
{txt}reg_num generated as {res:str2}

{com}.         tostring        district, generate(dist_num)
{txt}dist_num generated as {res:str1}

{com}.         generate        uq_dist = reg_num + dist_num
{txt}
{com}.         distinct        uq_dist

{txt}{col 10}{c |}        Observations
{col 10}{c |}      total   distinct
{hline 9}{c +}{hline 22}
 uq_dist {c |}  {res}       86         34
{txt}
{com}.         sort            region district
{txt}
{com}.         destring        uq_dist, replace
{txt}uq_dist: all characters numeric; {res}replaced {txt}as {res}int
{txt}
{com}.  *** 126 once again, good deal
.         drop            reg_num dist_num
{txt}
{com}.         
. * impute missing + irregular plot sizes using predictive mean matching 
. * including plotsize_self as control
.         mi set          wide    // declare the data to be wide.
{txt}
{com}.         mi xtset, clear         // this is a precautinary step to clear any xtset that the analyst may have had in place previously
{res}{txt}
{com}.         mi register     imputed plotsize_gps // identify plotsize_GPS as the variable being imputed
{res}{txt}
{com}.         mi impute       pmm plotsize_gps plotsize_self i.uq_dist, add(1) rseed(245780) noisily dots force knn(5) bootstrap
{res}
{txt}Imputing {it:m}=1:
{col 3}{res}
{txt}Running {bf:regress} on bootstrap sample:

{p 0 6 2}note: 194.uq_dist omitted because of collinearity{p_end}

      Source {c |}       SS           df       MS      Number of obs   ={res}        12
{txt}{hline 13}{c +}{hline 34}   F(5, 6)         = {res}   542.05
{txt}       Model {c |} {res} 1.00995454         5  .201990908   {txt}Prob > F        ={res}    0.0000
{txt}    Residual {c |} {res} .002235874         6  .000372646   {txt}R-squared       ={res}    0.9978
{txt}{hline 13}{c +}{hline 34}   Adj R-squared   ={res}    0.9960
{txt}       Total {c |} {res} 1.01219042        11  .092017311   {txt}Root MSE        =   {res}  .0193

{txt}{hline 14}{c TT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{col 1} plotsize_gps{col 15}{c |}      Coef.{col 27}   Std. Err.{col 39}      t{col 47}   P>|t|{col 55}     [95% Con{col 68}f. Interval]
{hline 14}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
plotsize_self {c |}{col 15}{res}{space 2}-.7991388{col 27}{space 2} .1457297{col 38}{space 1}   -5.48{col 47}{space 3}0.002{col 55}{space 4}-1.155727{col 68}{space 3}-.4425509
{txt}{space 13} {c |}
{space 6}uq_dist {c |}
{space 9}128  {c |}{col 15}{res}{space 2}-.1437501{col 27}{space 2} .0215826{col 38}{space 1}   -6.66{col 47}{space 3}0.001{col 55}{space 4}-.1965608{col 68}{space 3}-.0909395
{txt}{space 9}178  {c |}{col 15}{res}{space 2} 1.609101{col 27}{space 2} .1566286{col 38}{space 1}   10.27{col 47}{space 3}0.000{col 55}{space 4} 1.225845{col 68}{space 3} 1.992358
{txt}{space 9}181  {c |}{col 15}{res}{space 2}    .0373{col 27}{space 2} .0222904{col 38}{space 1}    1.67{col 47}{space 3}0.145{col 55}{space 4}-.0172425{col 68}{space 3} .0918426
{txt}{space 9}184  {c |}{col 15}{res}{space 2} .4974004{col 27}{space 2} .0431651{col 38}{space 1}   11.52{col 47}{space 3}0.000{col 55}{space 4} .3917792{col 68}{space 3} .6030217
{txt}{space 9}194  {c |}{col 15}{res}{space 2}        0{col 27}{txt}  (omitted)
{space 13} {c |}
{space 8}_cons {c |}{col 15}{res}{space 2} .2696002{col 27}{space 2} .0222904{col 38}{space 1}   12.09{col 47}{space 3}0.000{col 55}{space 4} .2150577{col 68}{space 3} .3241428
{txt}{hline 14}{c BT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{res}{txt}. done
{res}{txt}
Univariate imputation{txt}{col 45}{ralign 12:Imputations }= {res}       1
{txt}Predictive mean matching{txt}{col 45}{ralign 12:added }= {res}       1
{txt}Imputed: {it:m}=1{txt}{col 45}{ralign 12:updated }= {res}       0

{txt}{col 39}{ralign 12:Nearest neighbors }= {res}       5

{txt}{hline 19}{c TT}{hline 35}{hline 11}
{txt}{col 20}{c |}{center 46:  Observations per {it:m}}
{txt}{col 20}{c LT}{hline 35}{c TT}{hline 10}
{txt}{col 11}Variable {c |}{ralign 12:Complete }{ralign 13:Incomplete }{ralign 10:Imputed }{c |}{ralign 10:Total}
{hline 19}{c +}{hline 35}{c +}{hline 10}
{txt}{ralign 19:plotsize_gps }{c |}{res}         12           74        74 {txt}{c |}{res}        86
{txt}{hline 19}{c BT}{hline 35}{c BT}{hline 10}
{p 0 1 1 66}(complete + incomplete = total; imputed is the minimum across {it:m}
 of the number of filled-in observations.){p_end}

{txt}Note: Posterior parameters obtained using {help mi_boot_note:sampling with replacement}.
{res}{txt}
{com}.         mi                      unset

{txt}{col 13}variables
{col 5}original{col 23}new{col 42}meaning
    {hline 71}
{col 5}_mi_miss{col 23}mi_miss{col 42}0=orig-complete, 1=orig-incomplete
{col 5}_#_plotsize_gps{col 23}plotsize_gps_#_{col 42}imputed values of plotsize_gps
    {hline 71}
{col 5}# = 1

{com}. 
. * how did the imputation go?
.         tab                     mi_miss

 {txt}Incomplete {c |}
observation {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          0 {c |}{res}         12       13.95       13.95
{txt}          1 {c |}{res}         74       86.05      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}         86      100.00
{txt}
{com}.         pwcorr          plotsize_gps plotsize_gps_1_ if plotsize_gps != .

             {txt}{c |} plotsi~s plots~1_
{hline 13}{c +}{hline 18}
plotsize_gps {c |} {res}  1.0000 
{txt}plotsize_~1_ {c |} {res}  1.0000   1.0000 
{txt}
{com}.         tabstat         plotsize_gps plotsize_self plotsize_gps_1_, by(mi_miss) statistics(n mean min max) columns(statistics) longstub format(%9.3g) 

{txt}{lalign 8:mi_miss} {...}
{ralign 12:variable} {...}
{c |}         N      mean       min       max
{hline 22}{c +}{hline 40}
{lalign 8:0} {...}
{ralign 12:plotsize_gps} {...}
{c |}{...}
 {res}       12      .478      .045      1.67
{space 8} {...}
{txt}{ralign 12:plotsize_s~f} {...}
{c |}{...}
 {res}       12       .43      .101      1.21
{space 8} {...}
{txt}{ralign 12:plotsize_~1_} {...}
{c |}{...}
 {res}       12      .478      .045      1.67
{txt}{hline 22}{c +}{hline 40}
{lalign 8:1} {...}
{ralign 12:plotsize_gps} {...}
{c |}{...}
 {res}        0         .         .         .
{space 8} {...}
{txt}{ralign 12:plotsize_s~f} {...}
{c |}{...}
 {res}       74      .501     .0809      2.83
{space 8} {...}
{txt}{ralign 12:plotsize_~1_} {...}
{c |}{...}
 {res}       74      .291      .045      1.67
{txt}{hline 22}{c +}{hline 40}
{lalign 8:Total} {...}
{ralign 12:plotsize_gps} {...}
{c |}{...}
 {res}       12      .478      .045      1.67
{space 8} {...}
{txt}{ralign 12:plotsize_s~f} {...}
{c |}{...}
 {res}       86      .492     .0809      2.83
{space 8} {...}
{txt}{ralign 12:plotsize_~1_} {...}
{c |}{...}
 {res}       86      .317      .045      1.67
{txt}{hline 22}{c BT}{hline 40}

{com}.         rename          plotsize_gps_1_ plotsize        
{res}{txt}
{com}.         
. * generate seasonal variable
.         generate        season = 0
{txt}
{com}. 
. * keep what we want, get rid of the rest
.         keep            hhid plot_id plotsize season
{txt}
{com}. 
. *       Prepare for export
. compress
  {txt}variable {bf}season{sf} was {bf}{res}float{sf}{txt} now {bf}{res}byte{sf}
{txt}  (258 bytes saved)

{com}. describe

{txt}Contains data from {res}G:/My Drive/weather_project/household_data/tanzania/wave_1/raw/SEC_2B.dta
{txt}  obs:{res}            86                          
{txt} vars:{res}             4                          28 May 2011 14:43
                                              (_dta has notes)
{txt}{hline}
              storage   display    value
variable name   type    format     label      variable label
{hline}
{p 0 48}{res}{bind:hhid           }{txt}{bind: str14   }{bind:{txt}%14s      }{space 1}{bind:         }{bind:  }{res}{res}Unique HH Identifier{p_end}
{p 0 48}{bind:plot_id        }{txt}{bind: str17   }{bind:{txt}%17s      }{space 1}{bind:         }{bind:  }{res}{res}{p_end}
{p 0 48}{bind:plotsize       }{txt}{bind: float   }{bind:{txt}%9.0g     }{space 1}{bind:         }{bind:  }{res}{res}{p_end}
{p 0 48}{bind:season         }{txt}{bind: byte    }{bind:{txt}%9.0g     }{space 1}{bind:         }{bind:  }{res}{res}{p_end}
{txt}{hline}
Sorted by: 
{res}     Note: Dataset has changed since last saved.
{txt}
{com}. summarize 

{txt}    Variable {c |}        Obs        Mean    Std. Dev.       Min        Max
{hline 13}{c +}{hline 57}
{space 8}hhid {c |}{res}          0
{txt}{space 5}plot_id {c |}{res}          0
{txt}{space 4}plotsize {c |}{res}         86    .3172596    .3039642       .045   1.673201
{txt}{space 6}season {c |}{res}         86           0           0          0          0
{txt}
{com}. sort plot_id
{txt}
{com}. customsave , idvar(plot_id) filename(AG_SEC2B.dta) path("$export") dofile(2008_AGSEC2B) user($user)
 with do file 2008_AGSEC2B by user themacfreezie using computer Torbit

{txt}
{com}. 
. * close the log
.         log     close
      {txt}name:  {res}<unnamed>
       {txt}log:  {res}C:/Users/themacfreezie/git/weather_project/tanzania/household_code/logs/wv1_AGSEC2B.smcl
  {txt}log type:  {res}smcl
 {txt}closed on:  {res}16 May 2020, 20:54:59
{txt}{.-}
{smcl}
{txt}{sf}{ul off}{smcl}
{com}{sf}{ul off}{txt}{.-}
      name:  {res}<unnamed>
       {txt}log:  {res}C:/Users/themacfreezie/git/weather_project/tanzania/household_code/logs/wv1_AGSEC2B.smcl
  {txt}log type:  {res}smcl
 {txt}opened on:  {res}17 May 2020, 00:18:45
{txt}
{com}. 
. 
. **********************************************************************************
. **      TZA 2008 (Wave 1) - Agriculture Section 2B 
. **********************************************************************************
. 
. * load data
.         use             "$root/SEC_2B", clear
{txt}
{com}. 
. * generate unique ob id 
.         generate        plot_id = hhid + " " + plotnum
{txt}
{com}.         isid            plot_id
{txt}
{com}.         
. * rename variables of interest (plotsizes)
.         rename          s2bq9 plotsize_self_ac
{res}{txt}
{com}.         rename          area plotsize_gps_ac
{res}{txt}
{com}.         
. * convert from acres to hectares
.         generate        plotsize_self = plotsize_self_ac * 0.404686
{txt}
{com}.         label           var plotsize_self "Self-reported Area (Hectares)"
{txt}
{com}.         generate        plotsize_gps = plotsize_gps_ac * 0.404686
{txt}(74 missing values generated)

{com}.         label           var plotsize_gps "GPS Measured Area (Hectares)"
{txt}
{com}.         drop            plotsize_gps_ac plotsize_self_ac
{txt}
{com}.         
. * interrogating plotsize variables
.         count           if plotsize_gps != . & plotsize_self != .
  {res}12
{txt}
{com}.  *** 12 not mising, out of 86
.         pwcorr          plotsize_gps plotsize_self

             {txt}{c |} plotsi~s plotsi~f
{hline 13}{c +}{hline 18}
plotsize_gps {c |} {res}  1.0000 
{txt}plotsize_s~f {c |} {res}  0.7817   1.0000 
{txt}
{com}.  *** high correlation (0.7817)
. * inverstingating the high and low end of gps measurments
.         * high end
.                 tab                     plotsize_gps

        {txt}GPS {c |}
   Measured {c |}
       Area {c |}
 (Hectares) {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
       .045 {c |}{res}          1        8.33        8.33
{txt}   .1079001 {c |}{res}          1        8.33       16.67
{txt}   .1452001 {c |}{res}          1        8.33       25.00
{txt}   .1478001 {c |}{res}          1        8.33       33.33
{txt}   .2024002 {c |}{res}          1        8.33       41.67
{txt}   .2934003 {c |}{res}          1        8.33       50.00
{txt}   .4436004 {c |}{res}          1        8.33       58.33
{txt}   .5515005 {c |}{res}          1        8.33       66.67
{txt}   .5700005 {c |}{res}          1        8.33       75.00
{txt}   .6467006 {c |}{res}          1        8.33       83.33
{txt}   .9085008 {c |}{res}          1        8.33       91.67
{txt}   1.673201 {c |}{res}          1        8.33      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}         12      100.00
{txt}
{com}.                 sum                     plotsize_gps, detail

                {txt}GPS Measured Area (Hectares)
{hline 61}
      Percentiles      Smallest
 1%    {res}     .045           .045
{txt} 5%    {res}     .045       .1079001
{txt}10%    {res} .1079001       .1452001       {txt}Obs         {res}         12
{txt}25%    {res} .1465001       .1478001       {txt}Sum of Wgt. {res}         12

{txt}50%    {res} .3685003                      {txt}Mean          {res} .4779338
                        {txt}Largest       Std. Dev.     {res} .4584192
{txt}75%    {res} .6083505       .5700005
{txt}90%    {res} .9085008       .6467006       {txt}Variance      {res} .2101482
{txt}95%    {res} 1.673201       .9085008       {txt}Skewness      {res} 1.539129
{txt}99%    {res} 1.673201       1.673201       {txt}Kurtosis      {res}  4.85356
{txt}
{com}.                 *histogram      plotsize_gps if plotsize_gps > .9
.          *** mean = 0.478
.          *** 90% of obs < .9
.                 sort            plotsize_gps
{txt}
{com}.                 sum             plotsize_gps if plotsize_gps>0.9

{txt}    Variable {c |}        Obs        Mean    Std. Dev.       Min        Max
{hline 13}{c +}{hline 57}
plotsize_gps {c |}{res}          2    1.290851     .540725   .9085008   1.673201
{txt}
{com}.          *** 2 obs > 0.9
.                 list            plotsize_gps plotsize_self if plotsize_gps>0.9 & !missing(plotsize_gps), sep(0)
{txt}
     {c TLC}{hline 10}{c -}{hline 10}{c TRC}
     {c |} {res}plotsi~s   plotsi~f {txt}{c |}
     {c LT}{hline 10}{c -}{hline 10}{c RT}
 11. {c |} {res}.9085008   1.214058 {txt}{c |}
 12. {c |} {res}1.673201    .809372 {txt}{c |}
     {c BLC}{hline 10}{c -}{hline 10}{c BRC}

{com}.                 pwcorr          plotsize_gps plotsize_self if plotsize_gps>0.9 & !missing(plotsize_gps)

             {txt}{c |} plotsi~s plotsi~f
{hline 13}{c +}{hline 18}
plotsize_gps {c |} {res}  1.0000 
{txt}plotsize_s~f {c |} {res} -1.0000   1.0000 
{txt}
{com}.          *** corr = -1.0000 (kind of weird, is this because there are only 2 obs?)
.                 sum             plotsize_gps if plotsize_gps>0.6

{txt}    Variable {c |}        Obs        Mean    Std. Dev.       Min        Max
{hline 13}{c +}{hline 57}
plotsize_gps {c |}{res}          3    1.076134    .5333871   .6467006   1.673201
{txt}
{com}.          *** 3 obs > 0.6
.                 list            plotsize_gps plotsize_self if plotsize_gps>0.6 & !missing(plotsize_gps), sep(0)
{txt}
     {c TLC}{hline 10}{c -}{hline 10}{c TRC}
     {c |} {res}plotsi~s   plotsi~f {txt}{c |}
     {c LT}{hline 10}{c -}{hline 10}{c RT}
 10. {c |} {res}.6467006    .809372 {txt}{c |}
 11. {c |} {res}.9085008   1.214058 {txt}{c |}
 12. {c |} {res}1.673201    .809372 {txt}{c |}
     {c BLC}{hline 10}{c -}{hline 10}{c BRC}

{com}.                 pwcorr          plotsize_gps plotsize_self if plotsize_gps>0.6 & !missing(plotsize_gps)

             {txt}{c |} plotsi~s plotsi~f
{hline 13}{c +}{hline 18}
plotsize_gps {c |} {res}  1.0000 
{txt}plotsize_s~f {c |} {res} -0.2722   1.0000 
{txt}
{com}.          *** corr = -0.2722 (a real value!)
.          *** not going to drop anything here
.         ///////////////////////////////////////////////////////////////////////////
>         * low end
.                 tab                     plotsize_gps

        {txt}GPS {c |}
   Measured {c |}
       Area {c |}
 (Hectares) {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
       .045 {c |}{res}          1        8.33        8.33
{txt}   .1079001 {c |}{res}          1        8.33       16.67
{txt}   .1452001 {c |}{res}          1        8.33       25.00
{txt}   .1478001 {c |}{res}          1        8.33       33.33
{txt}   .2024002 {c |}{res}          1        8.33       41.67
{txt}   .2934003 {c |}{res}          1        8.33       50.00
{txt}   .4436004 {c |}{res}          1        8.33       58.33
{txt}   .5515005 {c |}{res}          1        8.33       66.67
{txt}   .5700005 {c |}{res}          1        8.33       75.00
{txt}   .6467006 {c |}{res}          1        8.33       83.33
{txt}   .9085008 {c |}{res}          1        8.33       91.67
{txt}   1.673201 {c |}{res}          1        8.33      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}         12      100.00
{txt}
{com}.                 sum                     plotsize_gps, detail

                {txt}GPS Measured Area (Hectares)
{hline 61}
      Percentiles      Smallest
 1%    {res}     .045           .045
{txt} 5%    {res}     .045       .1079001
{txt}10%    {res} .1079001       .1452001       {txt}Obs         {res}         12
{txt}25%    {res} .1465001       .1478001       {txt}Sum of Wgt. {res}         12

{txt}50%    {res} .3685003                      {txt}Mean          {res} .4779338
                        {txt}Largest       Std. Dev.     {res} .4584192
{txt}75%    {res} .6083505       .5700005
{txt}90%    {res} .9085008       .6467006       {txt}Variance      {res} .2101482
{txt}95%    {res} 1.673201       .9085008       {txt}Skewness      {res} 1.539129
{txt}99%    {res} 1.673201       1.673201       {txt}Kurtosis      {res}  4.85356
{txt}
{com}.                 *histogram      plotsize_gps if plotsize_gps < 0.11
.          *** mean = 0.478
.          *** 10% of obs < 0.11
.                 sum             plotsize_gps if plotsize_gps<0.11

{txt}    Variable {c |}        Obs        Mean    Std. Dev.       Min        Max
{hline 13}{c +}{hline 57}
plotsize_gps {c |}{res}          2    .0764501    .0444771       .045   .1079001
{txt}
{com}.          *** 2 obs < 0.11
.                 list            plotsize_gps plotsize_self if plotsize_gps<0.11 & !missing(plotsize_gps), sep(0)
{txt}
     {c TLC}{hline 10}{c -}{hline 10}{c TRC}
     {c |} {res}plotsi~s   plotsi~f {txt}{c |}
     {c LT}{hline 10}{c -}{hline 10}{c RT}
  1. {c |} {res}    .045   .1011715 {txt}{c |}
  2. {c |} {res}.1079001    .202343 {txt}{c |}
     {c BLC}{hline 10}{c -}{hline 10}{c BRC}

{com}.                 pwcorr          plotsize_gps plotsize_self if plotsize_gps<0.11 & !missing(plotsize_gps)

             {txt}{c |} plotsi~s plotsi~f
{hline 13}{c +}{hline 18}
plotsize_gps {c |} {res}  1.0000 
{txt}plotsize_s~f {c |} {res}  1.0000   1.0000 
{txt}
{com}.          *** corr = 1.000(again, 2 obs)
.                 sum             plotsize_gps if plotsize_gps<0.15

{txt}    Variable {c |}        Obs        Mean    Std. Dev.       Min        Max
{hline 13}{c +}{hline 57}
plotsize_gps {c |}{res}          4    .1114751    .0479187       .045   .1478001
{txt}
{com}.          *** 3 < 0.15
.                 list            plotsize_gps plotsize_self if plotsize_gps<0.15 & !missing(plotsize_gps), sep(0)
{txt}
     {c TLC}{hline 10}{c -}{hline 10}{c TRC}
     {c |} {res}plotsi~s   plotsi~f {txt}{c |}
     {c LT}{hline 10}{c -}{hline 10}{c RT}
  1. {c |} {res}    .045   .1011715 {txt}{c |}
  2. {c |} {res}.1079001    .202343 {txt}{c |}
  3. {c |} {res}.1452001    .202343 {txt}{c |}
  4. {c |} {res}.1478001   .1011715 {txt}{c |}
     {c BLC}{hline 10}{c -}{hline 10}{c BRC}

{com}.                 pwcorr          plotsize_gps plotsize_self if plotsize_gps<0.15 & !missing(plotsize_gps)

             {txt}{c |} plotsi~s plotsi~f
{hline 13}{c +}{hline 18}
plotsize_gps {c |} {res}  1.0000 
{txt}plotsize_s~f {c |} {res}  0.3633   1.0000 
{txt}
{com}.          *** corr = 0.3633 (a real value!)
.          *** again, won't be dropping anything
.          * for robustness, although no zero values in this set
.                 replace         plotsize_gps = . if plotsize_gps == 0
{txt}(0 real changes made)

{com}.         
. * must merge in regional identifiers from 2008_HHSECA to impute
.         merge           m:1 hhid using "$export/HH_SECA"
{res}
{txt}{col 5}Result{col 38}# of obs.
{col 5}{hline 41}
{col 5}not matched{col 30}{res}           3,201
{txt}{col 9}from master{col 30}{res}               0{txt}  (_merge==1)
{col 9}from using{col 30}{res}           3,201{txt}  (_merge==2)

{col 5}matched{col 30}{res}              86{txt}  (_merge==3)
{col 5}{hline 41}

{com}.         tab                     _merge

                 {txt}_merge {c |}      Freq.     Percent        Cum.
{hline 24}{c +}{hline 35}
         using only (2) {c |}{res}      3,201       97.38       97.38
{txt}            matched (3) {c |}{res}         86        2.62      100.00
{txt}{hline 24}{c +}{hline 35}
                  Total {c |}{res}      3,287      100.00
{txt}
{com}.  *** all obs in master are matched
.         drop            if _merge == 2
{txt}(3,201 observations deleted)

{com}.         drop            _merge
{txt}
{com}. * interrogating regional identifiers
.         sort            region
{txt}
{com}.         by region:      distinct district

{txt}{hline}
-> region = Arusha

{col 11}{c |}        Observations
{col 11}{c |}      total   distinct
{hline 10}{c +}{hline 22}
 district {c |}  {res}        3          2

{txt}{hline}
-> region = Kilimanjaro

{col 11}{c |}        Observations
{col 11}{c |}      total   distinct
{hline 10}{c +}{hline 22}
 district {c |}  {res}        3          2

{txt}{hline}
-> region = Morogoro

{col 11}{c |}        Observations
{col 11}{c |}      total   distinct
{hline 10}{c +}{hline 22}
 district {c |}  {res}        1          1

{txt}{hline}
-> region = Dar es salaam

{col 11}{c |}        Observations
{col 11}{c |}      total   distinct
{hline 10}{c +}{hline 22}
 district {c |}  {res}        2          1

{txt}{hline}
-> region = Lindi

{col 11}{c |}        Observations
{col 11}{c |}      total   distinct
{hline 10}{c +}{hline 22}
 district {c |}  {res}        2          1

{txt}{hline}
-> region = Iringa

{col 11}{c |}        Observations
{col 11}{c |}      total   distinct
{hline 10}{c +}{hline 22}
 district {c |}  {res}        1          1

{txt}{hline}
-> region = Mbeya

{col 11}{c |}        Observations
{col 11}{c |}      total   distinct
{hline 10}{c +}{hline 22}
 district {c |}  {res}        7          1

{txt}{hline}
-> region = Kigoma

{col 11}{c |}        Observations
{col 11}{c |}      total   distinct
{hline 10}{c +}{hline 22}
 district {c |}  {res}        8          3

{txt}{hline}
-> region = Shinyanga

{col 11}{c |}        Observations
{col 11}{c |}      total   distinct
{hline 10}{c +}{hline 22}
 district {c |}  {res}       33          7

{txt}{hline}
-> region = Kagera

{col 11}{c |}        Observations
{col 11}{c |}      total   distinct
{hline 10}{c +}{hline 22}
 district {c |}  {res}       13          5

{txt}{hline}
-> region = Mwanza

{col 11}{c |}        Observations
{col 11}{c |}      total   distinct
{hline 10}{c +}{hline 22}
 district {c |}  {res}        6          4

{txt}{hline}
-> region = Mara

{col 11}{c |}        Observations
{col 11}{c |}      total   distinct
{hline 10}{c +}{hline 22}
 district {c |}  {res}        2          2

{txt}{hline}
-> region = Manyara

{col 11}{c |}        Observations
{col 11}{c |}      total   distinct
{hline 10}{c +}{hline 22}
 district {c |}  {res}        1          1

{txt}{hline}
-> region = KASKAZINI UNGUJA

{col 11}{c |}        Observations
{col 11}{c |}      total   distinct
{hline 10}{c +}{hline 22}
 district {c |}  {res}        3          2

{txt}{hline}
-> region = MJINI/MAGHARIBI UNGUJA

{col 11}{c |}        Observations
{col 11}{c |}      total   distinct
{hline 10}{c +}{hline 22}
 district {c |}  {res}        1          1
{txt}
{com}.  *** 126 distinct districts
. * unique district id
.         tostring        region, generate(reg_num) 
{txt}reg_num generated as {res:str2}

{com}.         tostring        district, generate(dist_num)
{txt}dist_num generated as {res:str1}

{com}.         generate        uq_dist = reg_num + dist_num
{txt}
{com}.         distinct        uq_dist

{txt}{col 10}{c |}        Observations
{col 10}{c |}      total   distinct
{hline 9}{c +}{hline 22}
 uq_dist {c |}  {res}       86         34
{txt}
{com}.         sort            region district
{txt}
{com}.         destring        uq_dist, replace
{txt}uq_dist: all characters numeric; {res}replaced {txt}as {res}int
{txt}
{com}.  *** 126 once again, good deal
.         drop            reg_num dist_num
{txt}
{com}.         
. * impute missing + irregular plot sizes using predictive mean matching 
. * including plotsize_self as control
.         mi set          wide    // declare the data to be wide.
{txt}
{com}.         mi xtset, clear         // this is a precautinary step to clear any xtset that the analyst may have had in place previously
{res}{txt}
{com}.         mi register     imputed plotsize_gps // identify plotsize_GPS as the variable being imputed
{res}{txt}
{com}.         mi impute       pmm plotsize_gps plotsize_self i.uq_dist, add(1) rseed(245780) noisily dots force knn(5) bootstrap
{res}
{txt}Imputing {it:m}=1:
{col 3}{res}
{txt}Running {bf:regress} on bootstrap sample:

{p 0 6 2}note: 194.uq_dist omitted because of collinearity{p_end}

      Source {c |}       SS           df       MS      Number of obs   ={res}        12
{txt}{hline 13}{c +}{hline 34}   F(5, 6)         = {res}   542.05
{txt}       Model {c |} {res} 1.00995454         5  .201990908   {txt}Prob > F        ={res}    0.0000
{txt}    Residual {c |} {res} .002235874         6  .000372646   {txt}R-squared       ={res}    0.9978
{txt}{hline 13}{c +}{hline 34}   Adj R-squared   ={res}    0.9960
{txt}       Total {c |} {res} 1.01219042        11  .092017311   {txt}Root MSE        =   {res}  .0193

{txt}{hline 14}{c TT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{col 1} plotsize_gps{col 15}{c |}      Coef.{col 27}   Std. Err.{col 39}      t{col 47}   P>|t|{col 55}     [95% Con{col 68}f. Interval]
{hline 14}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
plotsize_self {c |}{col 15}{res}{space 2}-.7991388{col 27}{space 2} .1457297{col 38}{space 1}   -5.48{col 47}{space 3}0.002{col 55}{space 4}-1.155727{col 68}{space 3}-.4425509
{txt}{space 13} {c |}
{space 6}uq_dist {c |}
{space 9}128  {c |}{col 15}{res}{space 2}-.1437501{col 27}{space 2} .0215826{col 38}{space 1}   -6.66{col 47}{space 3}0.001{col 55}{space 4}-.1965608{col 68}{space 3}-.0909395
{txt}{space 9}178  {c |}{col 15}{res}{space 2} 1.609101{col 27}{space 2} .1566286{col 38}{space 1}   10.27{col 47}{space 3}0.000{col 55}{space 4} 1.225845{col 68}{space 3} 1.992358
{txt}{space 9}181  {c |}{col 15}{res}{space 2}    .0373{col 27}{space 2} .0222904{col 38}{space 1}    1.67{col 47}{space 3}0.145{col 55}{space 4}-.0172425{col 68}{space 3} .0918426
{txt}{space 9}184  {c |}{col 15}{res}{space 2} .4974004{col 27}{space 2} .0431651{col 38}{space 1}   11.52{col 47}{space 3}0.000{col 55}{space 4} .3917792{col 68}{space 3} .6030217
{txt}{space 9}194  {c |}{col 15}{res}{space 2}        0{col 27}{txt}  (omitted)
{space 13} {c |}
{space 8}_cons {c |}{col 15}{res}{space 2} .2696002{col 27}{space 2} .0222904{col 38}{space 1}   12.09{col 47}{space 3}0.000{col 55}{space 4} .2150577{col 68}{space 3} .3241428
{txt}{hline 14}{c BT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{res}{txt}. done
{res}{txt}
Univariate imputation{txt}{col 45}{ralign 12:Imputations }= {res}       1
{txt}Predictive mean matching{txt}{col 45}{ralign 12:added }= {res}       1
{txt}Imputed: {it:m}=1{txt}{col 45}{ralign 12:updated }= {res}       0

{txt}{col 39}{ralign 12:Nearest neighbors }= {res}       5

{txt}{hline 19}{c TT}{hline 35}{hline 11}
{txt}{col 20}{c |}{center 46:  Observations per {it:m}}
{txt}{col 20}{c LT}{hline 35}{c TT}{hline 10}
{txt}{col 11}Variable {c |}{ralign 12:Complete }{ralign 13:Incomplete }{ralign 10:Imputed }{c |}{ralign 10:Total}
{hline 19}{c +}{hline 35}{c +}{hline 10}
{txt}{ralign 19:plotsize_gps }{c |}{res}         12           74        74 {txt}{c |}{res}        86
{txt}{hline 19}{c BT}{hline 35}{c BT}{hline 10}
{p 0 1 1 66}(complete + incomplete = total; imputed is the minimum across {it:m}
 of the number of filled-in observations.){p_end}

{txt}Note: Posterior parameters obtained using {help mi_boot_note:sampling with replacement}.
{res}{txt}
{com}.         mi                      unset

{txt}{col 13}variables
{col 5}original{col 23}new{col 42}meaning
    {hline 71}
{col 5}_mi_miss{col 23}mi_miss{col 42}0=orig-complete, 1=orig-incomplete
{col 5}_#_plotsize_gps{col 23}plotsize_gps_#_{col 42}imputed values of plotsize_gps
    {hline 71}
{col 5}# = 1

{com}. 
. * how did the imputation go?
.         tab                     mi_miss

 {txt}Incomplete {c |}
observation {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          0 {c |}{res}         12       13.95       13.95
{txt}          1 {c |}{res}         74       86.05      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}         86      100.00
{txt}
{com}.         pwcorr          plotsize_gps plotsize_gps_1_ if plotsize_gps != .

             {txt}{c |} plotsi~s plots~1_
{hline 13}{c +}{hline 18}
plotsize_gps {c |} {res}  1.0000 
{txt}plotsize_~1_ {c |} {res}  1.0000   1.0000 
{txt}
{com}.         tabstat         plotsize_gps plotsize_self plotsize_gps_1_, by(mi_miss) statistics(n mean min max) columns(statistics) longstub format(%9.3g) 

{txt}{lalign 8:mi_miss} {...}
{ralign 12:variable} {...}
{c |}         N      mean       min       max
{hline 22}{c +}{hline 40}
{lalign 8:0} {...}
{ralign 12:plotsize_gps} {...}
{c |}{...}
 {res}       12      .478      .045      1.67
{space 8} {...}
{txt}{ralign 12:plotsize_s~f} {...}
{c |}{...}
 {res}       12       .43      .101      1.21
{space 8} {...}
{txt}{ralign 12:plotsize_~1_} {...}
{c |}{...}
 {res}       12      .478      .045      1.67
{txt}{hline 22}{c +}{hline 40}
{lalign 8:1} {...}
{ralign 12:plotsize_gps} {...}
{c |}{...}
 {res}        0         .         .         .
{space 8} {...}
{txt}{ralign 12:plotsize_s~f} {...}
{c |}{...}
 {res}       74      .501     .0809      2.83
{space 8} {...}
{txt}{ralign 12:plotsize_~1_} {...}
{c |}{...}
 {res}       74      .309      .045      1.67
{txt}{hline 22}{c +}{hline 40}
{lalign 8:Total} {...}
{ralign 12:plotsize_gps} {...}
{c |}{...}
 {res}       12      .478      .045      1.67
{space 8} {...}
{txt}{ralign 12:plotsize_s~f} {...}
{c |}{...}
 {res}       86      .492     .0809      2.83
{space 8} {...}
{txt}{ralign 12:plotsize_~1_} {...}
{c |}{...}
 {res}       86      .332      .045      1.67
{txt}{hline 22}{c BT}{hline 40}

{com}.         rename          plotsize_gps_1_ plotsize        
{res}{txt}
{com}.         
. * generate seasonal variable
.         generate        season = 0
{txt}
{com}. 
. * keep what we want, get rid of the rest
.         keep            hhid plot_id plotsize season
{txt}
{com}. 
. *       Prepare for export
. compress
  {txt}variable {bf}season{sf} was {bf}{res}float{sf}{txt} now {bf}{res}byte{sf}
{txt}  (258 bytes saved)

{com}. describe

{txt}Contains data from {res}G:/My Drive/weather_project/household_data/tanzania/wave_1/raw/SEC_2B.dta
{txt}  obs:{res}            86                          
{txt} vars:{res}             4                          28 May 2011 14:43
                                              (_dta has notes)
{txt}{hline}
              storage   display    value
variable name   type    format     label      variable label
{hline}
{p 0 48}{res}{bind:hhid           }{txt}{bind: str14   }{bind:{txt}%14s      }{space 1}{bind:         }{bind:  }{res}{res}Unique HH Identifier{p_end}
{p 0 48}{bind:plot_id        }{txt}{bind: str17   }{bind:{txt}%17s      }{space 1}{bind:         }{bind:  }{res}{res}{p_end}
{p 0 48}{bind:plotsize       }{txt}{bind: float   }{bind:{txt}%9.0g     }{space 1}{bind:         }{bind:  }{res}{res}{p_end}
{p 0 48}{bind:season         }{txt}{bind: byte    }{bind:{txt}%9.0g     }{space 1}{bind:         }{bind:  }{res}{res}{p_end}
{txt}{hline}
Sorted by: 
{res}     Note: Dataset has changed since last saved.
{txt}
{com}. summarize 

{txt}    Variable {c |}        Obs        Mean    Std. Dev.       Min        Max
{hline 13}{c +}{hline 57}
{space 8}hhid {c |}{res}          0
{txt}{space 5}plot_id {c |}{res}          0
{txt}{space 4}plotsize {c |}{res}         86    .3322805    .3336825       .045   1.673201
{txt}{space 6}season {c |}{res}         86           0           0          0          0
{txt}
{com}. sort plot_id
{txt}
{com}. customsave , idvar(plot_id) filename(AG_SEC2B.dta) path("$export") dofile(2008_AGSEC2B) user($user)
 with do file 2008_AGSEC2B by user themacfreezie using computer Torbit

{txt}
{com}. 
. * close the log
.         log     close
      {txt}name:  {res}<unnamed>
       {txt}log:  {res}C:/Users/themacfreezie/git/weather_project/tanzania/household_code/logs/wv1_AGSEC2B.smcl
  {txt}log type:  {res}smcl
 {txt}closed on:  {res}17 May 2020, 00:18:45
{txt}{.-}
{smcl}
{txt}{sf}{ul off}{smcl}
{com}{sf}{ul off}{txt}{.-}
      name:  {res}<unnamed>
       {txt}log:  {res}C:/Users/themacfreezie/git/weather_project/tanzania/household_code/logs/wv1_AGSEC2B.smcl
  {txt}log type:  {res}smcl
 {txt}opened on:  {res}17 May 2020, 00:23:17
{txt}
{com}. 
. 
. **********************************************************************************
. **      TZA 2008 (Wave 1) - Agriculture Section 2B 
. **********************************************************************************
. 
. * load data
.         use             "$root/SEC_2B", clear
{txt}
{com}. 
. * generate unique ob id 
.         generate        plot_id = hhid + " " + plotnum
{txt}
{com}.         isid            plot_id
{txt}
{com}.         
. * rename variables of interest (plotsizes)
.         rename          s2bq9 plotsize_self_ac
{res}{txt}
{com}.         rename          area plotsize_gps_ac
{res}{txt}
{com}.         
. * convert from acres to hectares
.         generate        plotsize_self = plotsize_self_ac * 0.404686
{txt}
{com}.         label           var plotsize_self "Self-reported Area (Hectares)"
{txt}
{com}.         generate        plotsize_gps = plotsize_gps_ac * 0.404686
{txt}(74 missing values generated)

{com}.         label           var plotsize_gps "GPS Measured Area (Hectares)"
{txt}
{com}.         drop            plotsize_gps_ac plotsize_self_ac
{txt}
{com}.         
. * interrogating plotsize variables
.         count           if plotsize_gps != . & plotsize_self != .
  {res}12
{txt}
{com}.  *** 12 not mising, out of 86
.         pwcorr          plotsize_gps plotsize_self

             {txt}{c |} plotsi~s plotsi~f
{hline 13}{c +}{hline 18}
plotsize_gps {c |} {res}  1.0000 
{txt}plotsize_s~f {c |} {res}  0.7817   1.0000 
{txt}
{com}.  *** high correlation (0.7817)
. * inverstingating the high and low end of gps measurments
.         * high end
.                 tab                     plotsize_gps

        {txt}GPS {c |}
   Measured {c |}
       Area {c |}
 (Hectares) {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
       .045 {c |}{res}          1        8.33        8.33
{txt}   .1079001 {c |}{res}          1        8.33       16.67
{txt}   .1452001 {c |}{res}          1        8.33       25.00
{txt}   .1478001 {c |}{res}          1        8.33       33.33
{txt}   .2024002 {c |}{res}          1        8.33       41.67
{txt}   .2934003 {c |}{res}          1        8.33       50.00
{txt}   .4436004 {c |}{res}          1        8.33       58.33
{txt}   .5515005 {c |}{res}          1        8.33       66.67
{txt}   .5700005 {c |}{res}          1        8.33       75.00
{txt}   .6467006 {c |}{res}          1        8.33       83.33
{txt}   .9085008 {c |}{res}          1        8.33       91.67
{txt}   1.673201 {c |}{res}          1        8.33      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}         12      100.00
{txt}
{com}.                 sum                     plotsize_gps, detail

                {txt}GPS Measured Area (Hectares)
{hline 61}
      Percentiles      Smallest
 1%    {res}     .045           .045
{txt} 5%    {res}     .045       .1079001
{txt}10%    {res} .1079001       .1452001       {txt}Obs         {res}         12
{txt}25%    {res} .1465001       .1478001       {txt}Sum of Wgt. {res}         12

{txt}50%    {res} .3685003                      {txt}Mean          {res} .4779338
                        {txt}Largest       Std. Dev.     {res} .4584192
{txt}75%    {res} .6083505       .5700005
{txt}90%    {res} .9085008       .6467006       {txt}Variance      {res} .2101482
{txt}95%    {res} 1.673201       .9085008       {txt}Skewness      {res} 1.539129
{txt}99%    {res} 1.673201       1.673201       {txt}Kurtosis      {res}  4.85356
{txt}
{com}.                 *histogram      plotsize_gps if plotsize_gps > .9
.          *** mean = 0.478
.          *** 90% of obs < .9
.                 sort            plotsize_gps
{txt}
{com}.                 sum             plotsize_gps if plotsize_gps>0.9

{txt}    Variable {c |}        Obs        Mean    Std. Dev.       Min        Max
{hline 13}{c +}{hline 57}
plotsize_gps {c |}{res}          2    1.290851     .540725   .9085008   1.673201
{txt}
{com}.          *** 2 obs > 0.9
.                 list            plotsize_gps plotsize_self if plotsize_gps>0.9 & !missing(plotsize_gps), sep(0)
{txt}
     {c TLC}{hline 10}{c -}{hline 10}{c TRC}
     {c |} {res}plotsi~s   plotsi~f {txt}{c |}
     {c LT}{hline 10}{c -}{hline 10}{c RT}
 11. {c |} {res}.9085008   1.214058 {txt}{c |}
 12. {c |} {res}1.673201    .809372 {txt}{c |}
     {c BLC}{hline 10}{c -}{hline 10}{c BRC}

{com}.                 pwcorr          plotsize_gps plotsize_self if plotsize_gps>0.9 & !missing(plotsize_gps)

             {txt}{c |} plotsi~s plotsi~f
{hline 13}{c +}{hline 18}
plotsize_gps {c |} {res}  1.0000 
{txt}plotsize_s~f {c |} {res} -1.0000   1.0000 
{txt}
{com}.          *** corr = -1.0000 (kind of weird, is this because there are only 2 obs?)
.                 sum             plotsize_gps if plotsize_gps>0.6

{txt}    Variable {c |}        Obs        Mean    Std. Dev.       Min        Max
{hline 13}{c +}{hline 57}
plotsize_gps {c |}{res}          3    1.076134    .5333871   .6467006   1.673201
{txt}
{com}.          *** 3 obs > 0.6
.                 list            plotsize_gps plotsize_self if plotsize_gps>0.6 & !missing(plotsize_gps), sep(0)
{txt}
     {c TLC}{hline 10}{c -}{hline 10}{c TRC}
     {c |} {res}plotsi~s   plotsi~f {txt}{c |}
     {c LT}{hline 10}{c -}{hline 10}{c RT}
 10. {c |} {res}.6467006    .809372 {txt}{c |}
 11. {c |} {res}.9085008   1.214058 {txt}{c |}
 12. {c |} {res}1.673201    .809372 {txt}{c |}
     {c BLC}{hline 10}{c -}{hline 10}{c BRC}

{com}.                 pwcorr          plotsize_gps plotsize_self if plotsize_gps>0.6 & !missing(plotsize_gps)

             {txt}{c |} plotsi~s plotsi~f
{hline 13}{c +}{hline 18}
plotsize_gps {c |} {res}  1.0000 
{txt}plotsize_s~f {c |} {res} -0.2722   1.0000 
{txt}
{com}.          *** corr = -0.2722 (a real value!)
.          *** not going to drop anything here
.         ///////////////////////////////////////////////////////////////////////////
>         * low end
.                 tab                     plotsize_gps

        {txt}GPS {c |}
   Measured {c |}
       Area {c |}
 (Hectares) {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
       .045 {c |}{res}          1        8.33        8.33
{txt}   .1079001 {c |}{res}          1        8.33       16.67
{txt}   .1452001 {c |}{res}          1        8.33       25.00
{txt}   .1478001 {c |}{res}          1        8.33       33.33
{txt}   .2024002 {c |}{res}          1        8.33       41.67
{txt}   .2934003 {c |}{res}          1        8.33       50.00
{txt}   .4436004 {c |}{res}          1        8.33       58.33
{txt}   .5515005 {c |}{res}          1        8.33       66.67
{txt}   .5700005 {c |}{res}          1        8.33       75.00
{txt}   .6467006 {c |}{res}          1        8.33       83.33
{txt}   .9085008 {c |}{res}          1        8.33       91.67
{txt}   1.673201 {c |}{res}          1        8.33      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}         12      100.00
{txt}
{com}.                 sum                     plotsize_gps, detail

                {txt}GPS Measured Area (Hectares)
{hline 61}
      Percentiles      Smallest
 1%    {res}     .045           .045
{txt} 5%    {res}     .045       .1079001
{txt}10%    {res} .1079001       .1452001       {txt}Obs         {res}         12
{txt}25%    {res} .1465001       .1478001       {txt}Sum of Wgt. {res}         12

{txt}50%    {res} .3685003                      {txt}Mean          {res} .4779338
                        {txt}Largest       Std. Dev.     {res} .4584192
{txt}75%    {res} .6083505       .5700005
{txt}90%    {res} .9085008       .6467006       {txt}Variance      {res} .2101482
{txt}95%    {res} 1.673201       .9085008       {txt}Skewness      {res} 1.539129
{txt}99%    {res} 1.673201       1.673201       {txt}Kurtosis      {res}  4.85356
{txt}
{com}.                 *histogram      plotsize_gps if plotsize_gps < 0.11
.          *** mean = 0.478
.          *** 10% of obs < 0.11
.                 sum             plotsize_gps if plotsize_gps<0.11

{txt}    Variable {c |}        Obs        Mean    Std. Dev.       Min        Max
{hline 13}{c +}{hline 57}
plotsize_gps {c |}{res}          2    .0764501    .0444771       .045   .1079001
{txt}
{com}.          *** 2 obs < 0.11
.                 list            plotsize_gps plotsize_self if plotsize_gps<0.11 & !missing(plotsize_gps), sep(0)
{txt}
     {c TLC}{hline 10}{c -}{hline 10}{c TRC}
     {c |} {res}plotsi~s   plotsi~f {txt}{c |}
     {c LT}{hline 10}{c -}{hline 10}{c RT}
  1. {c |} {res}    .045   .1011715 {txt}{c |}
  2. {c |} {res}.1079001    .202343 {txt}{c |}
     {c BLC}{hline 10}{c -}{hline 10}{c BRC}

{com}.                 pwcorr          plotsize_gps plotsize_self if plotsize_gps<0.11 & !missing(plotsize_gps)

             {txt}{c |} plotsi~s plotsi~f
{hline 13}{c +}{hline 18}
plotsize_gps {c |} {res}  1.0000 
{txt}plotsize_s~f {c |} {res}  1.0000   1.0000 
{txt}
{com}.          *** corr = 1.000(again, 2 obs)
.                 sum             plotsize_gps if plotsize_gps<0.15

{txt}    Variable {c |}        Obs        Mean    Std. Dev.       Min        Max
{hline 13}{c +}{hline 57}
plotsize_gps {c |}{res}          4    .1114751    .0479187       .045   .1478001
{txt}
{com}.          *** 3 < 0.15
.                 list            plotsize_gps plotsize_self if plotsize_gps<0.15 & !missing(plotsize_gps), sep(0)
{txt}
     {c TLC}{hline 10}{c -}{hline 10}{c TRC}
     {c |} {res}plotsi~s   plotsi~f {txt}{c |}
     {c LT}{hline 10}{c -}{hline 10}{c RT}
  1. {c |} {res}    .045   .1011715 {txt}{c |}
  2. {c |} {res}.1079001    .202343 {txt}{c |}
  3. {c |} {res}.1452001    .202343 {txt}{c |}
  4. {c |} {res}.1478001   .1011715 {txt}{c |}
     {c BLC}{hline 10}{c -}{hline 10}{c BRC}

{com}.                 pwcorr          plotsize_gps plotsize_self if plotsize_gps<0.15 & !missing(plotsize_gps)

             {txt}{c |} plotsi~s plotsi~f
{hline 13}{c +}{hline 18}
plotsize_gps {c |} {res}  1.0000 
{txt}plotsize_s~f {c |} {res}  0.3633   1.0000 
{txt}
{com}.          *** corr = 0.3633 (a real value!)
.          *** again, won't be dropping anything
.          * for robustness, although no zero values in this set
.                 replace         plotsize_gps = . if plotsize_gps == 0
{txt}(0 real changes made)

{com}.         
. * must merge in regional identifiers from 2008_HHSECA to impute
.         merge           m:1 hhid using "$export/HH_SECA"
{res}
{txt}{col 5}Result{col 38}# of obs.
{col 5}{hline 41}
{col 5}not matched{col 30}{res}           3,201
{txt}{col 9}from master{col 30}{res}               0{txt}  (_merge==1)
{col 9}from using{col 30}{res}           3,201{txt}  (_merge==2)

{col 5}matched{col 30}{res}              86{txt}  (_merge==3)
{col 5}{hline 41}

{com}.         tab                     _merge

                 {txt}_merge {c |}      Freq.     Percent        Cum.
{hline 24}{c +}{hline 35}
         using only (2) {c |}{res}      3,201       97.38       97.38
{txt}            matched (3) {c |}{res}         86        2.62      100.00
{txt}{hline 24}{c +}{hline 35}
                  Total {c |}{res}      3,287      100.00
{txt}
{com}.  *** all obs in master are matched
.         drop            if _merge == 2
{txt}(3,201 observations deleted)

{com}.         drop            _merge
{txt}
{com}. * interrogating regional identifiers
.         sort            region
{txt}
{com}.         by region:      distinct district

{txt}{hline}
-> region = Arusha

{col 11}{c |}        Observations
{col 11}{c |}      total   distinct
{hline 10}{c +}{hline 22}
 district {c |}  {res}        3          2

{txt}{hline}
-> region = Kilimanjaro

{col 11}{c |}        Observations
{col 11}{c |}      total   distinct
{hline 10}{c +}{hline 22}
 district {c |}  {res}        3          2

{txt}{hline}
-> region = Morogoro

{col 11}{c |}        Observations
{col 11}{c |}      total   distinct
{hline 10}{c +}{hline 22}
 district {c |}  {res}        1          1

{txt}{hline}
-> region = Dar es salaam

{col 11}{c |}        Observations
{col 11}{c |}      total   distinct
{hline 10}{c +}{hline 22}
 district {c |}  {res}        2          1

{txt}{hline}
-> region = Lindi

{col 11}{c |}        Observations
{col 11}{c |}      total   distinct
{hline 10}{c +}{hline 22}
 district {c |}  {res}        2          1

{txt}{hline}
-> region = Iringa

{col 11}{c |}        Observations
{col 11}{c |}      total   distinct
{hline 10}{c +}{hline 22}
 district {c |}  {res}        1          1

{txt}{hline}
-> region = Mbeya

{col 11}{c |}        Observations
{col 11}{c |}      total   distinct
{hline 10}{c +}{hline 22}
 district {c |}  {res}        7          1

{txt}{hline}
-> region = Kigoma

{col 11}{c |}        Observations
{col 11}{c |}      total   distinct
{hline 10}{c +}{hline 22}
 district {c |}  {res}        8          3

{txt}{hline}
-> region = Shinyanga

{col 11}{c |}        Observations
{col 11}{c |}      total   distinct
{hline 10}{c +}{hline 22}
 district {c |}  {res}       33          7

{txt}{hline}
-> region = Kagera

{col 11}{c |}        Observations
{col 11}{c |}      total   distinct
{hline 10}{c +}{hline 22}
 district {c |}  {res}       13          5

{txt}{hline}
-> region = Mwanza

{col 11}{c |}        Observations
{col 11}{c |}      total   distinct
{hline 10}{c +}{hline 22}
 district {c |}  {res}        6          4

{txt}{hline}
-> region = Mara

{col 11}{c |}        Observations
{col 11}{c |}      total   distinct
{hline 10}{c +}{hline 22}
 district {c |}  {res}        2          2

{txt}{hline}
-> region = Manyara

{col 11}{c |}        Observations
{col 11}{c |}      total   distinct
{hline 10}{c +}{hline 22}
 district {c |}  {res}        1          1

{txt}{hline}
-> region = KASKAZINI UNGUJA

{col 11}{c |}        Observations
{col 11}{c |}      total   distinct
{hline 10}{c +}{hline 22}
 district {c |}  {res}        3          2

{txt}{hline}
-> region = MJINI/MAGHARIBI UNGUJA

{col 11}{c |}        Observations
{col 11}{c |}      total   distinct
{hline 10}{c +}{hline 22}
 district {c |}  {res}        1          1
{txt}
{com}.  *** 126 distinct districts
. * unique district id
.         tostring        region, generate(reg_num) 
{txt}reg_num generated as {res:str2}

{com}.         tostring        district, generate(dist_num)
{txt}dist_num generated as {res:str1}

{com}.         generate        uq_dist = reg_num + dist_num
{txt}
{com}.         distinct        uq_dist

{txt}{col 10}{c |}        Observations
{col 10}{c |}      total   distinct
{hline 9}{c +}{hline 22}
 uq_dist {c |}  {res}       86         34
{txt}
{com}.         sort            region district
{txt}
{com}.         destring        uq_dist, replace
{txt}uq_dist: all characters numeric; {res}replaced {txt}as {res}int
{txt}
{com}.  *** 126 once again, good deal
.         drop            reg_num dist_num
{txt}
{com}.         
. * impute missing + irregular plot sizes using predictive mean matching 
. * including plotsize_self as control
.         mi set          wide    // declare the data to be wide.
{txt}
{com}.         mi xtset, clear         // this is a precautinary step to clear any xtset that the analyst may have had in place previously
{res}{txt}
{com}.         mi register     imputed plotsize_gps // identify plotsize_GPS as the variable being imputed
{res}{txt}
{com}.         mi impute       pmm plotsize_gps plotsize_self i.uq_dist, add(1) rseed(245780) noisily dots force knn(5) bootstrap
{res}
{txt}Imputing {it:m}=1:
{col 3}{res}
{txt}Running {bf:regress} on bootstrap sample:

{p 0 6 2}note: 194.uq_dist omitted because of collinearity{p_end}

      Source {c |}       SS           df       MS      Number of obs   ={res}        12
{txt}{hline 13}{c +}{hline 34}   F(5, 6)         = {res}   542.05
{txt}       Model {c |} {res} 1.00995454         5  .201990908   {txt}Prob > F        ={res}    0.0000
{txt}    Residual {c |} {res} .002235874         6  .000372646   {txt}R-squared       ={res}    0.9978
{txt}{hline 13}{c +}{hline 34}   Adj R-squared   ={res}    0.9960
{txt}       Total {c |} {res} 1.01219042        11  .092017311   {txt}Root MSE        =   {res}  .0193

{txt}{hline 14}{c TT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{col 1} plotsize_gps{col 15}{c |}      Coef.{col 27}   Std. Err.{col 39}      t{col 47}   P>|t|{col 55}     [95% Con{col 68}f. Interval]
{hline 14}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
plotsize_self {c |}{col 15}{res}{space 2}-.7991388{col 27}{space 2} .1457297{col 38}{space 1}   -5.48{col 47}{space 3}0.002{col 55}{space 4}-1.155727{col 68}{space 3}-.4425509
{txt}{space 13} {c |}
{space 6}uq_dist {c |}
{space 9}128  {c |}{col 15}{res}{space 2}-.1437501{col 27}{space 2} .0215826{col 38}{space 1}   -6.66{col 47}{space 3}0.001{col 55}{space 4}-.1965608{col 68}{space 3}-.0909395
{txt}{space 9}178  {c |}{col 15}{res}{space 2} 1.609101{col 27}{space 2} .1566286{col 38}{space 1}   10.27{col 47}{space 3}0.000{col 55}{space 4} 1.225845{col 68}{space 3} 1.992358
{txt}{space 9}181  {c |}{col 15}{res}{space 2}    .0373{col 27}{space 2} .0222904{col 38}{space 1}    1.67{col 47}{space 3}0.145{col 55}{space 4}-.0172425{col 68}{space 3} .0918426
{txt}{space 9}184  {c |}{col 15}{res}{space 2} .4974004{col 27}{space 2} .0431651{col 38}{space 1}   11.52{col 47}{space 3}0.000{col 55}{space 4} .3917792{col 68}{space 3} .6030217
{txt}{space 9}194  {c |}{col 15}{res}{space 2}        0{col 27}{txt}  (omitted)
{space 13} {c |}
{space 8}_cons {c |}{col 15}{res}{space 2} .2696002{col 27}{space 2} .0222904{col 38}{space 1}   12.09{col 47}{space 3}0.000{col 55}{space 4} .2150577{col 68}{space 3} .3241428
{txt}{hline 14}{c BT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{res}{txt}. done
{res}{txt}
Univariate imputation{txt}{col 45}{ralign 12:Imputations }= {res}       1
{txt}Predictive mean matching{txt}{col 45}{ralign 12:added }= {res}       1
{txt}Imputed: {it:m}=1{txt}{col 45}{ralign 12:updated }= {res}       0

{txt}{col 39}{ralign 12:Nearest neighbors }= {res}       5

{txt}{hline 19}{c TT}{hline 35}{hline 11}
{txt}{col 20}{c |}{center 46:  Observations per {it:m}}
{txt}{col 20}{c LT}{hline 35}{c TT}{hline 10}
{txt}{col 11}Variable {c |}{ralign 12:Complete }{ralign 13:Incomplete }{ralign 10:Imputed }{c |}{ralign 10:Total}
{hline 19}{c +}{hline 35}{c +}{hline 10}
{txt}{ralign 19:plotsize_gps }{c |}{res}         12           74        74 {txt}{c |}{res}        86
{txt}{hline 19}{c BT}{hline 35}{c BT}{hline 10}
{p 0 1 1 66}(complete + incomplete = total; imputed is the minimum across {it:m}
 of the number of filled-in observations.){p_end}

{txt}Note: Posterior parameters obtained using {help mi_boot_note:sampling with replacement}.
{res}{txt}
{com}.         mi                      unset

{txt}{col 13}variables
{col 5}original{col 23}new{col 42}meaning
    {hline 71}
{col 5}_mi_miss{col 23}mi_miss{col 42}0=orig-complete, 1=orig-incomplete
{col 5}_#_plotsize_gps{col 23}plotsize_gps_#_{col 42}imputed values of plotsize_gps
    {hline 71}
{col 5}# = 1

{com}. 
. * how did the imputation go?
.         tab                     mi_miss

 {txt}Incomplete {c |}
observation {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          0 {c |}{res}         12       13.95       13.95
{txt}          1 {c |}{res}         74       86.05      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}         86      100.00
{txt}
{com}.         pwcorr          plotsize_gps plotsize_gps_1_ if plotsize_gps != .

             {txt}{c |} plotsi~s plots~1_
{hline 13}{c +}{hline 18}
plotsize_gps {c |} {res}  1.0000 
{txt}plotsize_~1_ {c |} {res}  1.0000   1.0000 
{txt}
{com}.         tabstat         plotsize_gps plotsize_self plotsize_gps_1_, by(mi_miss) statistics(n mean min max) columns(statistics) longstub format(%9.3g) 

{txt}{lalign 8:mi_miss} {...}
{ralign 12:variable} {...}
{c |}         N      mean       min       max
{hline 22}{c +}{hline 40}
{lalign 8:0} {...}
{ralign 12:plotsize_gps} {...}
{c |}{...}
 {res}       12      .478      .045      1.67
{space 8} {...}
{txt}{ralign 12:plotsize_s~f} {...}
{c |}{...}
 {res}       12       .43      .101      1.21
{space 8} {...}
{txt}{ralign 12:plotsize_~1_} {...}
{c |}{...}
 {res}       12      .478      .045      1.67
{txt}{hline 22}{c +}{hline 40}
{lalign 8:1} {...}
{ralign 12:plotsize_gps} {...}
{c |}{...}
 {res}        0         .         .         .
{space 8} {...}
{txt}{ralign 12:plotsize_s~f} {...}
{c |}{...}
 {res}       74      .501     .0809      2.83
{space 8} {...}
{txt}{ralign 12:plotsize_~1_} {...}
{c |}{...}
 {res}       74      .359      .045      1.67
{txt}{hline 22}{c +}{hline 40}
{lalign 8:Total} {...}
{ralign 12:plotsize_gps} {...}
{c |}{...}
 {res}       12      .478      .045      1.67
{space 8} {...}
{txt}{ralign 12:plotsize_s~f} {...}
{c |}{...}
 {res}       86      .492     .0809      2.83
{space 8} {...}
{txt}{ralign 12:plotsize_~1_} {...}
{c |}{...}
 {res}       86      .376      .045      1.67
{txt}{hline 22}{c BT}{hline 40}

{com}.         rename          plotsize_gps_1_ plotsize        
{res}{txt}
{com}.         
. * generate seasonal variable
.         generate        season = 1
{txt}
{com}. 
. * keep what we want, get rid of the rest
.         keep            hhid plot_id plotsize season
{txt}
{com}. 
. *       Prepare for export
. compress
  {txt}variable {bf}season{sf} was {bf}{res}float{sf}{txt} now {bf}{res}byte{sf}
{txt}  (258 bytes saved)

{com}. describe

{txt}Contains data from {res}G:/My Drive/weather_project/household_data/tanzania/wave_1/raw/SEC_2B.dta
{txt}  obs:{res}            86                          
{txt} vars:{res}             4                          28 May 2011 14:43
                                              (_dta has notes)
{txt}{hline}
              storage   display    value
variable name   type    format     label      variable label
{hline}
{p 0 48}{res}{bind:hhid           }{txt}{bind: str14   }{bind:{txt}%14s      }{space 1}{bind:         }{bind:  }{res}{res}Unique HH Identifier{p_end}
{p 0 48}{bind:plot_id        }{txt}{bind: str17   }{bind:{txt}%17s      }{space 1}{bind:         }{bind:  }{res}{res}{p_end}
{p 0 48}{bind:plotsize       }{txt}{bind: float   }{bind:{txt}%9.0g     }{space 1}{bind:         }{bind:  }{res}{res}{p_end}
{p 0 48}{bind:season         }{txt}{bind: byte    }{bind:{txt}%9.0g     }{space 1}{bind:         }{bind:  }{res}{res}{p_end}
{txt}{hline}
Sorted by: 
{res}     Note: Dataset has changed since last saved.
{txt}
{com}. summarize 

{txt}    Variable {c |}        Obs        Mean    Std. Dev.       Min        Max
{hline 13}{c +}{hline 57}
{space 8}hhid {c |}{res}          0
{txt}{space 5}plot_id {c |}{res}          0
{txt}{space 4}plotsize {c |}{res}         86    .3755143    .4137777       .045   1.673201
{txt}{space 6}season {c |}{res}         86           1           0          1          1
{txt}
{com}. sort plot_id
{txt}
{com}. customsave , idvar(plot_id) filename(AG_SEC2B.dta) path("$export") dofile(2008_AGSEC2B) user($user)
 with do file 2008_AGSEC2B by user themacfreezie using computer Torbit

{txt}
{com}. 
. * close the log
.         log     close
      {txt}name:  {res}<unnamed>
       {txt}log:  {res}C:/Users/themacfreezie/git/weather_project/tanzania/household_code/logs/wv1_AGSEC2B.smcl
  {txt}log type:  {res}smcl
 {txt}closed on:  {res}17 May 2020, 00:23:18
{txt}{.-}
{smcl}
{txt}{sf}{ul off}{smcl}
{com}{sf}{ul off}{txt}{.-}
      name:  {res}<unnamed>
       {txt}log:  {res}C:/Users/themacfreezie/git/weather_project/tanzania/household_code/logs/wv1_AGSEC2B.smcl
  {txt}log type:  {res}smcl
 {txt}opened on:  {res}17 May 2020, 01:19:19
{txt}
{com}. 
. 
. **********************************************************************************
. **      TZA 2008 (Wave 1) - Agriculture Section 2B 
. **********************************************************************************
. 
. * load data
.         use             "$root/SEC_2B", clear
{txt}
{com}. 
. * generate unique ob id 
.         generate        plot_id = hhid + " " + plotnum
{txt}
{com}.         isid            plot_id
{txt}
{com}.         
. * rename variables of interest (plotsizes)
.         rename          s2bq9 plotsize_self_ac
{res}{txt}
{com}.         rename          area plotsize_gps_ac
{res}{txt}
{com}.         
. * convert from acres to hectares
.         generate        plotsize_self = plotsize_self_ac * 0.404686
{txt}
{com}.         label           var plotsize_self "Self-reported Area (Hectares)"
{txt}
{com}.         generate        plotsize_gps = plotsize_gps_ac * 0.404686
{txt}(74 missing values generated)

{com}.         label           var plotsize_gps "GPS Measured Area (Hectares)"
{txt}
{com}.         drop            plotsize_gps_ac plotsize_self_ac
{txt}
{com}.         
. * interrogating plotsize variables
.         count           if plotsize_gps != . & plotsize_self != .
  {res}12
{txt}
{com}.  *** 12 not mising, out of 86
.         pwcorr          plotsize_gps plotsize_self

             {txt}{c |} plotsi~s plotsi~f
{hline 13}{c +}{hline 18}
plotsize_gps {c |} {res}  1.0000 
{txt}plotsize_s~f {c |} {res}  0.7817   1.0000 
{txt}
{com}.  *** high correlation (0.7817)
. * inverstingating the high and low end of gps measurments
.         * high end
.                 tab                     plotsize_gps

        {txt}GPS {c |}
   Measured {c |}
       Area {c |}
 (Hectares) {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
       .045 {c |}{res}          1        8.33        8.33
{txt}   .1079001 {c |}{res}          1        8.33       16.67
{txt}   .1452001 {c |}{res}          1        8.33       25.00
{txt}   .1478001 {c |}{res}          1        8.33       33.33
{txt}   .2024002 {c |}{res}          1        8.33       41.67
{txt}   .2934003 {c |}{res}          1        8.33       50.00
{txt}   .4436004 {c |}{res}          1        8.33       58.33
{txt}   .5515005 {c |}{res}          1        8.33       66.67
{txt}   .5700005 {c |}{res}          1        8.33       75.00
{txt}   .6467006 {c |}{res}          1        8.33       83.33
{txt}   .9085008 {c |}{res}          1        8.33       91.67
{txt}   1.673201 {c |}{res}          1        8.33      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}         12      100.00
{txt}
{com}.                 sum                     plotsize_gps, detail

                {txt}GPS Measured Area (Hectares)
{hline 61}
      Percentiles      Smallest
 1%    {res}     .045           .045
{txt} 5%    {res}     .045       .1079001
{txt}10%    {res} .1079001       .1452001       {txt}Obs         {res}         12
{txt}25%    {res} .1465001       .1478001       {txt}Sum of Wgt. {res}         12

{txt}50%    {res} .3685003                      {txt}Mean          {res} .4779338
                        {txt}Largest       Std. Dev.     {res} .4584192
{txt}75%    {res} .6083505       .5700005
{txt}90%    {res} .9085008       .6467006       {txt}Variance      {res} .2101482
{txt}95%    {res} 1.673201       .9085008       {txt}Skewness      {res} 1.539129
{txt}99%    {res} 1.673201       1.673201       {txt}Kurtosis      {res}  4.85356
{txt}
{com}.                 *histogram      plotsize_gps if plotsize_gps > .9
.          *** mean = 0.478
.          *** 90% of obs < .9
.                 sort            plotsize_gps
{txt}
{com}.                 sum             plotsize_gps if plotsize_gps>0.9

{txt}    Variable {c |}        Obs        Mean    Std. Dev.       Min        Max
{hline 13}{c +}{hline 57}
plotsize_gps {c |}{res}          2    1.290851     .540725   .9085008   1.673201
{txt}
{com}.          *** 2 obs > 0.9
.                 list            plotsize_gps plotsize_self if plotsize_gps>0.9 & !missing(plotsize_gps), sep(0)
{txt}
     {c TLC}{hline 10}{c -}{hline 10}{c TRC}
     {c |} {res}plotsi~s   plotsi~f {txt}{c |}
     {c LT}{hline 10}{c -}{hline 10}{c RT}
 11. {c |} {res}.9085008   1.214058 {txt}{c |}
 12. {c |} {res}1.673201    .809372 {txt}{c |}
     {c BLC}{hline 10}{c -}{hline 10}{c BRC}

{com}.                 pwcorr          plotsize_gps plotsize_self if plotsize_gps>0.9 & !missing(plotsize_gps)

             {txt}{c |} plotsi~s plotsi~f
{hline 13}{c +}{hline 18}
plotsize_gps {c |} {res}  1.0000 
{txt}plotsize_s~f {c |} {res} -1.0000   1.0000 
{txt}
{com}.          *** corr = -1.0000 (kind of weird, is this because there are only 2 obs?)
.                 sum             plotsize_gps if plotsize_gps>0.6

{txt}    Variable {c |}        Obs        Mean    Std. Dev.       Min        Max
{hline 13}{c +}{hline 57}
plotsize_gps {c |}{res}          3    1.076134    .5333871   .6467006   1.673201
{txt}
{com}.          *** 3 obs > 0.6
.                 list            plotsize_gps plotsize_self if plotsize_gps>0.6 & !missing(plotsize_gps), sep(0)
{txt}
     {c TLC}{hline 10}{c -}{hline 10}{c TRC}
     {c |} {res}plotsi~s   plotsi~f {txt}{c |}
     {c LT}{hline 10}{c -}{hline 10}{c RT}
 10. {c |} {res}.6467006    .809372 {txt}{c |}
 11. {c |} {res}.9085008   1.214058 {txt}{c |}
 12. {c |} {res}1.673201    .809372 {txt}{c |}
     {c BLC}{hline 10}{c -}{hline 10}{c BRC}

{com}.                 pwcorr          plotsize_gps plotsize_self if plotsize_gps>0.6 & !missing(plotsize_gps)

             {txt}{c |} plotsi~s plotsi~f
{hline 13}{c +}{hline 18}
plotsize_gps {c |} {res}  1.0000 
{txt}plotsize_s~f {c |} {res} -0.2722   1.0000 
{txt}
{com}.          *** corr = -0.2722 (a real value!)
.          *** not going to drop anything here
.         ///////////////////////////////////////////////////////////////////////////
>         * low end
.                 tab                     plotsize_gps

        {txt}GPS {c |}
   Measured {c |}
       Area {c |}
 (Hectares) {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
       .045 {c |}{res}          1        8.33        8.33
{txt}   .1079001 {c |}{res}          1        8.33       16.67
{txt}   .1452001 {c |}{res}          1        8.33       25.00
{txt}   .1478001 {c |}{res}          1        8.33       33.33
{txt}   .2024002 {c |}{res}          1        8.33       41.67
{txt}   .2934003 {c |}{res}          1        8.33       50.00
{txt}   .4436004 {c |}{res}          1        8.33       58.33
{txt}   .5515005 {c |}{res}          1        8.33       66.67
{txt}   .5700005 {c |}{res}          1        8.33       75.00
{txt}   .6467006 {c |}{res}          1        8.33       83.33
{txt}   .9085008 {c |}{res}          1        8.33       91.67
{txt}   1.673201 {c |}{res}          1        8.33      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}         12      100.00
{txt}
{com}.                 sum                     plotsize_gps, detail

                {txt}GPS Measured Area (Hectares)
{hline 61}
      Percentiles      Smallest
 1%    {res}     .045           .045
{txt} 5%    {res}     .045       .1079001
{txt}10%    {res} .1079001       .1452001       {txt}Obs         {res}         12
{txt}25%    {res} .1465001       .1478001       {txt}Sum of Wgt. {res}         12

{txt}50%    {res} .3685003                      {txt}Mean          {res} .4779338
                        {txt}Largest       Std. Dev.     {res} .4584192
{txt}75%    {res} .6083505       .5700005
{txt}90%    {res} .9085008       .6467006       {txt}Variance      {res} .2101482
{txt}95%    {res} 1.673201       .9085008       {txt}Skewness      {res} 1.539129
{txt}99%    {res} 1.673201       1.673201       {txt}Kurtosis      {res}  4.85356
{txt}
{com}.                 *histogram      plotsize_gps if plotsize_gps < 0.11
.           *** mean = 0.478
.           *** 10% of obs < 0.11
.                 sum             plotsize_gps if plotsize_gps<0.11

{txt}    Variable {c |}        Obs        Mean    Std. Dev.       Min        Max
{hline 13}{c +}{hline 57}
plotsize_gps {c |}{res}          2    .0764501    .0444771       .045   .1079001
{txt}
{com}.           *** 2 obs < 0.11
.                 list            plotsize_gps plotsize_self if plotsize_gps<0.11 & !missing(plotsize_gps), sep(0)
{txt}
     {c TLC}{hline 10}{c -}{hline 10}{c TRC}
     {c |} {res}plotsi~s   plotsi~f {txt}{c |}
     {c LT}{hline 10}{c -}{hline 10}{c RT}
  1. {c |} {res}    .045   .1011715 {txt}{c |}
  2. {c |} {res}.1079001    .202343 {txt}{c |}
     {c BLC}{hline 10}{c -}{hline 10}{c BRC}

{com}.                 pwcorr          plotsize_gps plotsize_self if plotsize_gps<0.11 & !missing(plotsize_gps)

             {txt}{c |} plotsi~s plotsi~f
{hline 13}{c +}{hline 18}
plotsize_gps {c |} {res}  1.0000 
{txt}plotsize_s~f {c |} {res}  1.0000   1.0000 
{txt}
{com}.           *** corr = 1.000(again, 2 obs)
.                 sum             plotsize_gps if plotsize_gps<0.15

{txt}    Variable {c |}        Obs        Mean    Std. Dev.       Min        Max
{hline 13}{c +}{hline 57}
plotsize_gps {c |}{res}          4    .1114751    .0479187       .045   .1478001
{txt}
{com}.           *** 3 < 0.15
.                 list            plotsize_gps plotsize_self if plotsize_gps<0.15 & !missing(plotsize_gps), sep(0)
{txt}
     {c TLC}{hline 10}{c -}{hline 10}{c TRC}
     {c |} {res}plotsi~s   plotsi~f {txt}{c |}
     {c LT}{hline 10}{c -}{hline 10}{c RT}
  1. {c |} {res}    .045   .1011715 {txt}{c |}
  2. {c |} {res}.1079001    .202343 {txt}{c |}
  3. {c |} {res}.1452001    .202343 {txt}{c |}
  4. {c |} {res}.1478001   .1011715 {txt}{c |}
     {c BLC}{hline 10}{c -}{hline 10}{c BRC}

{com}.                 pwcorr          plotsize_gps plotsize_self if plotsize_gps<0.15 & !missing(plotsize_gps)

             {txt}{c |} plotsi~s plotsi~f
{hline 13}{c +}{hline 18}
plotsize_gps {c |} {res}  1.0000 
{txt}plotsize_s~f {c |} {res}  0.3633   1.0000 
{txt}
{com}.           *** corr = 0.3633 (a real value!)
.           *** again, won't be dropping anything
.          * for robustness, although no zero values in this set
.                 replace         plotsize_gps = . if plotsize_gps == 0
{txt}(0 real changes made)

{com}.         
. * must merge in regional identifiers from 2008_HHSECA to impute
.         merge           m:1 hhid using "$export/HH_SECA"
{res}
{txt}{col 5}Result{col 38}# of obs.
{col 5}{hline 41}
{col 5}not matched{col 30}{res}           3,201
{txt}{col 9}from master{col 30}{res}               0{txt}  (_merge==1)
{col 9}from using{col 30}{res}           3,201{txt}  (_merge==2)

{col 5}matched{col 30}{res}              86{txt}  (_merge==3)
{col 5}{hline 41}

{com}.         tab                     _merge

                 {txt}_merge {c |}      Freq.     Percent        Cum.
{hline 24}{c +}{hline 35}
         using only (2) {c |}{res}      3,201       97.38       97.38
{txt}            matched (3) {c |}{res}         86        2.62      100.00
{txt}{hline 24}{c +}{hline 35}
                  Total {c |}{res}      3,287      100.00
{txt}
{com}.  *** all obs in master are matched
.         drop            if _merge == 2
{txt}(3,201 observations deleted)

{com}.         drop            _merge
{txt}
{com}. * interrogating regional identifiers
.         sort            region
{txt}
{com}.         by region:      distinct district

{txt}{hline}
-> region = Arusha

{col 11}{c |}        Observations
{col 11}{c |}      total   distinct
{hline 10}{c +}{hline 22}
 district {c |}  {res}        3          2

{txt}{hline}
-> region = Kilimanjaro

{col 11}{c |}        Observations
{col 11}{c |}      total   distinct
{hline 10}{c +}{hline 22}
 district {c |}  {res}        3          2

{txt}{hline}
-> region = Morogoro

{col 11}{c |}        Observations
{col 11}{c |}      total   distinct
{hline 10}{c +}{hline 22}
 district {c |}  {res}        1          1

{txt}{hline}
-> region = Dar es salaam

{col 11}{c |}        Observations
{col 11}{c |}      total   distinct
{hline 10}{c +}{hline 22}
 district {c |}  {res}        2          1

{txt}{hline}
-> region = Lindi

{col 11}{c |}        Observations
{col 11}{c |}      total   distinct
{hline 10}{c +}{hline 22}
 district {c |}  {res}        2          1

{txt}{hline}
-> region = Iringa

{col 11}{c |}        Observations
{col 11}{c |}      total   distinct
{hline 10}{c +}{hline 22}
 district {c |}  {res}        1          1

{txt}{hline}
-> region = Mbeya

{col 11}{c |}        Observations
{col 11}{c |}      total   distinct
{hline 10}{c +}{hline 22}
 district {c |}  {res}        7          1

{txt}{hline}
-> region = Kigoma

{col 11}{c |}        Observations
{col 11}{c |}      total   distinct
{hline 10}{c +}{hline 22}
 district {c |}  {res}        8          3

{txt}{hline}
-> region = Shinyanga

{col 11}{c |}        Observations
{col 11}{c |}      total   distinct
{hline 10}{c +}{hline 22}
 district {c |}  {res}       33          7

{txt}{hline}
-> region = Kagera

{col 11}{c |}        Observations
{col 11}{c |}      total   distinct
{hline 10}{c +}{hline 22}
 district {c |}  {res}       13          5

{txt}{hline}
-> region = Mwanza

{col 11}{c |}        Observations
{col 11}{c |}      total   distinct
{hline 10}{c +}{hline 22}
 district {c |}  {res}        6          4

{txt}{hline}
-> region = Mara

{col 11}{c |}        Observations
{col 11}{c |}      total   distinct
{hline 10}{c +}{hline 22}
 district {c |}  {res}        2          2

{txt}{hline}
-> region = Manyara

{col 11}{c |}        Observations
{col 11}{c |}      total   distinct
{hline 10}{c +}{hline 22}
 district {c |}  {res}        1          1

{txt}{hline}
-> region = KASKAZINI UNGUJA

{col 11}{c |}        Observations
{col 11}{c |}      total   distinct
{hline 10}{c +}{hline 22}
 district {c |}  {res}        3          2

{txt}{hline}
-> region = MJINI/MAGHARIBI UNGUJA

{col 11}{c |}        Observations
{col 11}{c |}      total   distinct
{hline 10}{c +}{hline 22}
 district {c |}  {res}        1          1
{txt}
{com}.  *** 126 distinct districts
. * unique district id
.         tostring        region, generate(reg_num) 
{txt}reg_num generated as {res:str2}

{com}.         tostring        district, generate(dist_num)
{txt}dist_num generated as {res:str1}

{com}.         generate        uq_dist = reg_num + dist_num
{txt}
{com}.         distinct        uq_dist

{txt}{col 10}{c |}        Observations
{col 10}{c |}      total   distinct
{hline 9}{c +}{hline 22}
 uq_dist {c |}  {res}       86         34
{txt}
{com}.         sort            region district
{txt}
{com}.         destring        uq_dist, replace
{txt}uq_dist: all characters numeric; {res}replaced {txt}as {res}int
{txt}
{com}.  *** 126 once again, good deal
.         drop            reg_num dist_num
{txt}
{com}.         
. * impute missing + irregular plot sizes using predictive mean matching 
. * including plotsize_self as control
.         mi set          wide    // declare the data to be wide.
{txt}
{com}.         mi xtset, clear         // this is a precautinary step to clear any xtset that the analyst may have had in place previously
{res}{txt}
{com}.         mi register     imputed plotsize_gps // identify plotsize_GPS as the variable being imputed
{res}{txt}
{com}.         mi impute       pmm plotsize_gps plotsize_self i.uq_dist, add(1) rseed(245780) noisily dots force knn(5) bootstrap
{res}
{txt}Imputing {it:m}=1:
{col 3}{res}
{txt}Running {bf:regress} on bootstrap sample:

{p 0 6 2}note: 194.uq_dist omitted because of collinearity{p_end}

      Source {c |}       SS           df       MS      Number of obs   ={res}        12
{txt}{hline 13}{c +}{hline 34}   F(5, 6)         = {res}   555.46
{txt}       Model {c |} {res} 1.03495592         5  .206991185   {txt}Prob > F        ={res}    0.0000
{txt}    Residual {c |} {res} .002235874         6  .000372646   {txt}R-squared       ={res}    0.9978
{txt}{hline 13}{c +}{hline 34}   Adj R-squared   ={res}    0.9960
{txt}       Total {c |} {res}  1.0371918        11  .094290163   {txt}Root MSE        =   {res}  .0193

{txt}{hline 14}{c TT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{col 1} plotsize_gps{col 15}{c |}      Coef.{col 27}   Std. Err.{col 39}      t{col 47}   P>|t|{col 55}     [95% Con{col 68}f. Interval]
{hline 14}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
plotsize_self {c |}{col 15}{res}{space 2}-.5292997{col 27}{space 2} .1457297{col 38}{space 1}   -3.63{col 47}{space 3}0.011{col 55}{space 4}-.8858876{col 68}{space 3}-.1727119
{txt}{space 13} {c |}
{space 6}uq_dist {c |}
{space 9}128  {c |}{col 15}{res}{space 2}-.1164501{col 27}{space 2} .0215826{col 38}{space 1}   -5.40{col 47}{space 3}0.002{col 55}{space 4}-.1692607{col 68}{space 3}-.0636395
{txt}{space 9}178  {c |}{col 15}{res}{space 2} 1.336101{col 27}{space 2} .1566286{col 38}{space 1}    8.53{col 47}{space 3}0.000{col 55}{space 4} .9528449{col 68}{space 3} 1.719357
{txt}{space 9}181  {c |}{col 15}{res}{space 2}    .0373{col 27}{space 2} .0222904{col 38}{space 1}    1.67{col 47}{space 3}0.145{col 55}{space 4}-.0172425{col 68}{space 3} .0918426
{txt}{space 9}184  {c |}{col 15}{res}{space 2} .4428004{col 27}{space 2} .0431651{col 38}{space 1}   10.26{col 47}{space 3}0.000{col 55}{space 4} .3371791{col 68}{space 3} .5484216
{txt}{space 9}194  {c |}{col 15}{res}{space 2}        0{col 27}{txt}  (omitted)
{space 13} {c |}
{space 8}_cons {c |}{col 15}{res}{space 2} .2150002{col 27}{space 2} .0222904{col 38}{space 1}    9.65{col 47}{space 3}0.000{col 55}{space 4} .1604576{col 68}{space 3} .2695428
{txt}{hline 14}{c BT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{res}{txt}. done
{res}{txt}
Univariate imputation{txt}{col 45}{ralign 12:Imputations }= {res}       1
{txt}Predictive mean matching{txt}{col 45}{ralign 12:added }= {res}       1
{txt}Imputed: {it:m}=1{txt}{col 45}{ralign 12:updated }= {res}       0

{txt}{col 39}{ralign 12:Nearest neighbors }= {res}       5

{txt}{hline 19}{c TT}{hline 35}{hline 11}
{txt}{col 20}{c |}{center 46:  Observations per {it:m}}
{txt}{col 20}{c LT}{hline 35}{c TT}{hline 10}
{txt}{col 11}Variable {c |}{ralign 12:Complete }{ralign 13:Incomplete }{ralign 10:Imputed }{c |}{ralign 10:Total}
{hline 19}{c +}{hline 35}{c +}{hline 10}
{txt}{ralign 19:plotsize_gps }{c |}{res}         12           74        74 {txt}{c |}{res}        86
{txt}{hline 19}{c BT}{hline 35}{c BT}{hline 10}
{p 0 1 1 66}(complete + incomplete = total; imputed is the minimum across {it:m}
 of the number of filled-in observations.){p_end}

{txt}Note: Posterior parameters obtained using {help mi_boot_note:sampling with replacement}.
{res}{txt}
{com}.         mi                      unset

{txt}{col 13}variables
{col 5}original{col 23}new{col 42}meaning
    {hline 71}
{col 5}_mi_miss{col 23}mi_miss{col 42}0=orig-complete, 1=orig-incomplete
{col 5}_#_plotsize_gps{col 23}plotsize_gps_#_{col 42}imputed values of plotsize_gps
    {hline 71}
{col 5}# = 1

{com}. 
. * how did the imputation go?
.         tab                     mi_miss

 {txt}Incomplete {c |}
observation {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          0 {c |}{res}         12       13.95       13.95
{txt}          1 {c |}{res}         74       86.05      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}         86      100.00
{txt}
{com}.         pwcorr          plotsize_gps plotsize_gps_1_ if plotsize_gps != .

             {txt}{c |} plotsi~s plots~1_
{hline 13}{c +}{hline 18}
plotsize_gps {c |} {res}  1.0000 
{txt}plotsize_~1_ {c |} {res}  1.0000   1.0000 
{txt}
{com}.         tabstat         plotsize_gps plotsize_self plotsize_gps_1_, by(mi_miss) statistics(n mean min max) columns(statistics) longstub format(%9.3g) 

{txt}{lalign 8:mi_miss} {...}
{ralign 12:variable} {...}
{c |}         N      mean       min       max
{hline 22}{c +}{hline 40}
{lalign 8:0} {...}
{ralign 12:plotsize_gps} {...}
{c |}{...}
 {res}       12      .478      .045      1.67
{space 8} {...}
{txt}{ralign 12:plotsize_s~f} {...}
{c |}{...}
 {res}       12       .43      .101      1.21
{space 8} {...}
{txt}{ralign 12:plotsize_~1_} {...}
{c |}{...}
 {res}       12      .478      .045      1.67
{txt}{hline 22}{c +}{hline 40}
{lalign 8:1} {...}
{ralign 12:plotsize_gps} {...}
{c |}{...}
 {res}        0         .         .         .
{space 8} {...}
{txt}{ralign 12:plotsize_s~f} {...}
{c |}{...}
 {res}       74      .501     .0809      2.83
{space 8} {...}
{txt}{ralign 12:plotsize_~1_} {...}
{c |}{...}
 {res}       74      .292      .045      1.67
{txt}{hline 22}{c +}{hline 40}
{lalign 8:Total} {...}
{ralign 12:plotsize_gps} {...}
{c |}{...}
 {res}       12      .478      .045      1.67
{space 8} {...}
{txt}{ralign 12:plotsize_s~f} {...}
{c |}{...}
 {res}       86      .492     .0809      2.83
{space 8} {...}
{txt}{ralign 12:plotsize_~1_} {...}
{c |}{...}
 {res}       86      .318      .045      1.67
{txt}{hline 22}{c BT}{hline 40}

{com}.         rename          plotsize_gps_1_ plotsize        
{res}{txt}
{com}.         
. * generate seasonal variable
.         generate        season = 1
{txt}
{com}. 
. * keep what we want, get rid of the rest
.         keep            hhid plot_id plotsize season
{txt}
{com}. 
. *       Prepare for export
. compress
  {txt}variable {bf}season{sf} was {bf}{res}float{sf}{txt} now {bf}{res}byte{sf}
{txt}  (258 bytes saved)

{com}. describe

{txt}Contains data from {res}G:/My Drive/weather_project/household_data/tanzania/wave_1/raw/SEC_2B.dta
{txt}  obs:{res}            86                          
{txt} vars:{res}             4                          28 May 2011 14:43
                                              (_dta has notes)
{txt}{hline}
              storage   display    value
variable name   type    format     label      variable label
{hline}
{p 0 48}{res}{bind:hhid           }{txt}{bind: str14   }{bind:{txt}%14s      }{space 1}{bind:         }{bind:  }{res}{res}Unique HH Identifier{p_end}
{p 0 48}{bind:plot_id        }{txt}{bind: str17   }{bind:{txt}%17s      }{space 1}{bind:         }{bind:  }{res}{res}{p_end}
{p 0 48}{bind:plotsize       }{txt}{bind: float   }{bind:{txt}%9.0g     }{space 1}{bind:         }{bind:  }{res}{res}{p_end}
{p 0 48}{bind:season         }{txt}{bind: byte    }{bind:{txt}%9.0g     }{space 1}{bind:         }{bind:  }{res}{res}{p_end}
{txt}{hline}
Sorted by: 
{res}     Note: Dataset has changed since last saved.
{txt}
{com}. summarize 

{txt}    Variable {c |}        Obs        Mean    Std. Dev.       Min        Max
{hline 13}{c +}{hline 57}
{space 8}hhid {c |}{res}          0
{txt}{space 5}plot_id {c |}{res}          0
{txt}{space 4}plotsize {c |}{res}         86    .3179363    .3059148       .045   1.673201
{txt}{space 6}season {c |}{res}         86           1           0          1          1
{txt}
{com}. sort plot_id
{txt}
{com}. customsave , idvar(plot_id) filename(AG_SEC2B.dta) path("$export") dofile(2008_AGSEC2B) user($user)
 with do file 2008_AGSEC2B by user themacfreezie using computer Torbit

{txt}
{com}. 
. * close the log
.         log     close
      {txt}name:  {res}<unnamed>
       {txt}log:  {res}C:/Users/themacfreezie/git/weather_project/tanzania/household_code/logs/wv1_AGSEC2B.smcl
  {txt}log type:  {res}smcl
 {txt}closed on:  {res}17 May 2020, 01:19:20
{txt}{.-}
{smcl}
{txt}{sf}{ul off}